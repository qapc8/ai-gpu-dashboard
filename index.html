<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GPU Intel Pro — Market Terminal</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
:root {
  --bg-0: #07090d;
  --bg-1: #0b0f16;
  --bg-2: #10151e;
  --bg-3: #151c28;
  --bg-4: #1a2332;
  --bg-hover: #1e2940;
  --border-0: #1a2233;
  --border-1: #243044;
  --border-2: #2e3d55;
  --text-0: #f0f2f5;
  --text-1: #c8cdd6;
  --text-2: #8a95a6;
  --text-3: #5c6980;
  --blue: #4e8ff7;
  --blue-dim: rgba(78,143,247,0.12);
  --cyan: #22d3ee;
  --cyan-dim: rgba(34,211,238,0.10);
  --green: #34d399;
  --green-dim: rgba(52,211,153,0.10);
  --red: #f87171;
  --red-dim: rgba(248,113,113,0.10);
  --amber: #fbbf24;
  --amber-dim: rgba(251,191,36,0.10);
  --purple: #a78bfa;
  --purple-dim: rgba(167,139,250,0.10);
  --orange: #fb923c;
  --orange-dim: rgba(251,146,60,0.10);
  --pink: #f472b6;
  --mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', Consolas, monospace;
  --sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --radius: 8px;
  --radius-sm: 5px;
  --shadow: 0 1px 3px rgba(0,0,0,0.3), 0 4px 12px rgba(0,0,0,0.15);
  --shadow-lg: 0 4px 20px rgba(0,0,0,0.4);
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg-0);
  color: var(--text-1);
  font-family: var(--sans);
  font-size: 13px;
  line-height: 1.55;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

/* ─── TOPBAR ─── */
.topbar {
  background: var(--bg-1);
  border-bottom: 1px solid var(--border-0);
  padding: 0 20px;
  height: 52px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: sticky;
  top: 0;
  z-index: 100;
  backdrop-filter: blur(12px);
}
.topbar-brand {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}
.topbar-logo {
  width: 30px;
  height: 30px;
  border-radius: 7px;
  background: linear-gradient(135deg, var(--blue) 0%, var(--cyan) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--mono);
  font-weight: 800;
  font-size: 14px;
  color: var(--bg-0);
}
.topbar-name {
  display: flex;
  flex-direction: column;
  line-height: 1.15;
}
.topbar-title {
  font-family: var(--sans);
  font-size: 13px;
  font-weight: 700;
  color: var(--text-0);
  letter-spacing: -0.2px;
  white-space: nowrap;
}
.topbar-subtitle {
  font-size: 10px;
  color: var(--text-3);
  font-weight: 500;
  font-family: var(--mono);
  letter-spacing: 0.5px;
  text-transform: uppercase;
}
.topbar-indicators {
  display: flex;
  align-items: center;
  gap: 0;
  overflow-x: auto;
  scrollbar-width: none;
  margin: 0 16px;
  flex: 1;
  justify-content: center;
}
.topbar-indicators::-webkit-scrollbar { display: none; }
.indicator {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 1px;
  font-family: var(--mono);
  padding: 5px 16px;
  white-space: nowrap;
  border-right: 1px solid var(--border-0);
  transition: background 0.15s;
  min-width: 0;
}
.indicator:hover { background: var(--bg-hover); }
.indicator:last-child { border-right: none; }
.indicator-label {
  color: var(--text-3);
  font-weight: 600;
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  line-height: 1;
}
.indicator-row {
  display: flex;
  align-items: center;
  gap: 6px;
}
.indicator-value { color: var(--text-0); font-weight: 700; font-size: 12px; line-height: 1; }
.indicator-change { font-weight: 600; font-size: 9.5px; padding: 1px 4px; border-radius: 3px; line-height: 1; }
.indicator-change.up { color: var(--green); background: rgba(34,197,94,0.12); }
.indicator-change.down { color: var(--red); background: rgba(239,68,68,0.12); }
.indicator-spark-svg { display: block; flex-shrink: 0; }
.indicator-sub { font-size: 9px; font-weight: 600; padding: 1px 4px; border-radius: 3px; letter-spacing: 0.3px; line-height: 1; }
.indicator-sub.up { color: var(--green); }
.indicator-sub.tag-green { color: var(--green); background: rgba(34,197,94,0.12); }
.indicator-sub.tag-amber { color: var(--amber); background: rgba(251,191,36,0.12); }
.indicator-sub.tag-red { color: var(--red); background: rgba(239,68,68,0.12); }
.indicator-divider { width: 1px; height: 32px; background: var(--border-1); margin: 0; flex-shrink: 0; }
.topbar-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}
.live-dot {
  width: 7px; height: 7px;
  border-radius: 50%;
  background: var(--green);
  animation: blink 2s ease-in-out infinite;
  box-shadow: 0 0 6px var(--green);
}
@keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }
.topbar-time {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--text-3);
  line-height: 1.2;
  text-align: right;
}

/* ─── NEWS TICKER ─── */
.news-bar {
  background: var(--bg-1);
  border-bottom: 1px solid var(--border-0);
  height: 30px;
  overflow: hidden;
  position: relative;
  display: flex;
  align-items: center;
}
.news-label {
  position: absolute;
  left: 0; top: 0;
  height: 30px;
  padding: 0 12px;
  display: flex;
  align-items: center;
  background: var(--red);
  color: white;
  font-family: var(--mono);
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1px;
  z-index: 2;
}
.news-track {
  display: flex;
  align-items: center;
  height: 30px;
  white-space: nowrap;
  padding-left: 72px;
  animation: ticker 180s linear infinite;
}
.news-track:hover { animation-play-state: paused; }
.news-entry {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-right: 48px;
  font-size: 11.5px;
}
.news-src { color: var(--cyan); font-weight: 600; font-family: var(--mono); font-size: 10px; }
.news-txt { color: var(--text-1); }
.news-tag {
  font-size: 8px;
  font-weight: 700;
  font-family: var(--mono);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 1px 5px;
  border-radius: 3px;
}
.news-tag-high { background: var(--red-dim); color: var(--red); }
.news-tag-medium { background: var(--amber-dim); color: var(--amber); }
.news-tag-low { background: var(--green-dim); color: var(--green); }
@keyframes ticker {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* ─── NAV ─── */
.nav {
  background: var(--bg-2);
  border-bottom: 1px solid var(--border-0);
  display: flex;
  padding: 0 16px;
  gap: 1px;
  overflow-x: auto;
}
.nav-item {
  padding: 10px 18px;
  color: var(--text-3);
  cursor: pointer;
  font-size: 11.5px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  border-bottom: 2px solid transparent;
  transition: all 0.15s ease;
  white-space: nowrap;
  font-family: var(--sans);
  position: relative;
}
.nav-item:hover { color: var(--text-1); background: rgba(78,143,247,0.04); }
.nav-item.active {
  color: var(--text-0);
  border-bottom-color: var(--blue);
  background: rgba(78,143,247,0.06);
}
.nav-item.active::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0; right: 0;
  height: 2px;
  background: var(--blue);
  box-shadow: 0 0 8px var(--blue);
}

/* ─── LAYOUT ─── */
.main { padding: 16px; }
.tab-panel { display: none; }
.tab-panel.active { display: block; }
.grid { display: grid; gap: 14px; }
.g-2 { grid-template-columns: 1fr 1fr; }
.g-3 { grid-template-columns: 1fr 1fr 1fr; }
.g-4 { grid-template-columns: 1fr 1fr 1fr 1fr; }
.g-7-3 { grid-template-columns: 7fr 3fr; }
.g-3-7 { grid-template-columns: 3fr 7fr; }
.g-6-4 { grid-template-columns: 6fr 4fr; }
.mb { margin-bottom: 14px; }

/* ─── CARDS ─── */
.card {
  background: var(--bg-2);
  border: 1px solid var(--border-0);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: border-color 0.15s;
}
.card:hover { border-color: var(--border-1); }
.card-hd {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-0);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--bg-3);
}
.card-hd-title {
  font-family: var(--sans);
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-2);
}
.card-hd-badge {
  font-size: 9px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 3px;
  font-family: var(--mono);
  letter-spacing: 0.5px;
}
.card-bd { padding: 16px; }
.card-bd-flush { padding: 0; }

/* ─── KPI STRIP ─── */
.kpi-strip { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 14px; }
.kpi {
  background: var(--bg-2);
  border: 1px solid var(--border-0);
  border-radius: var(--radius);
  padding: 16px 18px;
  position: relative;
  overflow: hidden;
  box-shadow: var(--shadow);
}
.kpi::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 3px;
  height: 100%;
  border-radius: 3px 0 0 3px;
}
.kpi.kpi-blue::before { background: var(--blue); }
.kpi.kpi-green::before { background: var(--green); }
.kpi.kpi-red::before { background: var(--red); }
.kpi.kpi-amber::before { background: var(--amber); }
.kpi.kpi-purple::before { background: var(--purple); }
.kpi.kpi-cyan::before { background: var(--cyan); }
.kpi-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: var(--text-3);
  font-weight: 600;
  margin-bottom: 6px;
}
.kpi-value {
  font-family: var(--mono);
  font-size: 22px;
  font-weight: 700;
  color: var(--text-0);
  line-height: 1.2;
}
.kpi-sub {
  font-size: 11px;
  color: var(--text-3);
  margin-top: 4px;
  font-family: var(--mono);
}
.kpi-sub .up { color: var(--green); font-weight: 600; }
.kpi-sub .dn { color: var(--red); font-weight: 600; }

/* ─── TABLES ─── */
.dt {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--mono);
  font-size: 11.5px;
}
.dt thead th {
  padding: 9px 12px;
  text-align: left;
  background: var(--bg-3);
  color: var(--text-3);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  font-weight: 700;
  border-bottom: 1px solid var(--border-1);
  position: sticky;
  top: 0;
  white-space: nowrap;
}
.dt thead th.r { text-align: right; }
.dt tbody td {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-0);
  white-space: nowrap;
}
.dt tbody td.r { text-align: right; font-variant-numeric: tabular-nums; }
.dt tbody tr:hover { background: var(--bg-hover); }
.dt tbody tr:nth-child(even) { background: rgba(11,15,22,0.4); }

/* ─── PRICE GRID ─── */
.pg-cloud-hdr { background: rgba(59,130,246,0.12); color: var(--blue); font-weight: 700; text-align: center; font-size: 10px; letter-spacing: 0.5px; text-transform: uppercase; }
.pg-mkt-hdr { background: rgba(245,158,11,0.12); color: var(--amber); font-weight: 700; text-align: center; font-size: 10px; letter-spacing: 0.5px; text-transform: uppercase; }
.pg-divider { width: 3px; padding: 0 !important; background: var(--border-1); }
.pg-cell-best { background: rgba(16,185,129,0.12); }
.pg-cell-worst { background: rgba(239,68,68,0.08); }
.pg-cell-na { color: var(--text-3); text-align: center; }
.pg-prov-th { text-align: center; font-size: 10px; white-space: nowrap; padding: 6px 8px !important; }
.pg-best { border-left: 2px solid var(--green); }

.c-green { color: var(--green); font-weight: 600; }
.c-red { color: var(--red); font-weight: 600; }
.c-amber { color: var(--amber); }
.c-cyan { color: var(--cyan); }
.c-purple { color: var(--purple); }
.c-blue { color: var(--blue); }
.fw { font-weight: 700; }
.dim { color: var(--text-3); }
.gpu-name { color: var(--text-0); font-weight: 600; }

.tag {
  display: inline-block;
  padding: 2px 7px;
  border-radius: 3px;
  font-size: 9.5px;
  font-weight: 700;
  letter-spacing: 0.3px;
}
.tag-arch { background: var(--purple-dim); color: var(--purple); }
.tag-vendor-nvidia { background: var(--green-dim); color: var(--green); }
.tag-vendor-amd { background: var(--red-dim); color: var(--red); }
.tag-avail-scarce { background: var(--red-dim); color: var(--red); }
.tag-avail-limited { background: var(--orange-dim); color: var(--orange); }
.tag-avail-moderate { background: var(--amber-dim); color: var(--amber); }
.tag-avail-good { background: var(--green-dim); color: var(--green); }
.tag-avail-abundant { background: var(--cyan-dim); color: var(--cyan); }

/* ─── CHARTS ─── */
.chart-wrap { position: relative; width: 100%; }
.chart-wrap canvas { width: 100% !important; }

/* ─── FORMS ─── */
.ctrl-select {
  padding: 6px 10px;
  background: var(--bg-3);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-sm);
  color: var(--text-0);
  font-family: var(--mono);
  font-size: 11.5px;
  outline: none;
  cursor: pointer;
  transition: border-color 0.15s;
}
.ctrl-select:focus { border-color: var(--blue); }
.ctrl-input {
  padding: 6px 10px;
  background: var(--bg-3);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-sm);
  color: var(--text-0);
  font-family: var(--mono);
  font-size: 11.5px;
  outline: none;
  width: 100%;
}
.ctrl-input:focus { border-color: var(--blue); }
.btn {
  padding: 7px 16px;
  border: 1px solid var(--border-1);
  border-radius: var(--radius-sm);
  background: var(--bg-3);
  color: var(--text-1);
  cursor: pointer;
  font-size: 11px;
  font-family: var(--sans);
  font-weight: 600;
  transition: all 0.15s;
  letter-spacing: 0.3px;
}
.btn:hover { background: var(--bg-4); border-color: var(--border-2); color: var(--text-0); }
.btn-primary {
  background: var(--blue);
  border-color: var(--blue);
  color: white;
}
.btn-primary:hover { background: #3a7be0; }
.btn-accent {
  background: var(--orange);
  border-color: var(--orange);
  color: white;
}
.btn-accent:hover { background: #e07d2a; }

/* ─── SENTIMENT ─── */
.sent-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 10px; }
.sent-card {
  background: var(--bg-3); border: 1px solid var(--border-0); border-radius: var(--radius);
  padding: 12px 14px; transition: border-color 0.15s;
}
.sent-card:hover { border-color: var(--border-2); }
.sent-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
.sent-gpu { font-family: var(--mono); font-size: 12px; font-weight: 700; color: var(--text-0); }
.sent-badges { display: flex; gap: 4px; flex-wrap: wrap; }
.sent-score-wrap { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.sent-bar-bg { flex:1; height: 6px; background: var(--bg-1); border-radius: 3px; overflow: hidden; }
.sent-bar { height: 100%; border-radius: 3px; transition: width 0.4s; }
.sent-score-val { font-family: var(--mono); font-size: 13px; font-weight: 700; min-width: 28px; text-align: right; }
.sent-metrics { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 6px; }
.sent-metric { font-family: var(--mono); font-size: 10px; color: var(--text-3); }
.sent-metric b { color: var(--text-1); }
.sent-tags { display: flex; gap: 4px; flex-wrap: wrap; margin-top: 6px; }
.sent-pro { font-size: 9px; padding: 2px 6px; border-radius: 3px; background: var(--green-dim); color: var(--green); font-weight: 600; }
.sent-con { font-size: 9px; padding: 2px 6px; border-radius: 3px; background: var(--red-dim); color: var(--red); font-weight: 600; }
.sent-pick { background: var(--amber-dim); color: var(--amber); }
.sent-use { font-size: 10px; color: var(--text-3); margin-top: 6px; font-style: italic; }

/* ─── DATA AUDIT ─── */
.da-section { margin-bottom: 10px; }
.da-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 16px; background: var(--bg-3); border: 1px solid var(--border-0);
  border-radius: var(--radius); cursor: pointer; transition: all 0.15s; user-select: none;
}
.da-header:hover { border-color: var(--border-1); background: var(--bg-4); }
.da-header.open { border-radius: var(--radius) var(--radius) 0 0; border-bottom-color: transparent; }
.da-header-left { display: flex; align-items: center; gap: 10px; }
.da-chevron { color: var(--text-3); font-size: 12px; transition: transform 0.2s; font-family: var(--mono); }
.da-header.open .da-chevron { transform: rotate(90deg); }
.da-title { font-family: var(--mono); font-size: 12px; font-weight: 700; color: var(--text-0); }
.da-meta { display: flex; gap: 8px; align-items: center; }
.da-badge { font-size: 9px; font-weight: 600; padding: 2px 8px; border-radius: 3px; font-family: var(--mono); letter-spacing: 0.5px; }
.da-body {
  display: none; border: 1px solid var(--border-0); border-top: none;
  border-radius: 0 0 var(--radius) var(--radius); background: var(--bg-2);
  overflow-x: auto; max-height: 500px; overflow-y: auto;
}
.da-body.open { display: block; }
.da-body .dt { font-size: 11px; }
.da-body .dt thead th { position: sticky; top: 0; z-index: 2; }
.da-raw { padding: 12px 16px; font-family: var(--mono); font-size: 11px; color: var(--text-1);
  white-space: pre-wrap; word-break: break-all; max-height: 400px; overflow-y: auto; line-height: 1.5; }
.da-highlight { background: rgba(251,191,36,0.2); border-radius: 2px; }

/* ─── AI PANELS ─── */
/* ─── AI PANELS ─── */
.ai-panel {
  background: var(--bg-2);
  border: 1px solid var(--border-1);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.ai-panel .card-hd { background: var(--bg-3); border-bottom-color: var(--border-1); }
.ai-panel .card-hd-title { color: var(--purple); }
.ai-body {
  padding: 20px;
  font-size: 13px;
  line-height: 1.8;
  max-height: 600px;
  overflow-y: auto;
  color: var(--text-1);
}
.ai-body h1, .ai-body h2, .ai-body h3 { color: var(--text-0); margin-top: 20px; margin-bottom: 10px; font-family: var(--sans); }
.ai-body h2 { font-size: 14px; border-bottom: 1px solid var(--border-0); padding-bottom: 6px; }
.ai-body h3 { font-size: 13px; color: var(--blue); }
.ai-body ul, .ai-body ol { padding-left: 20px; }
.ai-body li { margin-bottom: 6px; }
.ai-body strong { color: var(--amber); }
.ai-body code { background: var(--blue-dim); padding: 1px 5px; border-radius: 3px; color: var(--cyan); font-family: var(--mono); font-size: 12px; }
.ai-body p { margin-bottom: 10px; }
.ai-loading {
  display: flex; align-items: center; justify-content: center; flex-direction: column;
  padding: 48px; color: var(--text-3); gap: 12px; font-size: 12px;
}
.ai-loading .ai-spinner {
  width: 20px; height: 20px;
  border: 2px solid var(--purple);
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.ai-idle { display:flex; align-items:center; justify-content:center; padding:48px; color:var(--text-3); font-size:12px; flex-direction:column; gap:8px; }
.ai-idle-icon { font-size:24px; opacity:0.4; }

/* ─── AI SIGNAL TAGS ─── */
.ai-sig { display:inline-block; padding:2px 8px; border-radius:3px; font-size:9px; font-weight:800; letter-spacing:0.8px; font-family:var(--mono); margin-right:4px; vertical-align:middle; }
.ai-sig-buy { background:var(--green-dim); color:var(--green); }
.ai-sig-sell { background:var(--red-dim); color:var(--red); }
.ai-sig-hold { background:var(--amber-dim); color:var(--amber); }
.ai-sig-watch { background:var(--blue-dim); color:var(--blue); }
.ai-sig-alert { background:var(--red-dim); color:var(--red); }
.ai-sig-bull { background:var(--green-dim); color:var(--green); }
.ai-sig-bear { background:var(--red-dim); color:var(--red); }

/* ─── AI INTELLIGENCE HUB ─── */
.intel-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
.intel-card {
  background: var(--bg-2);
  border: 1px solid var(--border-0);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  transition: border-color 0.15s;
}
.intel-card:hover { border-color: var(--border-2); }
.intel-hd {
  padding: 10px 16px;
  border-bottom: 1px solid var(--border-0);
  display: flex; justify-content: space-between; align-items: center;
  background: var(--bg-3);
  border-radius: var(--radius) var(--radius) 0 0;
}
.intel-hd-left { display:flex; align-items:center; gap:10px; }
.intel-icon { width:28px; height:28px; border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:13px; flex-shrink:0; }
.intel-title { font-size:11.5px; font-weight:700; text-transform:uppercase; letter-spacing:0.8px; color:var(--text-1); font-family:var(--sans); }
.intel-sub { font-size:10px; color:var(--text-3); font-weight:500; }
.intel-status { font-size:9px; font-weight:600; font-family:var(--mono); padding:2px 8px; border-radius:10px; letter-spacing:0.5px; }
.intel-status-ready { background:var(--green-dim); color:var(--green); }
.intel-status-loading { background:var(--purple-dim); color:var(--purple); }
.intel-status-idle { background:rgba(92,105,128,0.15); color:var(--text-3); }
.intel-bd { padding:16px; max-height:480px; overflow-y:auto; }
.intel-bd .ai-body { padding:0; max-height:none; overflow:visible; }

/* ─── NOTES PANEL ─── */
.notes-panel {
  background: var(--bg-2);
  border: 1px solid var(--orange);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.notes-panel .card-hd { background: var(--bg-3); border-bottom-color: var(--orange); }
.notes-panel .card-hd-title { color: var(--orange); }

/* ─── AI COMMAND BAR ─── */
.ai-cmdbar {
  display:flex; align-items:center; gap:10px; padding:12px 16px;
  background:var(--bg-2); border:1px solid var(--border-0);
  border-radius:var(--radius); margin-bottom:14px;
}
.ai-cmdbar-label { font-size:10px; text-transform:uppercase; letter-spacing:1px; color:var(--text-3); font-weight:700; font-family:var(--mono); white-space:nowrap; }
.ai-cmdbar-sep { width:1px; height:24px; background:var(--border-1); }
.ai-cmdbar .btn { font-size:10.5px; padding:5px 14px; }
.ai-chip {
  display:inline-flex; align-items:center; gap:4px;
  padding:3px 10px; border-radius:12px;
  font-size:10px; font-weight:600; font-family:var(--mono);
  cursor:pointer; transition:all 0.15s; border:1px solid transparent;
}
.ai-chip:hover { filter:brightness(1.2); }
.ai-chip-active { border-color:currentColor; }
.ai-chip-purple { background:var(--purple-dim); color:var(--purple); }
.ai-chip-blue { background:var(--blue-dim); color:var(--blue); }
.ai-chip-green { background:var(--green-dim); color:var(--green); }
.ai-chip-orange { background:var(--orange-dim); color:var(--orange); }
.ai-chip-cyan { background:var(--cyan-dim); color:var(--cyan); }
.ai-chip-red { background:var(--red-dim); color:var(--red); }
.ai-chip-amber { background:var(--amber-dim); color:var(--amber); }

/* ─── SPOT CARDS ─── */
.spot-tile {
  background: var(--bg-2);
  border: 1px solid var(--border-0);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
}
.spot-tile-gpu { font-family: var(--mono); font-weight: 700; color: var(--text-0); font-size: 14px; margin-bottom: 10px; }
.spot-prices { display: flex; gap: 20px; margin-bottom: 8px; font-family: var(--mono); }
.spot-lbl { font-size: 9px; color: var(--text-3); text-transform: uppercase; letter-spacing: 0.5px; }
.spot-bid-val { color: var(--green); font-weight: 700; font-size: 18px; }
.spot-ask-val { color: var(--red); font-weight: 700; font-size: 18px; }
.spot-meta-row { display: flex; gap: 14px; font-size: 10.5px; color: var(--text-3); font-family: var(--mono); }
.spot-mini { height: 44px; margin-top: 8px; }

/* ─── REGION CARDS ─── */
.region-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 14px; }
.region-tile {
  background: var(--bg-2);
  border: 1px solid var(--border-0);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: var(--shadow);
}
.region-tile-name { font-weight: 700; color: var(--text-0); margin-bottom: 8px; font-size: 12px; }
.region-row { display: flex; justify-content: space-between; font-size: 11px; padding: 2px 0; }
.region-row-k { color: var(--text-3); }
.region-row-v { color: var(--text-0); font-family: var(--mono); font-weight: 600; }

/* ─── SCROLLBAR ─── */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: var(--bg-1); }
::-webkit-scrollbar-thumb { background: var(--border-1); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--blue); }

/* ─── RESPONSIVE ─── */
@media (max-width: 1200px) {
  .g-2, .g-3, .g-4, .g-7-3, .g-3-7, .g-6-4 { grid-template-columns: 1fr; }
  .topbar-indicators { display: none; }
}
</style>
<script>const EMBEDDED_DATA = {"matrix":[{"gpu_id":"B200","name":"NVIDIA B200 192GB","vendor":"NVIDIA","vram_gb":192,"arch":"Blackwell","tier":"flagship","cheapest_price":3.75,"cheapest_provider":"CoreWeave","most_expensive":5.35,"avg_price":4.55,"num_providers":6,"price_spread_pct":42.7,"monthly_change_pct":-2.3,"flops_per_dollar":600.0,"vram_per_dollar":51.2,"cheapest_provider_type":"cloud"},{"gpu_id":"H200","name":"NVIDIA H200 141GB","vendor":"NVIDIA","vram_gb":141,"arch":"Hopper","tier":"flagship","cheapest_price":3.29,"cheapest_provider":"Lambda","most_expensive":4.62,"avg_price":4.03,"num_providers":5,"price_spread_pct":40.4,"monthly_change_pct":-1.0,"flops_per_dollar":300.8,"vram_per_dollar":42.9,"cheapest_provider_type":"cloud"},{"gpu_id":"V100","name":"NVIDIA V100 16GB","vendor":"NVIDIA","vram_gb":16,"arch":"Volta","tier":"legacy","cheapest_price":2.48,"cheapest_provider":"GCP","most_expensive":3.06,"avg_price":2.87,"num_providers":3,"price_spread_pct":23.4,"monthly_change_pct":-0.7,"flops_per_dollar":50.4,"vram_per_dollar":6.5,"cheapest_provider_type":"cloud"},{"gpu_id":"H100-SXM","name":"NVIDIA H100 SXM 80GB","vendor":"NVIDIA","vram_gb":80,"arch":"Hopper","tier":"flagship","cheapest_price":2.15,"cheapest_provider":"Vast.ai","most_expensive":4.28,"avg_price":3.0,"num_providers":10,"price_spread_pct":99.1,"monthly_change_pct":-0.9,"flops_per_dollar":460.2,"vram_per_dollar":37.2,"cheapest_provider_type":"marketplace"},{"gpu_id":"H100-PCIe","name":"NVIDIA H100 PCIe 80GB","vendor":"NVIDIA","vram_gb":80,"arch":"Hopper","tier":"flagship","cheapest_price":1.95,"cheapest_provider":"Vast.ai","most_expensive":2.39,"avg_price":2.13,"num_providers":3,"price_spread_pct":22.6,"monthly_change_pct":-2.1,"flops_per_dollar":387.7,"vram_per_dollar":41.0,"cheapest_provider_type":"marketplace"},{"gpu_id":"MI300X","name":"AMD MI300X 192GB","vendor":"AMD","vram_gb":192,"arch":"CDNA 3","tier":"flagship","cheapest_price":1.85,"cheapest_provider":"Vast.ai","most_expensive":3.15,"avg_price":2.32,"num_providers":4,"price_spread_pct":70.3,"monthly_change_pct":-2.6,"flops_per_dollar":706.5,"vram_per_dollar":103.8,"cheapest_provider_type":"marketplace"},{"gpu_id":"A100-80GB","name":"NVIDIA A100 80GB","vendor":"NVIDIA","vram_gb":80,"arch":"Ampere","tier":"high","cheapest_price":1.1,"cheapest_provider":"Vast.ai","most_expensive":2.52,"avg_price":1.71,"num_providers":9,"price_spread_pct":129.1,"monthly_change_pct":-0.8,"flops_per_dollar":283.6,"vram_per_dollar":72.7,"cheapest_provider_type":"marketplace"},{"gpu_id":"MI250X","name":"AMD MI250X 128GB","vendor":"AMD","vram_gb":128,"arch":"CDNA 2","tier":"high","cheapest_price":0.85,"cheapest_provider":"Vast.ai","most_expensive":0.95,"avg_price":0.9,"num_providers":2,"price_spread_pct":11.8,"monthly_change_pct":-2.4,"flops_per_dollar":450.6,"vram_per_dollar":150.6,"cheapest_provider_type":"marketplace"},{"gpu_id":"L40S","name":"NVIDIA L40S 48GB","vendor":"NVIDIA","vram_gb":48,"arch":"Ada Lovelace","tier":"mid","cheapest_price":0.79,"cheapest_provider":"Vast.ai","most_expensive":1.14,"avg_price":1.0,"num_providers":7,"price_spread_pct":44.3,"monthly_change_pct":-1.1,"flops_per_dollar":463.3,"vram_per_dollar":60.8,"cheapest_provider_type":"marketplace"},{"gpu_id":"A100-40GB","name":"NVIDIA A100 40GB","vendor":"NVIDIA","vram_gb":40,"arch":"Ampere","tier":"high","cheapest_price":0.7,"cheapest_provider":"Vast.ai","most_expensive":2.1,"avg_price":1.29,"num_providers":9,"price_spread_pct":200.0,"monthly_change_pct":-1.3,"flops_per_dollar":445.7,"vram_per_dollar":57.1,"cheapest_provider_type":"marketplace"},{"gpu_id":"RTX-5090","name":"NVIDIA RTX 5090 32GB","vendor":"NVIDIA","vram_gb":32,"arch":"Blackwell","tier":"consumer","cheapest_price":0.55,"cheapest_provider":"Vast.ai","most_expensive":0.59,"avg_price":0.57,"num_providers":2,"price_spread_pct":7.3,"monthly_change_pct":-1.7,"flops_per_dollar":380.9,"vram_per_dollar":58.2,"cheapest_provider_type":"marketplace"},{"gpu_id":"A10G","name":"NVIDIA A10G 24GB","vendor":"NVIDIA","vram_gb":24,"arch":"Ampere","tier":"mid","cheapest_price":0.49,"cheapest_provider":"RunPod","most_expensive":1.01,"avg_price":0.75,"num_providers":6,"price_spread_pct":105.3,"monthly_change_pct":-1.3,"flops_per_dollar":142.9,"vram_per_dollar":49.0,"cheapest_provider_type":"marketplace"},{"gpu_id":"RTX-4090","name":"NVIDIA RTX 4090 24GB","vendor":"NVIDIA","vram_gb":24,"arch":"Ada Lovelace","tier":"consumer","cheapest_price":0.35,"cheapest_provider":"Vast.ai","most_expensive":0.74,"avg_price":0.59,"num_providers":3,"price_spread_pct":111.4,"monthly_change_pct":-2.8,"flops_per_dollar":942.9,"vram_per_dollar":68.6,"cheapest_provider_type":"marketplace"}],"specs":{"B200":{"name":"NVIDIA B200 192GB","vendor":"NVIDIA","vram_gb":192,"arch":"Blackwell","fp16_tflops":2250,"fp32_tflops":75,"tdp_watts":1000,"interconnect":"NVLink 5.0","release_year":2025,"msrp_usd":40000,"tier":"flagship"},"GB200":{"name":"NVIDIA GB200 NVL72","vendor":"NVIDIA","vram_gb":384,"arch":"Blackwell","fp16_tflops":4500,"fp32_tflops":150,"tdp_watts":2700,"interconnect":"NVLink 5.0","release_year":2025,"msrp_usd":70000,"tier":"ultra"},"RTX-5090":{"name":"NVIDIA RTX 5090 32GB","vendor":"NVIDIA","vram_gb":32,"arch":"Blackwell","fp16_tflops":209.5,"fp32_tflops":104.8,"tdp_watts":575,"interconnect":"PCIe 5.0","release_year":2025,"msrp_usd":1999,"tier":"consumer"},"H200":{"name":"NVIDIA H200 141GB","vendor":"NVIDIA","vram_gb":141,"arch":"Hopper","fp16_tflops":989.5,"fp32_tflops":67,"tdp_watts":700,"interconnect":"NVLink 4.0","release_year":2024,"msrp_usd":35000,"tier":"flagship"},"H100-SXM":{"name":"NVIDIA H100 SXM 80GB","vendor":"NVIDIA","vram_gb":80,"arch":"Hopper","fp16_tflops":989.5,"fp32_tflops":67,"tdp_watts":700,"interconnect":"NVLink 4.0","release_year":2023,"msrp_usd":30000,"tier":"flagship"},"H100-PCIe":{"name":"NVIDIA H100 PCIe 80GB","vendor":"NVIDIA","vram_gb":80,"arch":"Hopper","fp16_tflops":756,"fp32_tflops":51,"tdp_watts":350,"interconnect":"PCIe 5.0","release_year":2023,"msrp_usd":25000,"tier":"flagship"},"A100-80GB":{"name":"NVIDIA A100 80GB","vendor":"NVIDIA","vram_gb":80,"arch":"Ampere","fp16_tflops":312,"fp32_tflops":19.5,"tdp_watts":400,"interconnect":"NVLink 3.0","release_year":2021,"msrp_usd":15000,"tier":"high"},"A100-40GB":{"name":"NVIDIA A100 40GB","vendor":"NVIDIA","vram_gb":40,"arch":"Ampere","fp16_tflops":312,"fp32_tflops":19.5,"tdp_watts":400,"interconnect":"NVLink 3.0","release_year":2020,"msrp_usd":10000,"tier":"high"},"A10G":{"name":"NVIDIA A10G 24GB","vendor":"NVIDIA","vram_gb":24,"arch":"Ampere","fp16_tflops":70,"fp32_tflops":35,"tdp_watts":300,"interconnect":"PCIe 4.0","release_year":2021,"msrp_usd":3500,"tier":"mid"},"L40S":{"name":"NVIDIA L40S 48GB","vendor":"NVIDIA","vram_gb":48,"arch":"Ada Lovelace","fp16_tflops":366,"fp32_tflops":91.6,"tdp_watts":300,"interconnect":"PCIe 4.0","release_year":2023,"msrp_usd":8000,"tier":"mid"},"RTX-4090":{"name":"NVIDIA RTX 4090 24GB","vendor":"NVIDIA","vram_gb":24,"arch":"Ada Lovelace","fp16_tflops":330,"fp32_tflops":82.6,"tdp_watts":450,"interconnect":"PCIe 4.0","release_year":2022,"msrp_usd":1599,"tier":"consumer"},"V100":{"name":"NVIDIA V100 16GB","vendor":"NVIDIA","vram_gb":16,"arch":"Volta","fp16_tflops":125,"fp32_tflops":15.7,"tdp_watts":300,"interconnect":"NVLink 2.0","release_year":2017,"msrp_usd":8000,"tier":"legacy"},"MI300X":{"name":"AMD MI300X 192GB","vendor":"AMD","vram_gb":192,"arch":"CDNA 3","fp16_tflops":1307,"fp32_tflops":163.4,"tdp_watts":750,"interconnect":"Infinity Fabric","release_year":2024,"msrp_usd":15000,"tier":"flagship"},"MI325X":{"name":"AMD MI325X 256GB","vendor":"AMD","vram_gb":256,"arch":"CDNA 3","fp16_tflops":1307.4,"fp32_tflops":163.4,"tdp_watts":1000,"interconnect":"Infinity Fabric","release_year":2025,"msrp_usd":20000,"tier":"flagship"},"MI250X":{"name":"AMD MI250X 128GB","vendor":"AMD","vram_gb":128,"arch":"CDNA 2","fp16_tflops":383,"fp32_tflops":47.9,"tdp_watts":500,"interconnect":"Infinity Fabric","release_year":2022,"msrp_usd":12000,"tier":"high"},"MI210":{"name":"AMD MI210 64GB","vendor":"AMD","vram_gb":64,"arch":"CDNA 2","fp16_tflops":181,"fp32_tflops":23,"tdp_watts":300,"interconnect":"Infinity Fabric","release_year":2022,"msrp_usd":7500,"tier":"mid"}},"providers":{"AWS":{"provider_name":"Amazon Web Services","gpus":{"B200":{"instance":"p6.48xlarge","gpus_per_instance":8,"price_per_gpu_hr":5.12,"regions":{"us-east-1":5.12,"us-east-2":5.12,"us-west-2":5.12,"eu-west-1":5.63,"eu-central-1":5.84,"ap-northeast-1":6.14,"ap-southeast-1":5.99}},"H100-SXM":{"instance":"p5.48xlarge","gpus_per_instance":8,"price_per_gpu_hr":4.15,"regions":{"us-east-1":4.15,"us-east-2":4.15,"us-west-2":4.15,"eu-west-1":4.56,"eu-central-1":4.73,"ap-northeast-1":5.02,"ap-southeast-1":4.89}},"A100-80GB":{"instance":"p4de.24xlarge","gpus_per_instance":8,"price_per_gpu_hr":2.49,"regions":{"us-east-1":2.49,"us-east-2":2.49,"us-west-2":2.49,"eu-west-1":2.74,"eu-central-1":2.84,"ap-northeast-1":3.01,"ap-southeast-1":2.93}},"A100-40GB":{"instance":"p4d.24xlarge","gpus_per_instance":8,"price_per_gpu_hr":1.97,"regions":{"us-east-1":1.97,"us-east-2":1.97,"us-west-2":1.97,"eu-west-1":2.17,"eu-central-1":2.25,"ap-northeast-1":2.38,"ap-southeast-1":2.32}},"A10G":{"instance":"g5.xlarge","gpus_per_instance":1,"price_per_gpu_hr":1.006,"regions":{"us-east-1":1.006,"us-east-2":1.006,"us-west-2":1.006,"eu-west-1":1.11,"eu-central-1":1.15,"ap-northeast-1":1.22,"ap-southeast-1":1.18}},"H200":{"instance":"p5e.48xlarge","gpus_per_instance":8,"price_per_gpu_hr":4.49,"regions":{"us-east-1":4.49,"us-east-2":4.49,"us-west-2":4.49,"eu-west-1":4.94,"eu-central-1":5.12,"ap-northeast-1":5.39}},"L40S":{"instance":"g6e.xlarge","gpus_per_instance":1,"price_per_gpu_hr":1.05,"regions":{"us-east-1":1.05,"us-east-2":1.05,"us-west-2":1.05,"eu-west-1":1.16,"eu-central-1":1.2,"ap-northeast-1":1.26}},"V100":{"instance":"p3.2xlarge","gpus_per_instance":1,"price_per_gpu_hr":3.06,"regions":{"us-east-1":3.06,"us-east-2":3.06,"us-west-2":3.06,"eu-west-1":3.37,"eu-central-1":3.49}}},"spot_discount":0.6,"reserved_1yr_discount":0.4,"reserved_3yr_discount":0.6,"type":"cloud"},"GCP":{"provider_name":"Google Cloud Platform","gpus":{"B200":{"instance":"a3-ultragpu-8g","gpus_per_instance":8,"price_per_gpu_hr":4.85,"regions":{"us-central1":4.85,"us-east4":4.85,"us-west1":4.85,"europe-west4":5.34,"europe-west1":5.28,"asia-east1":5.58,"asia-northeast1":5.67}},"H100-SXM":{"instance":"a3-highgpu-8g","gpus_per_instance":8,"price_per_gpu_hr":3.92,"regions":{"us-central1":3.92,"us-east4":3.92,"us-west1":3.92,"europe-west4":4.31,"europe-west1":4.27,"asia-east1":4.51,"asia-northeast1":4.59}},"A100-80GB":{"instance":"a2-ultragpu-8g","gpus_per_instance":8,"price_per_gpu_hr":2.35,"regions":{"us-central1":2.35,"us-east4":2.35,"us-west1":2.35,"europe-west4":2.59,"europe-west1":2.56,"asia-east1":2.7,"asia-northeast1":2.75}},"A100-40GB":{"instance":"a2-highgpu-8g","gpus_per_instance":8,"price_per_gpu_hr":1.84,"regions":{"us-central1":1.84,"us-east4":1.84,"us-west1":1.84,"europe-west4":2.02,"europe-west1":2.0,"asia-east1":2.12,"asia-northeast1":2.15}},"V100":{"instance":"n1-standard-8+V100","gpus_per_instance":1,"price_per_gpu_hr":2.48,"regions":{"us-central1":2.48,"us-east4":2.48,"us-west1":2.48,"europe-west4":2.73}},"H200":{"instance":"a3-megagpu-8g","gpus_per_instance":8,"price_per_gpu_hr":4.25,"regions":{"us-central1":4.25,"us-east4":4.25,"us-west1":4.25,"europe-west4":4.68,"europe-west1":4.63,"asia-east1":4.89}},"L40S":{"instance":"g2-standard-4","gpus_per_instance":1,"price_per_gpu_hr":0.98,"regions":{"us-central1":0.98,"us-east4":0.98,"us-west1":0.98,"europe-west4":1.08,"europe-west1":1.07,"asia-east1":1.13}},"A10G":{"instance":"g2-standard-4","gpus_per_instance":1,"price_per_gpu_hr":0.78,"regions":{"us-central1":0.78,"us-east4":0.78,"us-west1":0.78,"europe-west4":0.86,"europe-west1":0.85,"asia-east1":0.9}}},"spot_discount":0.65,"reserved_1yr_discount":0.37,"reserved_3yr_discount":0.55,"type":"cloud"},"Azure":{"provider_name":"Microsoft Azure","gpus":{"B200":{"instance":"ND_B200_v6","gpus_per_instance":8,"price_per_gpu_hr":5.35,"regions":{"eastus":5.35,"eastus2":5.35,"westus2":5.35,"westeurope":5.89,"northeurope":5.82,"japaneast":6.42,"southeastasia":6.24}},"H100-SXM":{"instance":"ND96isr_H100_v5","gpus_per_instance":8,"price_per_gpu_hr":4.28,"regions":{"eastus":4.28,"eastus2":4.28,"westus2":4.28,"westus3":4.28,"westeurope":4.71,"northeurope":4.66,"japaneast":5.14,"southeastasia":4.99}},"MI300X":{"instance":"ND96isr_MI300X_v5","gpus_per_instance":8,"price_per_gpu_hr":3.15,"regions":{"eastus":3.15,"eastus2":3.15,"westus2":3.15,"westeurope":3.47,"southeastasia":3.68}},"A100-80GB":{"instance":"ND96amsr_A100_v4","gpus_per_instance":8,"price_per_gpu_hr":2.52,"regions":{"eastus":2.52,"eastus2":2.52,"westus2":2.52,"westeurope":2.77,"northeurope":2.74,"japaneast":3.03,"southeastasia":2.94}},"A10G":{"instance":"NV36ads_A10_v5","gpus_per_instance":1,"price_per_gpu_hr":0.91,"regions":{"eastus":0.91,"eastus2":0.91,"westus2":0.91,"westeurope":1.0,"northeurope":0.99}},"V100":{"instance":"NC6s_v3","gpus_per_instance":1,"price_per_gpu_hr":3.06,"regions":{"eastus":3.06,"eastus2":3.06,"westus2":3.06,"westeurope":3.37}},"H200":{"instance":"ND96isr_H200_v5","gpus_per_instance":8,"price_per_gpu_hr":4.62,"regions":{"eastus":4.62,"eastus2":4.62,"westus2":4.62,"westeurope":5.08,"northeurope":5.03,"japaneast":5.55,"southeastasia":5.39}},"A100-40GB":{"instance":"ND96asr_v4","gpus_per_instance":8,"price_per_gpu_hr":2.1,"regions":{"eastus":2.1,"eastus2":2.1,"westus2":2.1,"westeurope":2.31,"northeurope":2.29,"japaneast":2.52,"southeastasia":2.45}},"L40S":{"instance":"NVads_L40S_v5","gpus_per_instance":1,"price_per_gpu_hr":1.14,"regions":{"eastus":1.14,"eastus2":1.14,"westus2":1.14,"westeurope":1.25,"northeurope":1.24,"japaneast":1.37,"southeastasia":1.33}}},"spot_discount":0.6,"reserved_1yr_discount":0.36,"reserved_3yr_discount":0.56,"type":"cloud"},"Lambda":{"provider_name":"Lambda Labs","gpus":{"B200":{"instance":"gpu_8x_b200","gpus_per_instance":8,"price_per_gpu_hr":3.99,"regions":{"us-west-1":3.99,"us-south-1":3.99}},"H200":{"instance":"gpu_8x_h200","gpus_per_instance":8,"price_per_gpu_hr":3.29,"regions":{"us-west-1":3.29,"us-south-1":3.29}},"H100-SXM":{"instance":"gpu_8x_h100_sxm5","gpus_per_instance":8,"price_per_gpu_hr":2.49,"regions":{"us-west-1":2.49,"us-south-1":2.49,"us-east-1":2.49,"europe-central-1":2.79}},"A100-80GB":{"instance":"gpu_8x_a100_80gb_sxm4","gpus_per_instance":8,"price_per_gpu_hr":1.29,"regions":{"us-west-1":1.29,"us-south-1":1.29,"us-east-1":1.29}},"A100-40GB":{"instance":"gpu_8x_a100","gpus_per_instance":8,"price_per_gpu_hr":1.1,"regions":{"us-west-1":1.1,"us-south-1":1.1}},"A10G":{"instance":"gpu_1x_a10","gpus_per_instance":1,"price_per_gpu_hr":0.6,"regions":{"us-west-1":0.6,"us-south-1":0.6}}},"spot_discount":0.0,"reserved_1yr_discount":0.2,"reserved_3yr_discount":0.35,"type":"cloud"},"CoreWeave":{"provider_name":"CoreWeave","gpus":{"B200":{"instance":"b200-sxm-192gb","gpus_per_instance":1,"price_per_gpu_hr":3.75,"regions":{"LAS1":3.75,"ORD1":3.75}},"H200":{"instance":"h200-sxm-141gb","gpus_per_instance":1,"price_per_gpu_hr":3.49,"regions":{"LAS1":3.49,"ORD1":3.49}},"H100-SXM":{"instance":"h100-sxm-80gb","gpus_per_instance":1,"price_per_gpu_hr":2.23,"regions":{"LAS1":2.23,"ORD1":2.23,"LGA1":2.23}},"H100-PCIe":{"instance":"h100-pcie-80gb","gpus_per_instance":1,"price_per_gpu_hr":2.06,"regions":{"LAS1":2.06,"ORD1":2.06}},"A100-80GB":{"instance":"a100-sxm-80gb","gpus_per_instance":1,"price_per_gpu_hr":1.28,"regions":{"LAS1":1.28,"ORD1":1.28,"LGA1":1.28}},"A100-40GB":{"instance":"a100-pcie-40gb","gpus_per_instance":1,"price_per_gpu_hr":0.76,"regions":{"LAS1":0.76,"ORD1":0.76}},"L40S":{"instance":"l40s-48gb","gpus_per_instance":1,"price_per_gpu_hr":1.14,"regions":{"LAS1":1.14,"ORD1":1.14}},"RTX-4090":{"instance":"rtx-4090-24gb","gpus_per_instance":1,"price_per_gpu_hr":0.74,"regions":{"LAS1":0.74,"ORD1":0.74}}},"spot_discount":0.5,"reserved_1yr_discount":0.25,"reserved_3yr_discount":0.45,"type":"cloud"},"RunPod":{"provider_name":"RunPod","gpus":{"H100-SXM":{"instance":"h100-sxm","gpus_per_instance":1,"price_per_gpu_hr":2.69,"regions":{"US":2.69,"EU":2.89}},"H100-PCIe":{"instance":"h100-pcie","gpus_per_instance":1,"price_per_gpu_hr":2.39,"regions":{"US":2.39,"EU":2.59}},"MI300X":{"instance":"mi300x","gpus_per_instance":1,"price_per_gpu_hr":2.19,"regions":{"US":2.19,"EU":2.39}},"A100-80GB":{"instance":"a100-80gb","gpus_per_instance":1,"price_per_gpu_hr":1.64,"regions":{"US":1.64,"EU":1.79}},"A100-40GB":{"instance":"a100-40gb","gpus_per_instance":1,"price_per_gpu_hr":1.04,"regions":{"US":1.04,"EU":1.14}},"L40S":{"instance":"l40s","gpus_per_instance":1,"price_per_gpu_hr":0.99,"regions":{"US":0.99}},"RTX-4090":{"instance":"rtx4090","gpus_per_instance":1,"price_per_gpu_hr":0.69,"regions":{"US":0.69,"EU":0.74}},"A10G":{"instance":"a10g","gpus_per_instance":1,"price_per_gpu_hr":0.49,"regions":{"US":0.49}},"RTX-5090":{"instance":"rtx5090.1gpu","gpus_per_instance":1,"price_per_gpu_hr":0.59,"regions":{"us-east":0.59,"us-west":0.59,"eu-central":0.65}}},"spot_discount":0.4,"reserved_1yr_discount":0.15,"reserved_3yr_discount":0.3,"type":"marketplace"},"Vast.ai":{"provider_name":"Vast.ai (Marketplace)","gpus":{"H100-SXM":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":2.15,"regions":{"US":2.15,"EU":2.35,"APAC":2.5}},"H100-PCIe":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":1.95,"regions":{"US":1.95,"EU":2.1}},"MI300X":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":1.85,"regions":{"US":1.85,"EU":2.05}},"A100-80GB":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":1.1,"regions":{"US":1.1,"EU":1.25,"APAC":1.35}},"A100-40GB":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":0.7,"regions":{"US":0.7,"EU":0.8}},"MI250X":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":0.85,"regions":{"US":0.85,"EU":0.95}},"RTX-4090":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":0.35,"regions":{"US":0.35,"EU":0.4,"APAC":0.45}},"L40S":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":0.79,"regions":{"US":0.79,"EU":0.89}},"RTX-5090":{"instance":"community","gpus_per_instance":1,"price_per_gpu_hr":0.55,"regions":{"US":0.55,"EU":0.65}}},"spot_discount":0.0,"reserved_1yr_discount":0.0,"reserved_3yr_discount":0.0,"type":"marketplace"},"FluidStack":{"provider_name":"FluidStack","gpus":{"H100-SXM":{"instance":"h100_sxm","gpus_per_instance":1,"price_per_gpu_hr":2.45,"regions":{"US":2.45,"EU":2.69,"APAC":2.85}},"MI300X":{"instance":"mi300x","gpus_per_instance":1,"price_per_gpu_hr":2.1,"regions":{"US":2.1,"EU":2.3}},"A100-80GB":{"instance":"a100_80gb","gpus_per_instance":1,"price_per_gpu_hr":1.2,"regions":{"US":1.2,"EU":1.35}},"A100-40GB":{"instance":"a100_40gb","gpus_per_instance":1,"price_per_gpu_hr":0.8,"regions":{"US":0.8}},"L40S":{"instance":"l40s","gpus_per_instance":1,"price_per_gpu_hr":0.89,"regions":{"US":0.89}},"MI250X":{"instance":"mi250x.1gpu","gpus_per_instance":1,"price_per_gpu_hr":0.95,"regions":{"us-east":0.95,"us-west":0.95,"eu-central":1.05}}},"spot_discount":0.3,"reserved_1yr_discount":0.2,"reserved_3yr_discount":0.35,"type":"marketplace"},"Oracle":{"provider_name":"Oracle Cloud (OCI)","gpus":{"B200":{"instance":"BM.GPU.B200.8","gpus_per_instance":8,"price_per_gpu_hr":4.25,"regions":{"us-ashburn-1":4.25,"us-phoenix-1":4.25,"uk-london-1":4.68,"eu-frankfurt-1":4.68}},"H100-SXM":{"instance":"BM.GPU.H100.8","gpus_per_instance":8,"price_per_gpu_hr":3.19,"regions":{"us-ashburn-1":3.19,"us-phoenix-1":3.19,"uk-london-1":3.51,"eu-frankfurt-1":3.51,"ap-tokyo-1":3.83}},"A100-40GB":{"instance":"BM.GPU.A100-v2.8","gpus_per_instance":8,"price_per_gpu_hr":1.275,"regions":{"us-ashburn-1":1.275,"us-phoenix-1":1.275,"uk-london-1":1.4,"eu-frankfurt-1":1.4}},"A10G":{"instance":"VM.GPU.A10.1","gpus_per_instance":1,"price_per_gpu_hr":0.7,"regions":{"us-ashburn-1":0.7,"us-phoenix-1":0.7}}},"spot_discount":0.5,"reserved_1yr_discount":0.3,"reserved_3yr_discount":0.5,"type":"cloud"},"Together":{"provider_name":"Together AI","gpus":{"H100-SXM":{"instance":"dedicated","gpus_per_instance":1,"price_per_gpu_hr":2.5,"regions":{"US":2.5}},"A100-80GB":{"instance":"dedicated","gpus_per_instance":1,"price_per_gpu_hr":1.5,"regions":{"US":1.5}}},"spot_discount":0.0,"reserved_1yr_discount":0.25,"reserved_3yr_discount":0.4,"type":"cloud"}},"historical":{"B200":{"2025-01":{"avg":6.2,"min":5.8,"max":7.0,"availability":"scarce"},"2025-02":{"avg":6.0,"min":5.6,"max":6.8,"availability":"scarce"},"2025-03":{"avg":5.8,"min":5.4,"max":6.6,"availability":"scarce"},"2025-04":{"avg":5.6,"min":5.1,"max":6.4,"availability":"scarce"},"2025-05":{"avg":5.4,"min":4.9,"max":6.2,"availability":"limited"},"2025-06":{"avg":5.25,"min":4.7,"max":6.0,"availability":"limited"},"2025-07":{"avg":5.1,"min":4.5,"max":5.8,"availability":"limited"},"2025-08":{"avg":4.95,"min":4.35,"max":5.65,"availability":"limited"},"2025-09":{"avg":4.8,"min":4.2,"max":5.5,"availability":"moderate"},"2025-10":{"avg":4.65,"min":4.05,"max":5.35,"availability":"moderate"},"2025-11":{"avg":4.55,"min":3.95,"max":5.25,"availability":"moderate"},"2025-12":{"avg":4.45,"min":3.85,"max":5.15,"availability":"moderate"},"2026-01":{"avg":4.35,"min":3.75,"max":5.05,"availability":"good"},"2026-02":{"avg":4.25,"min":3.65,"max":4.95,"availability":"good"}},"H100-SXM":{"2023-01":{"avg":4.7,"min":4.0,"max":5.8,"availability":"scarce"},"2023-02":{"avg":4.55,"min":3.9,"max":5.6,"availability":"scarce"},"2023-03":{"avg":4.4,"min":3.8,"max":5.4,"availability":"scarce"},"2023-04":{"avg":4.3,"min":3.65,"max":5.3,"availability":"scarce"},"2023-05":{"avg":4.2,"min":3.55,"max":5.2,"availability":"scarce"},"2023-06":{"avg":4.1,"min":3.45,"max":5.1,"availability":"limited"},"2023-07":{"avg":4.0,"min":3.35,"max":4.95,"availability":"limited"},"2023-08":{"avg":3.9,"min":3.25,"max":4.8,"availability":"limited"},"2023-09":{"avg":3.8,"min":3.15,"max":4.7,"availability":"limited"},"2023-10":{"avg":3.7,"min":3.0,"max":4.6,"availability":"limited"},"2023-11":{"avg":3.6,"min":2.9,"max":4.5,"availability":"limited"},"2023-12":{"avg":3.5,"min":2.85,"max":4.4,"availability":"moderate"},"2024-01":{"avg":3.4,"min":2.75,"max":4.3,"availability":"moderate"},"2024-02":{"avg":3.3,"min":2.65,"max":4.2,"availability":"moderate"},"2024-03":{"avg":3.22,"min":2.55,"max":4.1,"availability":"moderate"},"2024-04":{"avg":3.15,"min":2.48,"max":4.05,"availability":"moderate"},"2024-05":{"avg":3.08,"min":2.42,"max":3.98,"availability":"moderate"},"2024-06":{"avg":3.0,"min":2.35,"max":3.9,"availability":"good"},"2024-07":{"avg":2.92,"min":2.28,"max":3.85,"availability":"good"},"2024-08":{"avg":2.85,"min":2.22,"max":3.78,"availability":"good"},"2024-09":{"avg":2.78,"min":2.18,"max":3.65,"availability":"good"},"2024-10":{"avg":2.7,"min":2.15,"max":3.55,"availability":"good"},"2024-11":{"avg":2.63,"min":2.1,"max":3.48,"availability":"good"},"2024-12":{"avg":2.58,"min":2.05,"max":3.4,"availability":"abundant"},"2025-01":{"avg":2.52,"min":2.02,"max":3.35,"availability":"abundant"},"2025-02":{"avg":2.48,"min":2.0,"max":3.3,"availability":"abundant"},"2025-03":{"avg":2.44,"min":1.97,"max":3.25,"availability":"abundant"},"2025-04":{"avg":2.41,"min":1.94,"max":3.22,"availability":"abundant"},"2025-05":{"avg":2.38,"min":1.92,"max":3.18,"availability":"abundant"},"2025-06":{"avg":2.35,"min":1.9,"max":3.15,"availability":"abundant"},"2025-07":{"avg":2.32,"min":1.88,"max":3.12,"availability":"abundant"},"2025-08":{"avg":2.3,"min":1.86,"max":3.1,"availability":"abundant"},"2025-09":{"avg":2.28,"min":1.85,"max":3.08,"availability":"abundant"},"2025-10":{"avg":2.26,"min":1.83,"max":3.05,"availability":"abundant"},"2025-11":{"avg":2.24,"min":1.81,"max":3.02,"availability":"abundant"},"2025-12":{"avg":2.22,"min":1.8,"max":3.0,"availability":"abundant"},"2026-01":{"avg":2.2,"min":1.78,"max":2.97,"availability":"abundant"},"2026-02":{"avg":2.18,"min":1.75,"max":2.95,"availability":"abundant"}},"H200":{"2024-04":{"avg":5.2,"min":4.7,"max":6.2,"availability":"scarce"},"2024-05":{"avg":5.05,"min":4.55,"max":6.05,"availability":"scarce"},"2024-06":{"avg":4.9,"min":4.4,"max":5.9,"availability":"scarce"},"2024-07":{"avg":4.7,"min":4.1,"max":5.7,"availability":"scarce"},"2024-08":{"avg":4.5,"min":3.9,"max":5.5,"availability":"limited"},"2024-09":{"avg":4.35,"min":3.75,"max":5.3,"availability":"limited"},"2024-10":{"avg":4.15,"min":3.55,"max":5.0,"availability":"limited"},"2024-11":{"avg":4.0,"min":3.4,"max":4.8,"availability":"limited"},"2024-12":{"avg":3.85,"min":3.3,"max":4.6,"availability":"moderate"},"2025-01":{"avg":3.7,"min":3.2,"max":4.45,"availability":"moderate"},"2025-02":{"avg":3.6,"min":3.12,"max":4.35,"availability":"moderate"},"2025-03":{"avg":3.52,"min":3.05,"max":4.25,"availability":"moderate"},"2025-04":{"avg":3.45,"min":2.98,"max":4.15,"availability":"moderate"},"2025-05":{"avg":3.4,"min":2.92,"max":4.08,"availability":"moderate"},"2025-06":{"avg":3.35,"min":2.88,"max":4.0,"availability":"good"},"2025-07":{"avg":3.3,"min":2.84,"max":3.92,"availability":"good"},"2025-08":{"avg":3.25,"min":2.8,"max":3.85,"availability":"good"},"2025-09":{"avg":3.22,"min":2.78,"max":3.8,"availability":"good"},"2025-10":{"avg":3.18,"min":2.74,"max":3.75,"availability":"good"},"2025-11":{"avg":3.15,"min":2.7,"max":3.7,"availability":"good"},"2025-12":{"avg":3.12,"min":2.68,"max":3.66,"availability":"good"},"2026-01":{"avg":3.08,"min":2.65,"max":3.6,"availability":"good"},"2026-02":{"avg":3.05,"min":2.6,"max":3.55,"availability":"good"}},"A100-80GB":{"2022-01":{"avg":3.8,"min":3.2,"max":4.5,"availability":"scarce"},"2022-04":{"avg":3.5,"min":2.9,"max":4.2,"availability":"limited"},"2022-07":{"avg":3.2,"min":2.6,"max":3.9,"availability":"limited"},"2022-10":{"avg":3.0,"min":2.4,"max":3.6,"availability":"moderate"},"2023-01":{"avg":2.8,"min":2.2,"max":3.4,"availability":"moderate"},"2023-02":{"avg":2.72,"min":2.15,"max":3.35,"availability":"moderate"},"2023-03":{"avg":2.65,"min":2.08,"max":3.28,"availability":"moderate"},"2023-04":{"avg":2.55,"min":2.0,"max":3.18,"availability":"good"},"2023-05":{"avg":2.48,"min":1.95,"max":3.1,"availability":"good"},"2023-06":{"avg":2.4,"min":1.88,"max":3.0,"availability":"good"},"2023-07":{"avg":2.3,"min":1.78,"max":2.9,"availability":"good"},"2023-08":{"avg":2.22,"min":1.72,"max":2.82,"availability":"good"},"2023-09":{"avg":2.15,"min":1.68,"max":2.75,"availability":"good"},"2023-10":{"avg":2.08,"min":1.6,"max":2.68,"availability":"good"},"2023-11":{"avg":2.02,"min":1.55,"max":2.62,"availability":"good"},"2023-12":{"avg":1.95,"min":1.48,"max":2.55,"availability":"abundant"},"2024-01":{"avg":1.88,"min":1.4,"max":2.48,"availability":"abundant"},"2024-02":{"avg":1.82,"min":1.35,"max":2.42,"availability":"abundant"},"2024-03":{"avg":1.75,"min":1.3,"max":2.35,"availability":"abundant"},"2024-04":{"avg":1.68,"min":1.25,"max":2.28,"availability":"abundant"},"2024-05":{"avg":1.62,"min":1.22,"max":2.22,"availability":"abundant"},"2024-06":{"avg":1.57,"min":1.18,"max":2.15,"availability":"abundant"},"2024-07":{"avg":1.52,"min":1.14,"max":2.12,"availability":"abundant"},"2024-08":{"avg":1.48,"min":1.1,"max":2.08,"availability":"abundant"},"2024-09":{"avg":1.45,"min":1.08,"max":2.05,"availability":"abundant"},"2024-10":{"avg":1.42,"min":1.06,"max":2.02,"availability":"abundant"},"2024-11":{"avg":1.39,"min":1.04,"max":1.98,"availability":"abundant"},"2024-12":{"avg":1.36,"min":1.02,"max":1.95,"availability":"abundant"},"2025-01":{"avg":1.34,"min":1.0,"max":1.92,"availability":"abundant"},"2025-02":{"avg":1.32,"min":0.98,"max":1.9,"availability":"abundant"},"2025-03":{"avg":1.3,"min":0.97,"max":1.88,"availability":"abundant"},"2025-04":{"avg":1.29,"min":0.96,"max":1.86,"availability":"abundant"},"2025-05":{"avg":1.28,"min":0.95,"max":1.85,"availability":"abundant"},"2025-06":{"avg":1.27,"min":0.94,"max":1.84,"availability":"abundant"},"2025-07":{"avg":1.27,"min":0.93,"max":1.82,"availability":"abundant"},"2025-08":{"avg":1.26,"min":0.92,"max":1.8,"availability":"abundant"},"2025-09":{"avg":1.26,"min":0.91,"max":1.79,"availability":"abundant"},"2025-10":{"avg":1.25,"min":0.9,"max":1.78,"availability":"abundant"},"2025-11":{"avg":1.24,"min":0.89,"max":1.76,"availability":"abundant"},"2025-12":{"avg":1.24,"min":0.88,"max":1.75,"availability":"abundant"},"2026-01":{"avg":1.23,"min":0.87,"max":1.73,"availability":"abundant"},"2026-02":{"avg":1.22,"min":0.85,"max":1.7,"availability":"abundant"}},"A100-40GB":{"2022-01":{"avg":2.5,"min":2.0,"max":3.0,"availability":"limited"},"2022-04":{"avg":2.3,"min":1.8,"max":2.8,"availability":"moderate"},"2022-07":{"avg":2.1,"min":1.6,"max":2.6,"availability":"moderate"},"2022-10":{"avg":1.9,"min":1.4,"max":2.4,"availability":"good"},"2023-01":{"avg":1.7,"min":1.2,"max":2.2,"availability":"good"},"2023-04":{"avg":1.5,"min":1.1,"max":2.0,"availability":"good"},"2023-07":{"avg":1.3,"min":0.9,"max":1.8,"availability":"abundant"},"2023-10":{"avg":1.15,"min":0.8,"max":1.6,"availability":"abundant"},"2024-01":{"avg":1.05,"min":0.7,"max":1.45,"availability":"abundant"},"2024-04":{"avg":0.95,"min":0.65,"max":1.35,"availability":"abundant"},"2024-07":{"avg":0.9,"min":0.6,"max":1.25,"availability":"abundant"},"2024-10":{"avg":0.85,"min":0.58,"max":1.18,"availability":"abundant"},"2025-01":{"avg":0.82,"min":0.55,"max":1.15,"availability":"abundant"},"2025-04":{"avg":0.8,"min":0.53,"max":1.12,"availability":"abundant"},"2025-07":{"avg":0.78,"min":0.52,"max":1.1,"availability":"abundant"},"2025-10":{"avg":0.77,"min":0.5,"max":1.08,"availability":"abundant"},"2026-01":{"avg":0.76,"min":0.49,"max":1.06,"availability":"abundant"},"2026-02":{"avg":0.75,"min":0.48,"max":1.05,"availability":"abundant"}},"MI300X":{"2024-01":{"avg":3.6,"min":3.1,"max":4.3,"availability":"scarce"},"2024-02":{"avg":3.5,"min":3.0,"max":4.2,"availability":"scarce"},"2024-03":{"avg":3.4,"min":2.92,"max":4.1,"availability":"scarce"},"2024-04":{"avg":3.3,"min":2.82,"max":3.95,"availability":"limited"},"2024-05":{"avg":3.2,"min":2.72,"max":3.82,"availability":"limited"},"2024-06":{"avg":3.1,"min":2.65,"max":3.7,"availability":"limited"},"2024-07":{"avg":3.0,"min":2.55,"max":3.58,"availability":"limited"},"2024-08":{"avg":2.9,"min":2.45,"max":3.48,"availability":"moderate"},"2024-09":{"avg":2.82,"min":2.38,"max":3.4,"availability":"moderate"},"2024-10":{"avg":2.72,"min":2.28,"max":3.3,"availability":"moderate"},"2024-11":{"avg":2.62,"min":2.18,"max":3.2,"availability":"moderate"},"2024-12":{"avg":2.52,"min":2.08,"max":3.1,"availability":"moderate"},"2025-01":{"avg":2.45,"min":2.0,"max":3.02,"availability":"good"},"2025-02":{"avg":2.4,"min":1.95,"max":2.98,"availability":"good"},"2025-03":{"avg":2.35,"min":1.9,"max":2.92,"availability":"good"},"2025-04":{"avg":2.3,"min":1.86,"max":2.86,"availability":"good"},"2025-05":{"avg":2.25,"min":1.82,"max":2.8,"availability":"good"},"2025-06":{"avg":2.22,"min":1.8,"max":2.76,"availability":"good"},"2025-07":{"avg":2.18,"min":1.76,"max":2.7,"availability":"good"},"2025-08":{"avg":2.14,"min":1.72,"max":2.65,"availability":"good"},"2025-09":{"avg":2.1,"min":1.7,"max":2.6,"availability":"good"},"2025-10":{"avg":2.06,"min":1.66,"max":2.56,"availability":"good"},"2025-11":{"avg":2.02,"min":1.62,"max":2.52,"availability":"good"},"2025-12":{"avg":1.98,"min":1.58,"max":2.48,"availability":"good"},"2026-01":{"avg":1.95,"min":1.55,"max":2.45,"availability":"good"},"2026-02":{"avg":1.9,"min":1.5,"max":2.4,"availability":"good"}},"MI325X":{"2025-03":{"avg":4.8,"min":4.2,"max":5.6,"availability":"scarce"},"2025-04":{"avg":4.6,"min":4.0,"max":5.4,"availability":"scarce"},"2025-05":{"avg":4.4,"min":3.8,"max":5.2,"availability":"scarce"},"2025-06":{"avg":4.25,"min":3.65,"max":5.05,"availability":"limited"},"2025-07":{"avg":4.1,"min":3.52,"max":4.9,"availability":"limited"},"2025-08":{"avg":3.95,"min":3.4,"max":4.75,"availability":"limited"},"2025-09":{"avg":3.82,"min":3.28,"max":4.6,"availability":"limited"},"2025-10":{"avg":3.7,"min":3.18,"max":4.48,"availability":"moderate"},"2025-11":{"avg":3.6,"min":3.08,"max":4.38,"availability":"moderate"},"2025-12":{"avg":3.5,"min":3.0,"max":4.28,"availability":"moderate"},"2026-01":{"avg":3.4,"min":2.92,"max":4.18,"availability":"moderate"},"2026-02":{"avg":3.32,"min":2.85,"max":4.1,"availability":"moderate"}},"MI250X":{"2022-07":{"avg":2.8,"min":2.2,"max":3.5,"availability":"limited"},"2022-10":{"avg":2.6,"min":2.0,"max":3.3,"availability":"moderate"},"2023-01":{"avg":2.4,"min":1.8,"max":3.1,"availability":"moderate"},"2023-04":{"avg":2.2,"min":1.65,"max":2.85,"availability":"good"},"2023-07":{"avg":2.0,"min":1.5,"max":2.6,"availability":"good"},"2023-10":{"avg":1.8,"min":1.35,"max":2.4,"availability":"good"},"2024-01":{"avg":1.6,"min":1.2,"max":2.15,"availability":"abundant"},"2024-04":{"avg":1.4,"min":1.05,"max":1.9,"availability":"abundant"},"2024-07":{"avg":1.25,"min":0.95,"max":1.7,"availability":"abundant"},"2024-10":{"avg":1.12,"min":0.85,"max":1.55,"availability":"abundant"},"2025-01":{"avg":1.0,"min":0.78,"max":1.4,"availability":"abundant"},"2025-04":{"avg":0.92,"min":0.72,"max":1.3,"availability":"abundant"},"2025-07":{"avg":0.88,"min":0.68,"max":1.22,"availability":"abundant"},"2025-10":{"avg":0.85,"min":0.65,"max":1.18,"availability":"abundant"},"2026-01":{"avg":0.82,"min":0.62,"max":1.15,"availability":"abundant"},"2026-02":{"avg":0.8,"min":0.6,"max":1.12,"availability":"abundant"}},"RTX-4090":{"2023-01":{"avg":0.82,"min":0.52,"max":1.22,"availability":"moderate"},"2023-04":{"avg":0.76,"min":0.46,"max":1.12,"availability":"good"},"2023-07":{"avg":0.7,"min":0.42,"max":1.02,"availability":"good"},"2023-10":{"avg":0.65,"min":0.38,"max":0.95,"availability":"good"},"2024-01":{"avg":0.6,"min":0.34,"max":0.9,"availability":"abundant"},"2024-04":{"avg":0.55,"min":0.3,"max":0.85,"availability":"abundant"},"2024-07":{"avg":0.5,"min":0.28,"max":0.8,"availability":"abundant"},"2024-10":{"avg":0.46,"min":0.26,"max":0.75,"availability":"abundant"},"2025-01":{"avg":0.43,"min":0.24,"max":0.72,"availability":"abundant"},"2025-04":{"avg":0.4,"min":0.22,"max":0.68,"availability":"abundant"},"2025-07":{"avg":0.38,"min":0.21,"max":0.66,"availability":"abundant"},"2025-10":{"avg":0.37,"min":0.2,"max":0.64,"availability":"abundant"},"2026-01":{"avg":0.36,"min":0.19,"max":0.62,"availability":"abundant"},"2026-02":{"avg":0.35,"min":0.18,"max":0.6,"availability":"abundant"}},"L40S":{"2023-10":{"avg":1.3,"min":1.05,"max":1.6,"availability":"moderate"},"2024-01":{"avg":1.22,"min":0.98,"max":1.5,"availability":"good"},"2024-04":{"avg":1.15,"min":0.92,"max":1.42,"availability":"good"},"2024-07":{"avg":1.08,"min":0.86,"max":1.35,"availability":"abundant"},"2024-10":{"avg":1.02,"min":0.82,"max":1.28,"availability":"abundant"},"2025-01":{"avg":0.98,"min":0.78,"max":1.22,"availability":"abundant"},"2025-04":{"avg":0.95,"min":0.75,"max":1.18,"availability":"abundant"},"2025-07":{"avg":0.92,"min":0.73,"max":1.15,"availability":"abundant"},"2025-10":{"avg":0.9,"min":0.72,"max":1.13,"availability":"abundant"},"2026-01":{"avg":0.88,"min":0.7,"max":1.1,"availability":"abundant"},"2026-02":{"avg":0.87,"min":0.69,"max":1.08,"availability":"abundant"}},"V100":{"2023-09":{"avg":3.2,"min":2.94,"max":3.46,"availability":"good"},"2023-12":{"avg":3.17,"min":2.91,"max":3.42,"availability":"good"},"2024-03":{"avg":3.14,"min":2.89,"max":3.39,"availability":"good"},"2024-06":{"avg":3.1,"min":2.86,"max":3.35,"availability":"good"},"2024-09":{"avg":3.07,"min":2.83,"max":3.32,"availability":"good"},"2024-12":{"avg":3.04,"min":2.8,"max":3.29,"availability":"good"},"2025-03":{"avg":3.01,"min":2.77,"max":3.25,"availability":"good"},"2025-06":{"avg":2.98,"min":2.74,"max":3.22,"availability":"good"},"2025-09":{"avg":2.95,"min":2.72,"max":3.19,"availability":"good"},"2025-12":{"avg":2.92,"min":2.69,"max":3.16,"availability":"good"},"2026-01":{"avg":2.89,"min":2.66,"max":3.13,"availability":"good"},"2026-02":{"avg":2.87,"min":2.64,"max":3.09,"availability":"good"}},"H100-PCIe":{"2023-09":{"avg":2.95,"min":2.66,"max":3.3,"availability":"limited"},"2023-12":{"avg":2.89,"min":2.6,"max":3.24,"availability":"limited"},"2024-03":{"avg":2.83,"min":2.55,"max":3.17,"availability":"limited"},"2024-06":{"avg":2.78,"min":2.5,"max":3.11,"availability":"limited"},"2024-09":{"avg":2.72,"min":2.45,"max":3.05,"availability":"limited"},"2024-12":{"avg":2.67,"min":2.4,"max":2.99,"availability":"limited"},"2025-03":{"avg":2.61,"min":2.35,"max":2.93,"availability":"limited"},"2025-06":{"avg":2.56,"min":2.3,"max":2.87,"availability":"limited"},"2025-09":{"avg":2.51,"min":2.26,"max":2.81,"availability":"limited"},"2025-12":{"avg":2.46,"min":2.21,"max":2.75,"availability":"moderate"},"2026-01":{"avg":2.41,"min":2.17,"max":2.7,"availability":"moderate"},"2026-02":{"avg":2.36,"min":2.13,"max":2.65,"availability":"moderate"}},"RTX-5090":{"2025-09":{"avg":0.62,"min":0.59,"max":0.65,"availability":"limited"},"2025-12":{"avg":0.6,"min":0.57,"max":0.63,"availability":"limited"},"2026-01":{"avg":0.58,"min":0.55,"max":0.61,"availability":"limited"},"2026-02":{"avg":0.57,"min":0.54,"max":0.59,"availability":"limited"}},"A10G":{"2023-06":{"avg":0.95,"min":0.84,"max":1.09,"availability":"abundant"},"2023-09":{"avg":0.94,"min":0.82,"max":1.08,"availability":"abundant"},"2023-12":{"avg":0.92,"min":0.81,"max":1.06,"availability":"abundant"},"2024-03":{"avg":0.91,"min":0.8,"max":1.04,"availability":"abundant"},"2024-06":{"avg":0.89,"min":0.79,"max":1.03,"availability":"abundant"},"2024-09":{"avg":0.88,"min":0.78,"max":1.01,"availability":"abundant"},"2024-12":{"avg":0.87,"min":0.76,"max":1.0,"availability":"abundant"},"2025-03":{"avg":0.85,"min":0.75,"max":0.98,"availability":"abundant"},"2025-06":{"avg":0.84,"min":0.74,"max":0.97,"availability":"abundant"},"2025-09":{"avg":0.83,"min":0.73,"max":0.95,"availability":"abundant"},"2025-12":{"avg":0.82,"min":0.72,"max":0.94,"availability":"abundant"},"2026-01":{"avg":0.8,"min":0.71,"max":0.93,"availability":"abundant"},"2026-02":{"avg":0.79,"min":0.7,"max":0.91,"availability":"abundant"}}},"indicators":{"nvidia_stock":{"ticker":"NVDA","current":138.25,"1m_change":4.2,"3m_change":12.8,"ytd_change":8.5,"52w_high":153.13,"52w_low":75.61},"amd_stock":{"ticker":"AMD","current":119.5,"1m_change":-2.1,"3m_change":5.3,"ytd_change":3.8,"52w_high":164.46,"52w_low":100.55},"gpu_market_size_bn":{"2023":52.4,"2024":71.2,"2025":95.8,"2026_est":128.5,"2027_est":168.3},"ai_capex_bn":{"2023":55,"2024":95,"2025_est":150,"2026_est":210,"2027_est":280},"data_center_gpu_shipments_k":{"2023-Q1":480,"2023-Q2":520,"2023-Q3":610,"2023-Q4":750,"2024-Q1":850,"2024-Q2":920,"2024-Q3":1050,"2024-Q4":1180,"2025-Q1":1320,"2025-Q2":1450,"2025-Q3":1580,"2025-Q4":1700,"2026-Q1":1850},"amd_gpu_market_share_pct":{"2023-01":3,"2023-06":5,"2024-01":8,"2024-06":12,"2025-01":16,"2025-06":19,"2026-01":22},"flagship_lead_time_weeks":{"2023-01":52,"2023-03":46,"2023-06":40,"2023-09":36,"2023-12":28,"2024-03":20,"2024-06":16,"2024-09":12,"2024-12":8,"2025-03":6,"2025-06":4,"2025-09":3,"2025-12":2,"2026-01":1,"2026-02":1}},"regional":{"North America":{"market_share_pct":42.5,"yoy_growth_pct":28.3,"top_providers":["AWS","GCP","Azure","CoreWeave","Lambda"],"gpu_demand_index":95,"key_hubs":["Virginia","Oregon","Texas","California"],"avg_price_premium_pct":0,"energy_cost_kwh":0.065,"regulatory_score":8.5,"data_centers_count":1850,"gpu_pricing":{"H100-SXM":{"avg":2.8,"low":2.15,"high":4.28},"B200":{"avg":4.5,"low":3.75,"high":5.35},"A100-80GB":{"avg":1.55,"low":1.1,"high":2.52},"MI300X":{"avg":2.3,"low":1.85,"high":3.15}},"adoption_trend_monthly":{"2024-01":38.0,"2024-04":39.2,"2024-07":40.1,"2024-10":41.0,"2025-01":41.5,"2025-04":41.8,"2025-07":42.0,"2025-10":42.3,"2026-01":42.5,"2026-02":42.5}},"Europe":{"market_share_pct":22.8,"yoy_growth_pct":32.1,"top_providers":["Azure","GCP","AWS","OVH"],"gpu_demand_index":78,"key_hubs":["Frankfurt","Dublin","Amsterdam","London","Paris"],"avg_price_premium_pct":10,"energy_cost_kwh":0.12,"regulatory_score":7.0,"data_centers_count":920,"gpu_pricing":{"H100-SXM":{"avg":3.5,"low":2.35,"high":4.73},"B200":{"avg":5.4,"low":4.68,"high":5.89},"A100-80GB":{"avg":1.85,"low":1.25,"high":2.84},"MI300X":{"avg":2.75,"low":2.05,"high":3.47}},"adoption_trend_monthly":{"2024-01":19.5,"2024-04":20.2,"2024-07":20.8,"2024-10":21.4,"2025-01":21.8,"2025-04":22.0,"2025-07":22.3,"2025-10":22.5,"2026-01":22.8,"2026-02":22.8}},"Asia Pacific":{"market_share_pct":24.3,"yoy_growth_pct":38.7,"top_providers":["AWS","GCP","Azure","Alibaba","Tencent"],"gpu_demand_index":88,"key_hubs":["Tokyo","Singapore","Mumbai","Sydney","Seoul"],"avg_price_premium_pct":15,"energy_cost_kwh":0.09,"regulatory_score":6.5,"data_centers_count":780,"gpu_pricing":{"H100-SXM":{"avg":3.95,"low":2.5,"high":5.14},"B200":{"avg":5.9,"low":5.58,"high":6.42},"A100-80GB":{"avg":2.1,"low":1.35,"high":3.03},"MI300X":{"avg":2.95,"low":2.4,"high":3.68}},"adoption_trend_monthly":{"2024-01":20.5,"2024-04":21.2,"2024-07":21.8,"2024-10":22.5,"2025-01":23.0,"2025-04":23.4,"2025-07":23.7,"2025-10":24.0,"2026-01":24.3,"2026-02":24.5}},"Middle East & Africa":{"market_share_pct":4.2,"yoy_growth_pct":52.4,"top_providers":["Azure","AWS","Oracle","G42"],"gpu_demand_index":45,"key_hubs":["UAE","Saudi Arabia","South Africa"],"avg_price_premium_pct":20,"energy_cost_kwh":0.04,"regulatory_score":5.0,"data_centers_count":120,"gpu_pricing":{"H100-SXM":{"avg":4.5,"low":3.8,"high":5.5},"A100-80GB":{"avg":2.4,"low":1.8,"high":3.2}},"adoption_trend_monthly":{"2024-01":2.5,"2024-04":2.8,"2024-07":3.1,"2024-10":3.4,"2025-01":3.6,"2025-04":3.8,"2025-07":4.0,"2025-10":4.1,"2026-01":4.2,"2026-02":4.3}},"Latin America":{"market_share_pct":3.8,"yoy_growth_pct":44.2,"top_providers":["AWS","Azure","GCP","Oracle"],"gpu_demand_index":35,"key_hubs":["Sao Paulo","Mexico City","Santiago"],"avg_price_premium_pct":18,"energy_cost_kwh":0.08,"regulatory_score":5.5,"data_centers_count":95,"gpu_pricing":{"H100-SXM":{"avg":4.3,"low":3.6,"high":5.2},"A100-80GB":{"avg":2.25,"low":1.65,"high":3.0}},"adoption_trend_monthly":{"2024-01":2.2,"2024-04":2.5,"2024-07":2.8,"2024-10":3.1,"2025-01":3.3,"2025-04":3.5,"2025-07":3.6,"2025-10":3.7,"2026-01":3.8,"2026-02":3.9}},"China (Domestic)":{"market_share_pct":2.4,"yoy_growth_pct":15.8,"top_providers":["Alibaba","Tencent","Huawei","Baidu"],"gpu_demand_index":72,"key_hubs":["Beijing","Shanghai","Shenzhen","Guizhou"],"avg_price_premium_pct":25,"energy_cost_kwh":0.06,"regulatory_score":4.0,"data_centers_count":450,"gpu_pricing":{"A100-80GB":{"avg":2.8,"low":2.2,"high":3.6},"A100-40GB":{"avg":2.1,"low":1.6,"high":2.8}},"adoption_trend_monthly":{"2024-01":2.8,"2024-04":2.7,"2024-07":2.6,"2024-10":2.5,"2025-01":2.5,"2025-04":2.4,"2025-07":2.4,"2025-10":2.4,"2026-01":2.4,"2026-02":2.4}}},"workloads":{"LLM Training (>70B params)":{"recommended":["B200","H100-SXM","H200"],"min_gpus":64,"budget_monthly_low":150000,"budget_monthly_high":2000000,"best_value":"Lambda B200 cluster"},"LLM Training (7B-70B)":{"recommended":["H100-SXM","A100-80GB","MI300X","B200"],"min_gpus":8,"budget_monthly_low":15000,"budget_monthly_high":200000,"best_value":"CoreWeave H100"},"LLM Fine-tuning":{"recommended":["A100-80GB","MI300X","H100-SXM","L40S"],"min_gpus":1,"budget_monthly_low":1000,"budget_monthly_high":25000,"best_value":"Vast.ai MI300X"},"LLM Inference":{"recommended":["A10G","L40S"],"min_gpus":1,"budget_monthly_low":300,"budget_monthly_high":5000,"best_value":"GCP A10G"},"Image/Video Generation":{"recommended":["RTX-4090","L40S","A100-40GB","MI250X"],"min_gpus":1,"budget_monthly_low":200,"budget_monthly_high":3000,"best_value":"Vast.ai RTX 4090"},"Research / Experimentation":{"recommended":["A10G","RTX-4090","MI250X"],"min_gpus":1,"budget_monthly_low":50,"budget_monthly_high":1000,"best_value":"Vast.ai RTX-4090 spot"}},"tco":{"networking":{"description":"Inter-node networking (InfiniBand/RoCE)","cost_per_gpu_hr":{"H100-SXM":0.35,"B200":0.45,"H200":0.38,"A100-80GB":0.25,"A100-40GB":0.2,"MI300X":0.3,"L40S":0.12,"A10G":0.05,"RTX-4090":0.08,"RTX-5090":0.1,"MI250X":0.22}},"storage":{"description":"NVMe/SSD storage (per GPU allocation)","cost_per_gpu_hr":{"H100-SXM":0.18,"B200":0.22,"H200":0.2,"A100-80GB":0.15,"A100-40GB":0.12,"MI300X":0.16,"L40S":0.08,"A10G":0.04,"RTX-4090":0.05,"RTX-5090":0.06,"MI250X":0.12}},"egress":{"description":"Data egress (avg per GPU-hr at typical workloads)","cost_per_gpu_hr":{"H100-SXM":0.08,"B200":0.1,"H200":0.09,"A100-80GB":0.06,"A100-40GB":0.05,"MI300X":0.07,"L40S":0.04,"A10G":0.02,"RTX-4090":0.03,"RTX-5090":0.03,"MI250X":0.05}},"energy_overhead":{"description":"Energy + cooling beyond GPU TDP (PUE ~1.3)","cost_per_gpu_hr":{"H100-SXM":0.14,"B200":0.2,"H200":0.14,"A100-80GB":0.08,"A100-40GB":0.08,"MI300X":0.15,"L40S":0.07,"A10G":0.03,"RTX-4090":0.09,"RTX-5090":0.12,"MI250X":0.11}},"ops_management":{"description":"Platform/management overhead per GPU-hr","cost_per_gpu_hr":{"H100-SXM":0.1,"B200":0.12,"H200":0.1,"A100-80GB":0.08,"A100-40GB":0.06,"MI300X":0.1,"L40S":0.05,"A10G":0.03,"RTX-4090":0.04,"RTX-5090":0.05,"MI250X":0.06}}},"inference":{"Grok-Code-Fast":{"params_b":70,"type":"Code","category":"Large","rank":1,"gpus":{"H100-SXM":{"tokens_per_sec":105,"cost_per_1m_tokens":0.35,"vram_gb":42},"B200":{"tokens_per_sec":200,"cost_per_1m_tokens":0.2,"vram_gb":42},"A100-80GB":{"tokens_per_sec":58,"cost_per_1m_tokens":0.65,"vram_gb":42}},"providers":{"xAI API":0.2,"OpenRouter":0.2,"Together":0.28}},"Grok-4-Fast":{"params_b":314,"type":"LLM","category":"Frontier","rank":2,"gpus":{"H100-SXM":{"tokens_per_sec":22,"cost_per_1m_tokens":2.8,"vram_gb":280},"B200":{"tokens_per_sec":45,"cost_per_1m_tokens":1.55,"vram_gb":280}},"providers":{"xAI API":0.2,"OpenRouter":0.2}},"Claude-Sonnet-4":{"params_b":175,"type":"LLM","category":"Frontier","rank":3,"gpus":{},"providers":{"Anthropic API":3.0,"OpenRouter":3.0,"AWS Bedrock":3.0,"Google Vertex":3.0,"Azure":3.0}},"Gemini-2.5-Flash":{"params_b":65,"type":"LLM","category":"Large","rank":4,"gpus":{},"providers":{"Google AI Studio":0.15,"Google Vertex":0.3,"OpenRouter":0.3}},"Claude-Sonnet-4.5":{"params_b":175,"type":"LLM","category":"Frontier","rank":5,"gpus":{},"providers":{"Anthropic API":3.0,"OpenRouter":3.0,"AWS Bedrock":3.0,"Google Vertex":3.0,"Azure":3.0}},"DeepSeek-V3.1":{"params_b":671,"type":"LLM","category":"Frontier","rank":6,"gpus":{"H100-SXM":{"tokens_per_sec":38,"cost_per_1m_tokens":1.75,"vram_gb":180},"B200":{"tokens_per_sec":78,"cost_per_1m_tokens":0.9,"vram_gb":180}},"providers":{"DeepSeek API":0.15,"OpenRouter":0.15,"Together":0.75,"Fireworks":0.8,"DeepInfra":0.72}},"GPT-4.1-Mini":{"params_b":70,"type":"LLM","category":"Large","rank":7,"gpus":{},"providers":{"OpenAI API":0.4,"OpenRouter":0.4,"Azure":0.4}},"Gemini-2.0-Flash":{"params_b":50,"type":"LLM","category":"Large","rank":8,"gpus":{},"providers":{"Google AI Studio":0.1,"Google Vertex":0.1,"OpenRouter":0.1}},"Gemini-2.5-Flash-Lite":{"params_b":30,"type":"LLM","category":"Medium","rank":9,"gpus":{},"providers":{"Google AI Studio":0.05,"Google Vertex":0.1,"OpenRouter":0.1}},"DeepSeek-V3":{"params_b":671,"type":"LLM","category":"Frontier","rank":10,"gpus":{"H100-SXM":{"tokens_per_sec":35,"cost_per_1m_tokens":1.85,"vram_gb":180},"B200":{"tokens_per_sec":72,"cost_per_1m_tokens":0.95,"vram_gb":180}},"providers":{"DeepSeek API":0.19,"OpenRouter":0.19,"Together":0.8,"Fireworks":0.87,"DeepInfra":0.78}},"GPT-5":{"params_b":500,"type":"LLM","category":"Frontier","rank":11,"gpus":{},"providers":{"OpenAI API":1.75,"OpenRouter":1.75,"Azure":1.75}},"Gemini-2.5-Pro":{"params_b":175,"type":"LLM","category":"Frontier","rank":12,"gpus":{},"providers":{"Google AI Studio":1.25,"Google Vertex":1.25,"OpenRouter":1.25}},"Qwen3-30B-A3B":{"params_b":30,"type":"LLM","category":"Medium","rank":13,"gpus":{"H100-SXM":{"tokens_per_sec":320,"cost_per_1m_tokens":0.1,"vram_gb":5},"B200":{"tokens_per_sec":580,"cost_per_1m_tokens":0.058,"vram_gb":5},"A100-80GB":{"tokens_per_sec":180,"cost_per_1m_tokens":0.18,"vram_gb":5},"MI300X":{"tokens_per_sec":260,"cost_per_1m_tokens":0.12,"vram_gb":5}},"providers":{"OpenRouter":0.06,"Together":0.08,"Fireworks":0.08,"DeepInfra":0.05,"Groq":0.05}},"Llama-3.3-70B":{"params_b":70,"type":"LLM","category":"Large","rank":14,"gpus":{"H100-SXM":{"tokens_per_sec":100,"cost_per_1m_tokens":0.36,"vram_gb":42},"B200":{"tokens_per_sec":195,"cost_per_1m_tokens":0.21,"vram_gb":42},"H200":{"tokens_per_sec":125,"cost_per_1m_tokens":0.3,"vram_gb":42},"A100-80GB":{"tokens_per_sec":55,"cost_per_1m_tokens":0.68,"vram_gb":42},"MI300X":{"tokens_per_sec":82,"cost_per_1m_tokens":0.45,"vram_gb":42}},"providers":{"OpenRouter":0.1,"Together":0.27,"Fireworks":0.28,"Groq":0.1,"AWS Bedrock":0.45,"Azure":0.42,"DeepInfra":0.28}},"DeepSeek-R1":{"params_b":671,"type":"LLM","category":"Frontier","rank":15,"gpus":{"H100-SXM":{"tokens_per_sec":28,"cost_per_1m_tokens":2.1,"vram_gb":180},"B200":{"tokens_per_sec":58,"cost_per_1m_tokens":1.15,"vram_gb":180}},"providers":{"DeepSeek API":0.4,"OpenRouter":0.4,"Together":1.5,"Fireworks":1.6,"DeepInfra":1.4}},"Qwen3-Coder-480B":{"params_b":480,"type":"Code","category":"Frontier","rank":16,"gpus":{"H100-SXM":{"tokens_per_sec":15,"cost_per_1m_tokens":3.5,"vram_gb":350},"B200":{"tokens_per_sec":32,"cost_per_1m_tokens":1.9,"vram_gb":350}},"providers":{"OpenRouter":0.12,"Together":1.0,"DeepInfra":0.75,"Fireworks":1.1}},"Claude-3.7-Sonnet":{"params_b":175,"type":"LLM","category":"Frontier","rank":17,"gpus":{},"providers":{"Anthropic API":3.0,"OpenRouter":3.0,"AWS Bedrock":3.0,"Google Vertex":3.0,"Azure":3.0}},"GPT-4o-Mini":{"params_b":70,"type":"LLM","category":"Large","rank":18,"gpus":{},"providers":{"OpenAI API":0.15,"OpenRouter":0.15,"Azure":0.15}},"Gemini-2.5-Pro-Preview":{"params_b":175,"type":"LLM","category":"Frontier","rank":19,"gpus":{},"providers":{"Google AI Studio":1.25,"Google Vertex":1.25,"OpenRouter":1.25}},"GPT-5.2":{"params_b":500,"type":"LLM","category":"Frontier","rank":20,"gpus":{},"providers":{"OpenAI API":1.75,"OpenRouter":1.75,"Azure":1.75}}},"spot":{"H100-SXM":{"bid":1.82,"ask":2.05,"spread_pct":11.2,"last_trade":1.95,"24h_low":1.7,"24h_high":2.18,"24h_volume_gpu_hrs":48500,"7d_avg":1.92,"30d_avg":2.01,"volatility_30d":8.5,"available_gpus":2840,"queue_depth":125,"hourly_prices_24h":[1.88,1.85,1.82,1.8,1.78,1.82,1.85,1.9,1.95,2.02,2.08,2.12,2.15,2.18,2.12,2.08,2.05,2.0,1.98,1.95,1.92,1.9,1.88,1.85],"90d_avg":2.25,"volume_90d_avg":32000,"volume_30d_avg":41000,"inventory_90d":1800,"inventory_30d":2300},"B200":{"bid":3.1,"ask":3.55,"spread_pct":12.7,"last_trade":3.35,"24h_low":2.95,"24h_high":3.8,"24h_volume_gpu_hrs":12200,"7d_avg":3.3,"30d_avg":3.48,"volatility_30d":14.2,"available_gpus":680,"queue_depth":310,"hourly_prices_24h":[3.2,3.15,3.1,3.05,3.1,3.18,3.25,3.35,3.45,3.55,3.65,3.75,3.8,3.72,3.6,3.5,3.45,3.4,3.38,3.35,3.3,3.28,3.25,3.2],"90d_avg":4.1,"volume_90d_avg":3500,"volume_30d_avg":7800,"inventory_90d":150,"inventory_30d":380},"H200":{"bid":2.55,"ask":2.85,"spread_pct":10.5,"last_trade":2.72,"24h_low":2.45,"24h_high":3.0,"24h_volume_gpu_hrs":18900,"7d_avg":2.68,"30d_avg":2.78,"volatility_30d":9.8,"available_gpus":1250,"queue_depth":180,"hourly_prices_24h":[2.6,2.58,2.55,2.52,2.55,2.6,2.65,2.72,2.78,2.85,2.92,2.98,3.0,2.95,2.88,2.82,2.78,2.75,2.72,2.7,2.68,2.65,2.62,2.6],"90d_avg":3.15,"volume_90d_avg":8500,"volume_30d_avg":14200,"inventory_90d":520,"inventory_30d":880},"A100-80GB":{"bid":0.85,"ask":1.02,"spread_pct":16.7,"last_trade":0.95,"24h_low":0.8,"24h_high":1.15,"24h_volume_gpu_hrs":92300,"7d_avg":0.93,"30d_avg":0.98,"volatility_30d":12.3,"available_gpus":8500,"queue_depth":45,"hourly_prices_24h":[0.9,0.88,0.86,0.85,0.85,0.87,0.9,0.92,0.95,0.98,1.02,1.05,1.08,1.12,1.15,1.1,1.05,1.02,0.98,0.96,0.94,0.92,0.91,0.9],"90d_avg":1.18,"volume_90d_avg":65000,"volume_30d_avg":78000,"inventory_90d":5200,"inventory_30d":7100},"MI300X":{"bid":1.48,"ask":1.72,"spread_pct":13.9,"last_trade":1.62,"24h_low":1.4,"24h_high":1.85,"24h_volume_gpu_hrs":15600,"7d_avg":1.58,"30d_avg":1.68,"volatility_30d":11.5,"available_gpus":1820,"queue_depth":95,"hourly_prices_24h":[1.52,1.5,1.48,1.46,1.48,1.52,1.56,1.62,1.68,1.72,1.78,1.82,1.85,1.8,1.75,1.72,1.68,1.65,1.62,1.6,1.58,1.55,1.53,1.52],"90d_avg":1.95,"volume_90d_avg":6800,"volume_30d_avg":11500,"inventory_90d":850,"inventory_30d":1350},"RTX-4090":{"bid":0.18,"ask":0.28,"spread_pct":35.7,"last_trade":0.24,"24h_low":0.16,"24h_high":0.35,"24h_volume_gpu_hrs":145000,"7d_avg":0.23,"30d_avg":0.25,"volatility_30d":22.5,"available_gpus":15200,"queue_depth":12,"hourly_prices_24h":[0.22,0.2,0.19,0.18,0.18,0.19,0.21,0.23,0.25,0.27,0.29,0.31,0.33,0.35,0.32,0.3,0.28,0.26,0.25,0.24,0.23,0.22,0.21,0.2],"90d_avg":0.35,"volume_90d_avg":95000,"volume_30d_avg":120000,"inventory_90d":9800,"inventory_30d":12500}},"news":[{"date":"2026-02-17","source":"Motley Fool","headline":"NVIDIA Q4 FY2026 earnings due Feb 25 -- Amazon, Google, Meta, Microsoft capex plans boost NVDA outlook","category":"earnings","sentiment":"bullish","impact":"high"},{"date":"2026-02-14","source":"Motley Fool","headline":"CoreWeave stock jumps 7% ahead of Feb 26 earnings; shares up 34% YTD to $96","category":"market","sentiment":"bullish","impact":"medium"},{"date":"2026-02-12","source":"CNBC","headline":"Anthropic closes $30B Series G at $380B valuation -- annualized revenue hits $14B","category":"demand","sentiment":"bullish","impact":"high"},{"date":"2026-02-12","source":"TechCrunch","headline":"OpenAI releases GPT-5.3-Codex-Spark; Google launches Gemini 3 Deep Think -- GPU demand intensifies","category":"demand","sentiment":"bullish","impact":"high"},{"date":"2026-02-07","source":"Wolf Street","headline":"Big Tech plans $700B in AI capex for 2026: Amazon $200B, Google $185B, Microsoft $145B, Meta $135B","category":"demand","sentiment":"bullish","impact":"high"},{"date":"2026-02-06","source":"CNBC","headline":"Tech AI spending approaches $700B in 2026 as free cash flow takes major hit across hyperscalers","category":"demand","sentiment":"neutral","impact":"high"},{"date":"2026-02-06","source":"Bloomberg","headline":"NVIDIA H200 chip sales to China stalled by US national security review despite Trump approval","category":"policy","sentiment":"negative","impact":"high"},{"date":"2026-02-04","source":"CNBC","headline":"NVIDIA AI chip sales to China remain in limbo -- State Dept pushes for tougher H200 export restrictions","category":"policy","sentiment":"negative","impact":"high"},{"date":"2026-02-01","source":"AI Business 2.0","headline":"TSMC and ASML capacity constraints tighten -- CoWoS advanced packaging sold out through 2026","category":"supply","sentiment":"bearish","impact":"high"},{"date":"2026-01-26","source":"CNBC","headline":"NVIDIA invests $2B in CoreWeave to accelerate AI factory buildout targeting 5GW capacity by 2030","category":"expansion","sentiment":"positive","impact":"high"},{"date":"2026-01-15","source":"Federal Register","headline":"BIS revises AI chip export policy for China: H200 shifts from presumption of denial to case-by-case review","category":"policy","sentiment":"neutral","impact":"high"},{"date":"2026-01-13","source":"TechSpot","headline":"GPU prices up 19% in 3 months -- DRAM crisis and AI demand drive RTX 5090 to 65% above MSRP","category":"pricing","sentiment":"bearish","impact":"medium"},{"date":"2026-01-05","source":"The Register","headline":"AWS raises GPU instance prices 15% -- H200 p5e.48xlarge jumps from $34.61 to $39.80/hr","category":"pricing","sentiment":"bearish","impact":"high"},{"date":"2026-01-05","source":"TrendForce","headline":"NVIDIA and AMD plan phased GPU price hikes in Q1 2026 as HBM memory costs surge","category":"pricing","sentiment":"bearish","impact":"medium"},{"date":"2026-01-05","source":"MIT Tech Review","headline":"AI reasoning models drive insatiable GPU demand -- NVIDIA delays gaming GPUs as AI factories take priority","category":"demand","sentiment":"bullish","impact":"medium"}],"utilization":{"H100-SXM":{"providers":{"AWS":{"avg_utilization_pct":78,"peak_pct":94,"off_peak_pct":52,"idle_cost_per_hr":0.48,"efficiency_score":82,"utilization_trend":[68,71,74,76,78]},"GCP":{"avg_utilization_pct":76,"peak_pct":93,"off_peak_pct":50,"idle_cost_per_hr":0.52,"efficiency_score":80,"utilization_trend":[66,69,72,74,76]},"Azure":{"avg_utilization_pct":74,"peak_pct":92,"off_peak_pct":48,"idle_cost_per_hr":0.55,"efficiency_score":78,"utilization_trend":[64,67,70,72,74]},"Lambda":{"avg_utilization_pct":82,"peak_pct":96,"off_peak_pct":60,"idle_cost_per_hr":0.38,"efficiency_score":87,"utilization_trend":[72,75,78,80,82]},"CoreWeave":{"avg_utilization_pct":84,"peak_pct":97,"off_peak_pct":62,"idle_cost_per_hr":0.35,"efficiency_score":89,"utilization_trend":[74,77,80,82,84]},"RunPod":{"avg_utilization_pct":80,"peak_pct":95,"off_peak_pct":56,"idle_cost_per_hr":0.4,"efficiency_score":85,"utilization_trend":[70,73,76,78,80]},"Vast.ai":{"avg_utilization_pct":71,"peak_pct":90,"off_peak_pct":44,"idle_cost_per_hr":0.32,"efficiency_score":76,"utilization_trend":[61,64,67,69,71]},"FluidStack":{"avg_utilization_pct":69,"peak_pct":88,"off_peak_pct":42,"idle_cost_per_hr":0.3,"efficiency_score":74,"utilization_trend":[59,62,65,67,69]}},"avg_utilization":76.8,"avg_efficiency":81.4,"count":8},"B200":{"providers":{"AWS":{"avg_utilization_pct":85,"peak_pct":97,"off_peak_pct":61,"idle_cost_per_hr":0.72,"efficiency_score":88,"utilization_trend":[72,76,80,83,85]},"GCP":{"avg_utilization_pct":83,"peak_pct":96,"off_peak_pct":58,"idle_cost_per_hr":0.78,"efficiency_score":86,"utilization_trend":[70,74,78,81,83]},"Azure":{"avg_utilization_pct":81,"peak_pct":95,"off_peak_pct":55,"idle_cost_per_hr":0.82,"efficiency_score":84,"utilization_trend":[68,72,76,79,81]},"Lambda":{"avg_utilization_pct":88,"peak_pct":98,"off_peak_pct":68,"idle_cost_per_hr":0.58,"efficiency_score":91,"utilization_trend":[76,80,84,86,88]},"CoreWeave":{"avg_utilization_pct":90,"peak_pct":99,"off_peak_pct":72,"idle_cost_per_hr":0.52,"efficiency_score":93,"utilization_trend":[78,82,86,88,90]},"RunPod":{"avg_utilization_pct":86,"peak_pct":97,"off_peak_pct":64,"idle_cost_per_hr":0.6,"efficiency_score":89,"utilization_trend":[74,78,82,84,86]},"Vast.ai":{"avg_utilization_pct":78,"peak_pct":94,"off_peak_pct":52,"idle_cost_per_hr":0.5,"efficiency_score":82,"utilization_trend":[66,70,74,76,78]},"FluidStack":{"avg_utilization_pct":76,"peak_pct":93,"off_peak_pct":50,"idle_cost_per_hr":0.48,"efficiency_score":80,"utilization_trend":[64,68,72,74,76]}},"avg_utilization":83.4,"avg_efficiency":86.6,"count":8},"A100-80GB":{"providers":{"AWS":{"avg_utilization_pct":65,"peak_pct":88,"off_peak_pct":38,"idle_cost_per_hr":0.42,"efficiency_score":70,"utilization_trend":[75,72,70,67,65]},"GCP":{"avg_utilization_pct":63,"peak_pct":86,"off_peak_pct":36,"idle_cost_per_hr":0.45,"efficiency_score":68,"utilization_trend":[73,70,68,65,63]},"Azure":{"avg_utilization_pct":62,"peak_pct":85,"off_peak_pct":35,"idle_cost_per_hr":0.47,"efficiency_score":67,"utilization_trend":[72,69,67,64,62]},"Lambda":{"avg_utilization_pct":70,"peak_pct":90,"off_peak_pct":42,"idle_cost_per_hr":0.32,"efficiency_score":75,"utilization_trend":[78,76,74,72,70]},"CoreWeave":{"avg_utilization_pct":68,"peak_pct":89,"off_peak_pct":40,"idle_cost_per_hr":0.28,"efficiency_score":73,"utilization_trend":[76,74,72,70,68]},"RunPod":{"avg_utilization_pct":66,"peak_pct":87,"off_peak_pct":38,"idle_cost_per_hr":0.3,"efficiency_score":71,"utilization_trend":[74,72,70,68,66]},"Vast.ai":{"avg_utilization_pct":64,"peak_pct":86,"off_peak_pct":36,"idle_cost_per_hr":0.22,"efficiency_score":69,"utilization_trend":[72,70,68,66,64]},"FluidStack":{"avg_utilization_pct":62,"peak_pct":84,"off_peak_pct":34,"idle_cost_per_hr":0.2,"efficiency_score":67,"utilization_trend":[70,68,66,64,62]}},"avg_utilization":65.0,"avg_efficiency":70.0,"count":8},"MI300X":{"providers":{"AWS":{"avg_utilization_pct":58,"peak_pct":82,"off_peak_pct":30,"idle_cost_per_hr":0.55,"efficiency_score":62,"utilization_trend":[40,45,50,54,58]},"GCP":{"avg_utilization_pct":55,"peak_pct":80,"off_peak_pct":28,"idle_cost_per_hr":0.58,"efficiency_score":59,"utilization_trend":[38,42,47,51,55]},"Azure":{"avg_utilization_pct":60,"peak_pct":84,"off_peak_pct":32,"idle_cost_per_hr":0.52,"efficiency_score":64,"utilization_trend":[42,47,52,56,60]},"Lambda":{"avg_utilization_pct":62,"peak_pct":85,"off_peak_pct":34,"idle_cost_per_hr":0.48,"efficiency_score":66,"utilization_trend":[44,49,54,58,62]},"CoreWeave":{"avg_utilization_pct":64,"peak_pct":86,"off_peak_pct":36,"idle_cost_per_hr":0.44,"efficiency_score":68,"utilization_trend":[46,51,56,60,64]},"RunPod":{"avg_utilization_pct":56,"peak_pct":81,"off_peak_pct":29,"idle_cost_per_hr":0.5,"efficiency_score":60,"utilization_trend":[38,43,48,52,56]},"Vast.ai":{"avg_utilization_pct":50,"peak_pct":76,"off_peak_pct":24,"idle_cost_per_hr":0.42,"efficiency_score":54,"utilization_trend":[34,38,42,46,50]},"FluidStack":{"avg_utilization_pct":48,"peak_pct":74,"off_peak_pct":22,"idle_cost_per_hr":0.4,"efficiency_score":52,"utilization_trend":[32,36,40,44,48]}},"avg_utilization":56.6,"avg_efficiency":60.6,"count":8},"RTX-4090":{"providers":{"RunPod":{"avg_utilization_pct":72,"peak_pct":90,"off_peak_pct":45,"idle_cost_per_hr":0.69,"efficiency_score":71.0,"utilization_trend":[64,67,70,72,74]},"Vast.ai":{"avg_utilization_pct":68,"peak_pct":88,"off_peak_pct":40,"idle_cost_per_hr":0.42,"efficiency_score":68.0,"utilization_trend":[60,63,66,68,70]}},"avg_utilization":70,"avg_efficiency":71.8,"count":2},"A10G":{"providers":{"AWS":{"avg_utilization_pct":50,"peak_pct":75,"off_peak_pct":28,"idle_cost_per_hr":0.72,"efficiency_score":52.0,"utilization_trend":[48,49,50,51,50]},"GCP":{"avg_utilization_pct":48,"peak_pct":72,"off_peak_pct":25,"idle_cost_per_hr":0.76,"efficiency_score":51.0,"utilization_trend":[46,47,48,49,48]}},"avg_utilization":49,"avg_efficiency":48.1,"count":2},"V100":{"providers":{"AWS":{"avg_utilization_pct":35,"peak_pct":60,"off_peak_pct":18,"idle_cost_per_hr":0.7,"efficiency_score":40.0,"utilization_trend":[40,38,36,35,33]},"GCP":{"avg_utilization_pct":32,"peak_pct":55,"off_peak_pct":15,"idle_cost_per_hr":0.76,"efficiency_score":37.0,"utilization_trend":[37,35,33,32,30]}},"avg_utilization":34,"avg_efficiency":21.4,"count":2},"RTX-5090":{"providers":{"RunPod":{"avg_utilization_pct":78,"peak_pct":95,"off_peak_pct":50,"idle_cost_per_hr":0.99,"efficiency_score":76.0,"utilization_trend":[70,73,76,78,80]},"Vast.ai":{"avg_utilization_pct":75,"peak_pct":92,"off_peak_pct":48,"idle_cost_per_hr":0.89,"efficiency_score":74.0,"utilization_trend":[67,70,73,75,77]}},"avg_utilization":76,"avg_efficiency":81.4,"count":2},"H100-PCIe":{"providers":{"CoreWeave":{"avg_utilization_pct":68,"peak_pct":88,"off_peak_pct":42,"idle_cost_per_hr":2.05,"efficiency_score":68.0,"utilization_trend":[60,63,66,68,70]},"RunPod":{"avg_utilization_pct":62,"peak_pct":85,"off_peak_pct":38,"idle_cost_per_hr":1.89,"efficiency_score":63.0,"utilization_trend":[54,57,60,62,64]}},"avg_utilization":65,"avg_efficiency":62.3,"count":2},"MI250X":{"providers":{"Vast.ai":{"avg_utilization_pct":42,"peak_pct":70,"off_peak_pct":22,"idle_cost_per_hr":0.85,"efficiency_score":46.0,"utilization_trend":[47,45,43,42,40]},"FluidStack":{"avg_utilization_pct":38,"peak_pct":65,"off_peak_pct":18,"idle_cost_per_hr":0.8,"efficiency_score":42.0,"utilization_trend":[43,41,39,38,36]}},"avg_utilization":40,"avg_efficiency":31.0,"count":2},"H200":{"providers":{"AWS":{"avg_utilization_pct":82,"peak_pct":96,"off_peak_pct":58,"idle_cost_per_hr":3.5,"efficiency_score":80.0,"utilization_trend":[74,77,80,82,84]},"GCP":{"avg_utilization_pct":80,"peak_pct":94,"off_peak_pct":55,"idle_cost_per_hr":3.62,"efficiency_score":78.0,"utilization_trend":[72,75,78,80,82]},"Lambda":{"avg_utilization_pct":78,"peak_pct":92,"off_peak_pct":50,"idle_cost_per_hr":3.29,"efficiency_score":76.0,"utilization_trend":[70,73,76,78,80]}},"avg_utilization":80,"avg_efficiency":87.2,"count":3},"A100-40GB":{"providers":{"AWS":{"avg_utilization_pct":55,"peak_pct":80,"off_peak_pct":32,"idle_cost_per_hr":1.1,"efficiency_score":57.0,"utilization_trend":[53,54,55,56,55]},"GCP":{"avg_utilization_pct":52,"peak_pct":78,"off_peak_pct":28,"idle_cost_per_hr":1.19,"efficiency_score":54.0,"utilization_trend":[50,51,52,53,52]}},"avg_utilization":54,"avg_efficiency":45.9,"count":2},"L40S":{"providers":{"AWS":{"avg_utilization_pct":60,"peak_pct":84,"off_peak_pct":35,"idle_cost_per_hr":1.35,"efficiency_score":61.0,"utilization_trend":[58,59,60,61,60]},"CoreWeave":{"avg_utilization_pct":58,"peak_pct":82,"off_peak_pct":32,"idle_cost_per_hr":1.28,"efficiency_score":59.0,"utilization_trend":[56,57,58,59,58]}},"avg_utilization":59,"avg_efficiency":64.4,"count":2}},"reservations":{"H100-SXM":{"on_demand_rate":2.18,"spot_avg_rate":0.98,"reserved_1yr_rate":1.53,"reserved_3yr_rate":0.87,"breakeven_hours_spot":{"vs_on_demand":0,"description":"Spot always cheaper when available"},"breakeven_hours_1yr":{"monthly_hrs":438,"description":"60% utilization to break even on 1yr reserved vs on-demand"},"breakeven_hours_3yr":{"monthly_hrs":292,"description":"40% utilization to break even on 3yr reserved vs on-demand"},"savings_at_utilization":{"40_pct":{"spot":55,"reserved_1yr":-8,"reserved_3yr":22},"60_pct":{"spot":55,"reserved_1yr":12,"reserved_3yr":42},"80_pct":{"spot":55,"reserved_1yr":25,"reserved_3yr":55},"100_pct":{"spot":55,"reserved_1yr":30,"reserved_3yr":60}},"recommended_commitment":{"low_util":{"type":"spot","reason":"Best value under 50% utilization, accept interruption risk"},"medium_util":{"type":"reserved_1yr","reason":"12-25% savings at 60-80% utilization with guaranteed capacity"},"high_util":{"type":"reserved_3yr","reason":"Up to 60% savings at sustained high utilization"}}},"B200":{"on_demand_rate":4.25,"spot_avg_rate":2.12,"reserved_1yr_rate":3.19,"reserved_3yr_rate":1.7,"breakeven_hours_spot":{"vs_on_demand":0,"description":"Spot always cheaper when available"},"breakeven_hours_1yr":{"monthly_hrs":450,"description":"62% utilization to break even"},"breakeven_hours_3yr":{"monthly_hrs":300,"description":"41% utilization to break even"},"savings_at_utilization":{"40_pct":{"spot":50,"reserved_1yr":-10,"reserved_3yr":18},"60_pct":{"spot":50,"reserved_1yr":10,"reserved_3yr":38},"80_pct":{"spot":50,"reserved_1yr":22,"reserved_3yr":52},"100_pct":{"spot":50,"reserved_1yr":25,"reserved_3yr":60}},"recommended_commitment":{"low_util":{"type":"spot","reason":"50% savings, limited availability for B200 spot"},"medium_util":{"type":"reserved_1yr","reason":"Guaranteed Blackwell capacity, moderate savings"},"high_util":{"type":"reserved_3yr","reason":"Lock in next-gen pricing before further demand increases"}}},"A100-80GB":{"on_demand_rate":1.1,"spot_avg_rate":0.4,"reserved_1yr_rate":0.77,"reserved_3yr_rate":0.44,"breakeven_hours_spot":{"vs_on_demand":0,"description":"Spot always cheaper"},"breakeven_hours_1yr":{"monthly_hrs":420,"description":"58% utilization to break even"},"breakeven_hours_3yr":{"monthly_hrs":270,"description":"37% utilization to break even"},"savings_at_utilization":{"40_pct":{"spot":64,"reserved_1yr":-5,"reserved_3yr":28},"60_pct":{"spot":64,"reserved_1yr":15,"reserved_3yr":45},"80_pct":{"spot":64,"reserved_1yr":28,"reserved_3yr":58},"100_pct":{"spot":64,"reserved_1yr":30,"reserved_3yr":60}},"recommended_commitment":{"low_util":{"type":"spot","reason":"Abundant spot availability, 64% savings"},"medium_util":{"type":"spot","reason":"A100 spot is reliable enough for medium workloads"},"high_util":{"type":"reserved_1yr","reason":"Avoid 3yr lock-in on aging hardware"}}},"MI300X":{"on_demand_rate":1.72,"spot_avg_rate":0.69,"reserved_1yr_rate":1.2,"reserved_3yr_rate":0.69,"breakeven_hours_spot":{"vs_on_demand":0,"description":"Spot always cheaper"},"breakeven_hours_1yr":{"monthly_hrs":430,"description":"59% utilization to break even"},"breakeven_hours_3yr":{"monthly_hrs":280,"description":"38% utilization to break even"},"savings_at_utilization":{"40_pct":{"spot":60,"reserved_1yr":-6,"reserved_3yr":25},"60_pct":{"spot":60,"reserved_1yr":13,"reserved_3yr":42},"80_pct":{"spot":60,"reserved_1yr":26,"reserved_3yr":56},"100_pct":{"spot":60,"reserved_1yr":30,"reserved_3yr":60}},"recommended_commitment":{"low_util":{"type":"spot","reason":"Good spot savings, growing AMD availability"},"medium_util":{"type":"reserved_1yr","reason":"Lock in AMD pricing advantage vs NVIDIA"},"high_util":{"type":"reserved_3yr","reason":"Best TCO for AMD-compatible workloads"}}},"H200":{"on_demand_rate":3.5,"spot_avg_rate":1.58,"reserved_1yr_rate":2.45,"reserved_3yr_rate":1.4,"breakeven_hours_spot":{"vs_on_demand":0,"description":"Spot always cheaper"},"breakeven_hours_1yr":{"monthly_hrs":445,"description":"61% utilization to break even"},"breakeven_hours_3yr":{"monthly_hrs":290,"description":"40% utilization to break even"},"savings_at_utilization":{"40_pct":{"spot":55,"reserved_1yr":-9,"reserved_3yr":20},"60_pct":{"spot":55,"reserved_1yr":11,"reserved_3yr":40},"80_pct":{"spot":55,"reserved_1yr":24,"reserved_3yr":54},"100_pct":{"spot":55,"reserved_1yr":30,"reserved_3yr":60}},"recommended_commitment":{"low_util":{"type":"spot","reason":"H200 spot increasingly available"},"medium_util":{"type":"reserved_1yr","reason":"Good bridge GPU before Blackwell ramp"},"high_util":{"type":"reserved_1yr","reason":"Avoid 3yr on transitional hardware"}}},"RTX-4090":{"on_demand_rate":0.22,"spot_avg_rate":0.11,"reserved_1yr_rate":0.15,"reserved_3yr_rate":0.09,"breakeven_hours_spot":{"vs_on_demand":0,"description":"Spot always cheaper"},"breakeven_hours_1yr":{"monthly_hrs":400,"description":"55% utilization to break even"},"breakeven_hours_3yr":{"monthly_hrs":250,"description":"34% utilization to break even"},"savings_at_utilization":{"40_pct":{"spot":50,"reserved_1yr":-3,"reserved_3yr":32},"60_pct":{"spot":50,"reserved_1yr":18,"reserved_3yr":48},"80_pct":{"spot":50,"reserved_1yr":30,"reserved_3yr":58},"100_pct":{"spot":50,"reserved_1yr":32,"reserved_3yr":59}},"recommended_commitment":{"low_util":{"type":"spot","reason":"Consumer GPU spot is very cheap"},"medium_util":{"type":"spot","reason":"Spot reliability high for consumer GPUs"},"high_util":{"type":"reserved_1yr","reason":"Consumer GPUs may phase out, avoid 3yr"}}}},"forecasts":{"H100-SXM":{"current_avg":2.18,"elasticity_coefficient":-0.35,"forecast_3mo":{"low":1.85,"mid":1.95,"high":2.1,"confidence":0.78},"forecast_6mo":{"low":1.55,"mid":1.72,"high":1.95,"confidence":0.65},"forecast_12mo":{"low":1.2,"mid":1.48,"high":1.8,"confidence":0.48},"price_floor":1.1,"supply_signal":"increasing","demand_signal":"stable","pattern_match":"B-curve decline (Blackwell displacement)"},"B200":{"current_avg":4.25,"elasticity_coefficient":-0.18,"forecast_3mo":{"low":3.8,"mid":4.05,"high":4.3,"confidence":0.72},"forecast_6mo":{"low":3.2,"mid":3.6,"high":4.1,"confidence":0.58},"forecast_12mo":{"low":2.5,"mid":3.1,"high":3.8,"confidence":0.42},"price_floor":2.2,"supply_signal":"constrained","demand_signal":"strong","pattern_match":"Early-cycle premium (mirrors H100 2023 trajectory)"},"A100-80GB":{"current_avg":1.1,"elasticity_coefficient":-0.52,"forecast_3mo":{"low":0.88,"mid":0.98,"high":1.08,"confidence":0.82},"forecast_6mo":{"low":0.7,"mid":0.85,"high":1.0,"confidence":0.7},"forecast_12mo":{"low":0.55,"mid":0.72,"high":0.9,"confidence":0.55},"price_floor":0.45,"supply_signal":"surplus","demand_signal":"declining","pattern_match":"Late-cycle depreciation (2-gen behind)"},"H200":{"current_avg":3.5,"elasticity_coefficient":-0.28,"forecast_3mo":{"low":3.05,"mid":3.25,"high":3.5,"confidence":0.75},"forecast_6mo":{"low":2.6,"mid":2.9,"high":3.3,"confidence":0.62},"forecast_12mo":{"low":2.0,"mid":2.45,"high":3.0,"confidence":0.45},"price_floor":1.8,"supply_signal":"increasing","demand_signal":"moderate","pattern_match":"Mid-cycle transition (squeezed by B200 above, H100 below)"},"MI300X":{"current_avg":1.72,"elasticity_coefficient":-0.42,"forecast_3mo":{"low":1.45,"mid":1.58,"high":1.72,"confidence":0.74},"forecast_6mo":{"low":1.2,"mid":1.4,"high":1.65,"confidence":0.6},"forecast_12mo":{"low":0.95,"mid":1.2,"high":1.5,"confidence":0.46},"price_floor":0.8,"supply_signal":"increasing","demand_signal":"growing","pattern_match":"Competitive pressure play (AMD gaining share)"},"RTX-4090":{"current_avg":0.22,"elasticity_coefficient":-0.48,"forecast_3mo":{"low":0.18,"mid":0.2,"high":0.23,"confidence":0.76},"forecast_6mo":{"low":0.14,"mid":0.17,"high":0.22,"confidence":0.62},"forecast_12mo":{"low":0.1,"mid":0.14,"high":0.2,"confidence":0.48},"price_floor":0.08,"supply_signal":"stable","demand_signal":"niche","pattern_match":"Consumer surplus (RTX 5090 launch pressure)"}},"competitive":{"NVIDIA":{"performance_score":95,"ecosystem_maturity":98,"software_compatibility":99,"price_performance_ratio":72,"moat_strength_score":92,"market_share_pct":78,"market_share_trend":[88,86,84,81,78],"key_products":["B200","GB200","H200","H100-SXM"],"strengths":["CUDA ecosystem lock-in","NVLink/NVSwitch interconnect","Dominant software stack","Training performance leadership"],"weaknesses":["Premium pricing","Supply constraints on latest gen","Growing competitive pressure"],"parity_timeline":null},"AMD":{"performance_score":78,"ecosystem_maturity":62,"software_compatibility":58,"price_performance_ratio":88,"moat_strength_score":48,"market_share_pct":22,"market_share_trend":[12,14,16,19,22],"key_products":["MI300X","MI325X","MI350X"],"strengths":["Price/perf advantage","Large HBM capacity","Open ROCm ecosystem","Rapid market share growth"],"weaknesses":["ROCm maturity gap","Limited training adoption","Smaller ecosystem"],"parity_timeline":"2027-Q2 for inference, 2028+ for training"},"Google_TPU":{"performance_score":82,"ecosystem_maturity":75,"software_compatibility":45,"price_performance_ratio":85,"moat_strength_score":55,"market_share_pct":8,"market_share_trend":[5,5,6,7,8],"key_products":["TPU v5p","TPU v5e","TPU v6e (Trillium)"],"strengths":["Vertically integrated (GCP only)","Excellent JAX/TF performance","Competitive pricing","Large-scale training proven"],"weaknesses":["GCP lock-in","No PyTorch native support","Limited availability outside Google"],"parity_timeline":"Niche \u2014 competes in JAX/TF workloads only"},"AWS_Trainium":{"performance_score":68,"ecosystem_maturity":42,"software_compatibility":35,"price_performance_ratio":90,"moat_strength_score":35,"market_share_pct":4,"market_share_trend":[1,2,2,3,4],"key_products":["Trainium2","Inferentia2"],"strengths":["Aggressive pricing","AWS ecosystem integration","Neuron SDK improving","Cost leadership strategy"],"weaknesses":["Limited model compatibility","Early ecosystem","Performance gaps on complex models"],"parity_timeline":"2028+ for broad adoption"},"Intel":{"performance_score":45,"ecosystem_maturity":38,"software_compatibility":40,"price_performance_ratio":65,"moat_strength_score":22,"market_share_pct":2,"market_share_trend":[4,4,3,3,2],"key_products":["Gaudi 3","Gaudi 2"],"strengths":["Competitive Gaudi 3 pricing","x86 ecosystem familiarity","Enterprise relationships"],"weaknesses":["Poor market traction","Software maturity issues","Shrinking share","Strategic uncertainty"],"parity_timeline":"Unlikely to achieve broad parity"}},"sustainability":{"providers":{"AWS":{"regions":{"us-east-1":{"pue":1.1,"carbon_gco2_per_kwh":380,"green_energy_pct":65,"water_usage_l_per_kwh":1.8,"sustainability_score":72},"us-west-2":{"pue":1.08,"carbon_gco2_per_kwh":120,"green_energy_pct":90,"water_usage_l_per_kwh":0.9,"sustainability_score":92},"eu-west-1":{"pue":1.12,"carbon_gco2_per_kwh":280,"green_energy_pct":78,"water_usage_l_per_kwh":1.4,"sustainability_score":80},"eu-north-1":{"pue":1.06,"carbon_gco2_per_kwh":45,"green_energy_pct":98,"water_usage_l_per_kwh":0.3,"sustainability_score":97},"ap-northeast-1":{"pue":1.15,"carbon_gco2_per_kwh":480,"green_energy_pct":35,"water_usage_l_per_kwh":2.2,"sustainability_score":55}},"avg_sustainability_score":79.2,"avg_green_energy_pct":73.2,"avg_pue":1.1,"best_region":"eu-north-1","worst_region":"ap-northeast-1"},"GCP":{"regions":{"us-central1":{"pue":1.08,"carbon_gco2_per_kwh":350,"green_energy_pct":72,"water_usage_l_per_kwh":1.5,"sustainability_score":78},"us-west1":{"pue":1.06,"carbon_gco2_per_kwh":100,"green_energy_pct":95,"water_usage_l_per_kwh":0.7,"sustainability_score":95},"europe-west4":{"pue":1.09,"carbon_gco2_per_kwh":320,"green_energy_pct":80,"water_usage_l_per_kwh":1.3,"sustainability_score":82},"europe-north1":{"pue":1.05,"carbon_gco2_per_kwh":30,"green_energy_pct":99,"water_usage_l_per_kwh":0.2,"sustainability_score":98},"asia-east1":{"pue":1.14,"carbon_gco2_per_kwh":550,"green_energy_pct":28,"water_usage_l_per_kwh":2.5,"sustainability_score":48}},"avg_sustainability_score":80.2,"avg_green_energy_pct":74.8,"avg_pue":1.08,"best_region":"europe-north1","worst_region":"asia-east1"},"Azure":{"regions":{"eastus":{"pue":1.12,"carbon_gco2_per_kwh":390,"green_energy_pct":60,"water_usage_l_per_kwh":1.9,"sustainability_score":68},"westus2":{"pue":1.09,"carbon_gco2_per_kwh":140,"green_energy_pct":88,"water_usage_l_per_kwh":1.0,"sustainability_score":90},"northeurope":{"pue":1.07,"carbon_gco2_per_kwh":60,"green_energy_pct":96,"water_usage_l_per_kwh":0.4,"sustainability_score":96},"westeurope":{"pue":1.1,"carbon_gco2_per_kwh":300,"green_energy_pct":75,"water_usage_l_per_kwh":1.5,"sustainability_score":78},"japaneast":{"pue":1.16,"carbon_gco2_per_kwh":470,"green_energy_pct":38,"water_usage_l_per_kwh":2.1,"sustainability_score":56}},"avg_sustainability_score":77.6,"avg_green_energy_pct":71.4,"avg_pue":1.11,"best_region":"northeurope","worst_region":"japaneast"},"CoreWeave":{"regions":{"us-east":{"pue":1.15,"carbon_gco2_per_kwh":400,"green_energy_pct":55,"water_usage_l_per_kwh":2.0,"sustainability_score":65},"us-west":{"pue":1.1,"carbon_gco2_per_kwh":150,"green_energy_pct":85,"water_usage_l_per_kwh":1.1,"sustainability_score":88},"eu-west":{"pue":1.12,"carbon_gco2_per_kwh":290,"green_energy_pct":76,"water_usage_l_per_kwh":1.5,"sustainability_score":79}},"avg_sustainability_score":77.3,"avg_green_energy_pct":72.0,"avg_pue":1.12,"best_region":"us-west","worst_region":"us-east"},"Lambda":{"regions":{"us-south":{"pue":1.18,"carbon_gco2_per_kwh":420,"green_energy_pct":50,"water_usage_l_per_kwh":2.2,"sustainability_score":60},"us-west":{"pue":1.11,"carbon_gco2_per_kwh":160,"green_energy_pct":82,"water_usage_l_per_kwh":1.2,"sustainability_score":85}},"avg_sustainability_score":72.5,"avg_green_energy_pct":66.0,"avg_pue":1.15,"best_region":"us-west","worst_region":"us-south"}},"gpu_carbon":{"H100-SXM":{"tdp_watts":700,"typical_watts":580,"kwh_per_hour":0.58,"annual_kwh_full_util":5081,"carbon_kg_per_year_us_avg":2032,"carbon_kg_per_year_eu_nordic":228,"water_liters_per_year_us_avg":9146,"embodied_carbon_kg":150},"B200":{"tdp_watts":1000,"typical_watts":820,"kwh_per_hour":0.82,"annual_kwh_full_util":7183,"carbon_kg_per_year_us_avg":2873,"carbon_kg_per_year_eu_nordic":323,"water_liters_per_year_us_avg":12930,"embodied_carbon_kg":200},"A100-80GB":{"tdp_watts":300,"typical_watts":250,"kwh_per_hour":0.25,"annual_kwh_full_util":2190,"carbon_kg_per_year_us_avg":876,"carbon_kg_per_year_eu_nordic":99,"water_liters_per_year_us_avg":3942,"embodied_carbon_kg":100},"MI300X":{"tdp_watts":750,"typical_watts":620,"kwh_per_hour":0.62,"annual_kwh_full_util":5431,"carbon_kg_per_year_us_avg":2172,"carbon_kg_per_year_eu_nordic":244,"water_liters_per_year_us_avg":9776,"embodied_carbon_kg":160},"H200":{"tdp_watts":700,"typical_watts":580,"kwh_per_hour":0.58,"annual_kwh_full_util":5081,"carbon_kg_per_year_us_avg":2032,"carbon_kg_per_year_eu_nordic":228,"water_liters_per_year_us_avg":9146,"embodied_carbon_kg":155},"RTX-4090":{"tdp_watts":450,"typical_watts":370,"kwh_per_hour":0.37,"annual_kwh_full_util":3241,"carbon_kg_per_year_us_avg":1296,"carbon_kg_per_year_eu_nordic":146,"water_liters_per_year_us_avg":5834,"embodied_carbon_kg":80}}},"supplychain":{"vendors":{"NVIDIA":{"supply_risk_score":35,"tsmc_dependency_pct":100,"geopolitical_risk":"medium","lead_time_weeks":1,"lead_time_trend":[52,36,20,8,1],"export_control_impact":"moderate","bottlenecks":["TSMC CoWoS packaging","HBM3e supply (SK Hynix/Samsung)","NVLink switch availability"],"risk_trend":"improving","single_source_components":["CoWoS packaging (TSMC)","NVSwitch (TSMC 4nm)"],"inventory_weeks":6},"AMD":{"supply_risk_score":42,"tsmc_dependency_pct":100,"geopolitical_risk":"medium","lead_time_weeks":3,"lead_time_trend":[24,18,12,6,3],"export_control_impact":"moderate","bottlenecks":["TSMC 5nm/3nm capacity","HBM3 supply allocation","ROCm software readiness"],"risk_trend":"improving","single_source_components":["Advanced packaging (TSMC)","HBM3 (SK Hynix/Micron)"],"inventory_weeks":8},"Google_TPU":{"supply_risk_score":28,"tsmc_dependency_pct":100,"geopolitical_risk":"low","lead_time_weeks":0,"lead_time_trend":[4,3,2,1,0],"export_control_impact":"low","bottlenecks":["TSMC wafer allocation","Internal demand vs cloud availability"],"risk_trend":"stable","single_source_components":["TPU dies (Broadcom design, TSMC fab)"],"inventory_weeks":12},"Intel":{"supply_risk_score":55,"tsmc_dependency_pct":30,"geopolitical_risk":"low","lead_time_weeks":2,"lead_time_trend":[8,6,4,3,2],"export_control_impact":"low","bottlenecks":["Intel Foundry yield issues","Gaudi software ecosystem","Customer confidence"],"risk_trend":"worsening","single_source_components":["Gaudi dies (TSMC 5nm)"],"inventory_weeks":14}},"export_controls":[{"date":"2022-10","regulation":"US CHIPS Act Export Controls","target":"China","impact":"high","affected_gpus":["A100","H100"],"description":"Initial restrictions on advanced AI chips to China"},{"date":"2023-10","regulation":"Updated Export Controls","target":"China + 40 countries","impact":"high","affected_gpus":["A100","H100","MI300X","L40S"],"description":"Closed loopholes, expanded country list, compute density thresholds"},{"date":"2024-01","regulation":"NVIDIA China-specific SKUs","target":"China","impact":"medium","affected_gpus":["H20","L20"],"description":"Compliance variants with reduced specs for China market"},{"date":"2024-09","regulation":"EU AI Act Phase 1","target":"EU","impact":"low","affected_gpus":[],"description":"Risk-based AI regulation, compute reporting requirements for GPAI"},{"date":"2025-03","regulation":"Diffusion Rule (Biden framework)","target":"Global tiers","impact":"high","affected_gpus":["B200","MI300X"],"description":"3-tier country framework for AI chip exports, datacenter caps"},{"date":"2025-07","regulation":"Japan/Netherlands ASML restrictions","target":"China","impact":"medium","affected_gpus":[],"description":"DUV lithography equipment restrictions aligned with US policy"},{"date":"2026-01","regulation":"Proposed Compute Sovereignty Act","target":"US domestic","impact":"medium","affected_gpus":["B200"],"description":"Proposed requirements for domestic AI compute capacity reservations"}]},"modelfit":{"7B":{"models":["Llama-3.1-8B","Mistral-7B","Qwen2.5-7B"],"vram_required_gb":14,"gpus":{"H100-SXM":{"optimal_config":"1x H100","batch_size":256,"throughput_tok_s":450,"cost_per_1m_tokens":0.055,"vram_headroom_pct":82,"fit_score":65,"notes":"Overkill for 7B \u2014 wastes VRAM"},"B200":{"optimal_config":"1x B200","batch_size":512,"throughput_tok_s":680,"cost_per_1m_tokens":0.042,"vram_headroom_pct":93,"fit_score":55,"notes":"Massive overkill, only if bundled"},"A100-80GB":{"optimal_config":"1x A100","batch_size":128,"throughput_tok_s":280,"cost_per_1m_tokens":0.048,"vram_headroom_pct":82,"fit_score":72,"notes":"Good balance for small models"},"MI300X":{"optimal_config":"1x MI300X","batch_size":256,"throughput_tok_s":380,"cost_per_1m_tokens":0.045,"vram_headroom_pct":93,"fit_score":60,"notes":"VRAM overkill, decent throughput"},"RTX-4090":{"optimal_config":"1x RTX-4090","batch_size":64,"throughput_tok_s":140,"cost_per_1m_tokens":0.035,"vram_headroom_pct":42,"fit_score":92,"notes":"Best cost/perf for 7B inference"}}},"13B":{"models":["Llama-3.1-13B","CodeLlama-13B","Qwen2.5-14B"],"vram_required_gb":26,"gpus":{"H100-SXM":{"optimal_config":"1x H100","batch_size":128,"throughput_tok_s":320,"cost_per_1m_tokens":0.078,"vram_headroom_pct":68,"fit_score":75,"notes":"Good balance of speed and cost"},"B200":{"optimal_config":"1x B200","batch_size":256,"throughput_tok_s":480,"cost_per_1m_tokens":0.062,"vram_headroom_pct":86,"fit_score":65,"notes":"Overkill but fast"},"A100-80GB":{"optimal_config":"1x A100","batch_size":64,"throughput_tok_s":195,"cost_per_1m_tokens":0.072,"vram_headroom_pct":68,"fit_score":82,"notes":"Sweet spot for 13B inference"},"MI300X":{"optimal_config":"1x MI300X","batch_size":128,"throughput_tok_s":270,"cost_per_1m_tokens":0.065,"vram_headroom_pct":86,"fit_score":70,"notes":"Good perf, VRAM headroom for batching"},"RTX-4090":{"optimal_config":"2x RTX-4090","batch_size":32,"throughput_tok_s":95,"cost_per_1m_tokens":0.058,"vram_headroom_pct":8,"fit_score":72,"notes":"Best cost/perf if 2-GPU setup acceptable"}}},"70B":{"models":["Llama-3.1-70B","Qwen2.5-72B","Mixtral-8x22B"],"vram_required_gb":140,"gpus":{"H100-SXM":{"optimal_config":"2x H100 (NVLink)","batch_size":64,"throughput_tok_s":95,"cost_per_1m_tokens":0.38,"vram_headroom_pct":14,"fit_score":85,"notes":"Standard config for 70B, good perf"},"B200":{"optimal_config":"1x B200","batch_size":128,"throughput_tok_s":145,"cost_per_1m_tokens":0.28,"vram_headroom_pct":27,"fit_score":92,"notes":"Single GPU! 192GB VRAM fits 70B"},"A100-80GB":{"optimal_config":"2x A100 (NVLink)","batch_size":32,"throughput_tok_s":52,"cost_per_1m_tokens":0.52,"vram_headroom_pct":14,"fit_score":72,"notes":"Viable but slower, tight VRAM"},"MI300X":{"optimal_config":"1x MI300X","batch_size":64,"throughput_tok_s":82,"cost_per_1m_tokens":0.32,"vram_headroom_pct":27,"fit_score":88,"notes":"Single GPU fits 70B, best AMD value"},"H200":{"optimal_config":"2x H200","batch_size":64,"throughput_tok_s":110,"cost_per_1m_tokens":0.42,"vram_headroom_pct":20,"fit_score":80,"notes":"NVLink pair, good throughput"}}},"405B":{"models":["Llama-3.1-405B","DBRX-132B","Falcon-180B"],"vram_required_gb":810,"gpus":{"H100-SXM":{"optimal_config":"8x H100 (DGX)","batch_size":16,"throughput_tok_s":28,"cost_per_1m_tokens":2.8,"vram_headroom_pct":0,"fit_score":70,"notes":"Full DGX node, tight VRAM, needs offloading"},"B200":{"optimal_config":"8x B200 (NVL)","batch_size":64,"throughput_tok_s":65,"cost_per_1m_tokens":1.85,"vram_headroom_pct":47,"fit_score":90,"notes":"1.5TB VRAM, excellent fit for mega-models"},"MI300X":{"optimal_config":"8x MI300X","batch_size":32,"throughput_tok_s":35,"cost_per_1m_tokens":2.2,"vram_headroom_pct":47,"fit_score":78,"notes":"1.5TB HBM, competitive AMD option"},"H200":{"optimal_config":"8x H200","batch_size":16,"throughput_tok_s":32,"cost_per_1m_tokens":2.5,"vram_headroom_pct":10,"fit_score":65,"notes":"Feasible but H100 successor, limited headroom"}}}},"sentiment":{"B200":{"score":82,"adoption":"rising","community_pick":true,"mentions_30d":2450,"reddit_sentiment":0.78,"github_compat_score":74,"hf_models_trained":185,"pros":["Best perf/$ for training","192GB handles 70B+ models","NVLink 5.0 multi-node"],"cons":["Limited spot availability","High min commitment (8-GPU nodes)","Immature tooling vs H100"],"top_use_case":"Large-scale LLM training","ecosystem":"growing"},"H200":{"score":75,"adoption":"rising","community_pick":false,"mentions_30d":1680,"reddit_sentiment":0.71,"github_compat_score":79,"hf_models_trained":120,"pros":["141GB sweet spot for 13B-70B","Drop-in H100 replacement","Strong multi-cloud availability"],"cons":["Squeezed between B200 and H100 on value","Lower TFLOPS/$ than B200","Limited marketplace options"],"top_use_case":"Mid-scale training & fine-tuning","ecosystem":"mature"},"H100-SXM":{"score":88,"adoption":"stable","community_pick":true,"mentions_30d":5200,"reddit_sentiment":0.82,"github_compat_score":97,"hf_models_trained":3400,"pros":["Best ecosystem maturity","Widest provider support (10+)","Abundant spot availability"],"cons":["Hopper generation aging","80GB limits largest models","Being displaced by Blackwell"],"top_use_case":"General-purpose AI training & inference","ecosystem":"mature"},"H100-PCIe":{"score":72,"adoption":"stable","community_pick":false,"mentions_30d":890,"reddit_sentiment":0.68,"github_compat_score":96,"hf_models_trained":620,"pros":["Lower cost than SXM","Fits standard PCIe servers","Good for single-GPU inference"],"cons":["No NVLink (limited multi-GPU)","Lower memory bandwidth than SXM","Few providers"],"top_use_case":"Cost-effective inference","ecosystem":"mature"},"MI300X":{"score":68,"adoption":"rising","community_pick":true,"mentions_30d":1950,"reddit_sentiment":0.64,"github_compat_score":58,"hf_models_trained":95,"pros":["Best TFLOPS/$ in market (706)","192GB HBM3 matches B200","AMD pricing pressure benefits buyers"],"cons":["ROCm ecosystem still behind CUDA","Limited framework support","Debugging tools immature"],"top_use_case":"Cost-optimized training at scale","ecosystem":"growing"},"A100-80GB":{"score":79,"adoption":"declining","community_pick":false,"mentions_30d":2100,"reddit_sentiment":0.72,"github_compat_score":98,"hf_models_trained":8500,"pros":["Widest software compatibility","Abundant and cheap","Battle-tested in production"],"cons":["Ampere generation is aging","Being replaced by H100 in most workloads","Lower perf/$ than newer GPUs"],"top_use_case":"Production inference & legacy training","ecosystem":"mature"},"A100-40GB":{"score":65,"adoption":"declining","community_pick":false,"mentions_30d":980,"reddit_sentiment":0.61,"github_compat_score":98,"hf_models_trained":5200,"pros":["Very affordable","Great for 7B model fine-tuning","Wide provider support"],"cons":["40GB too small for modern LLMs","Being phased out","Low TFLOPS/$"],"top_use_case":"Small model fine-tuning & inference","ecosystem":"mature"},"L40S":{"score":71,"adoption":"rising","community_pick":false,"mentions_30d":1350,"reddit_sentiment":0.69,"github_compat_score":85,"hf_models_trained":210,"pros":["Great inference GPU","48GB VRAM handles most models","Good availability from hyperscalers"],"cons":["Not ideal for training","Lower interconnect bandwidth","Ada Lovelace limited for HPC"],"top_use_case":"Inference & video generation","ecosystem":"growing"},"RTX-4090":{"score":76,"adoption":"stable","community_pick":true,"mentions_30d":3100,"reddit_sentiment":0.8,"github_compat_score":92,"hf_models_trained":1800,"pros":["Cheapest option ($0.35/hr)","Beloved by indie researchers","Great for prototyping"],"cons":["24GB VRAM limits model size","Consumer GPU (no ECC)","Not suitable for production"],"top_use_case":"Research & prototyping","ecosystem":"mature"},"RTX-5090":{"score":62,"adoption":"rising","community_pick":false,"mentions_30d":720,"reddit_sentiment":0.65,"github_compat_score":68,"hf_models_trained":35,"pros":["Best TFLOPS/$ for consumer GPU","32GB VRAM upgrade over 4090","Blackwell architecture"],"cons":["Very limited cloud availability","New \u2014 driver/framework issues","Consumer-grade reliability"],"top_use_case":"Next-gen research & prototyping","ecosystem":"early"},"MI250X":{"score":42,"adoption":"declining","community_pick":false,"mentions_30d":180,"reddit_sentiment":0.45,"github_compat_score":45,"hf_models_trained":40,"pros":["Very affordable AMD option","128GB HBM2e","Good for ROCm experimentation"],"cons":["Outdated CDNA 2 architecture","Poor software ecosystem","Almost no provider support"],"top_use_case":"Budget AMD experimentation","ecosystem":"legacy"},"V100":{"score":38,"adoption":"declining","community_pick":false,"mentions_30d":420,"reddit_sentiment":0.4,"github_compat_score":95,"hf_models_trained":12000,"pros":["Extremely well-documented","Wide legacy support","Still available on hyperscalers"],"cons":["Volta architecture is ancient","16GB unusable for modern LLMs","Terrible perf/$"],"top_use_case":"Legacy workloads only","ecosystem":"legacy"},"A10G":{"score":58,"adoption":"stable","community_pick":false,"mentions_30d":750,"reddit_sentiment":0.55,"github_compat_score":88,"hf_models_trained":450,"pros":["Cheapest inference option on hyperscalers","24GB handles small models","Widely available"],"cons":["Low compute power","24GB not enough for 13B+ models","Being replaced by L40S"],"top_use_case":"Lightweight inference & serving","ecosystem":"mature"}}};</script>
<script>const EMBEDDED_AI = {"summary": {"analysis": "## GPU Compute Market Brief — February 2026\n\n### Market Overview\nThe AI GPU compute market reached **$95.8B** in 2025 and is projected to grow to **$128.5B** in 2026, fueled by an estimated **$210B** in hyperscaler AI capital expenditure. Data center GPU shipments hit **1.85M units** in Q1 2026, up **40% YoY**, signaling sustained infrastructure buildout across all major cloud providers.\n\n### Flagship Transition: Blackwell Takes the Lead\n**NVIDIA's B200** (Blackwell, 192GB HBM3e) is now the primary flagship accelerator, available from **6 providers** at an average of **$4.55/hr** — down **-2.3% MoM** as supply ramps. At **600 TFLOPS/$**, B200 delivers a **30% efficiency gain** over the H100-SXM (460 TFLOPS/$). Current supply remains **constrained** with strong demand, mirroring the H100's early-cycle premium trajectory from 2023. Price forecasts project B200 declining to **$3.10/hr by Q1 2027** as production scales.\n\nThe **H200** (141GB, $3.39/hr avg) occupies the mid-tier, squeezed between B200 adoption above and aggressive H100 price erosion below, declining **-1.0% MoM** with increasing supply.\n\n### Pricing Dynamics & Spot Market\nThe **H100-SXM** has fully normalized — lead times collapsed from **52 weeks** (Jan 2023) to **1 week**, with spot prices trading at **$1.95/hr** (bid $1.82 / ask $2.05). Abundant supply across **10 providers** and the highest 24h volume (**48,500 GPU-hrs**) confirm its transition to a commodity-tier accelerator.\n\n**AMD's MI300X** continues to pressure NVIDIA on value, offering **706.5 TFLOPS/$** — the highest efficiency in the market — at just **$1.85/hr** on Vast.ai. Month-over-month declines of **-2.6%** reflect aggressive AMD pricing to capture share.\n\n### Competitive Landscape\nNVIDIA maintains **~45% market share** but faces mounting pressure. AMD's datacenter GPU share has grown from **12%** (2025) to an estimated **18%** (2026), driven by MI300X's superior price-performance. Google TPU and AWS Trainium remain niche but are gaining traction in captive workloads.\n\n### Regional Outlook\n**North America** (42.5% share, +28.3% YoY) remains the largest market with baseline pricing. **Asia Pacific** (+38.7% YoY) and **Middle East & Africa** (+52.4% YoY) are the fastest-growing regions, though 15-25% regional premiums persist due to energy costs and import friction.\n\n### Key Risks & Signals\n- **[WATCH]** NVIDIA Q4 FY2026 earnings (Feb 25) — CapEx guidance above $700B could tighten B200/H200 availability\n- **[WATCH]** CoWoS advanced packaging capacity sold out through 2026 — potential 10-15% production delays\n- **[BULL]** AI CapEx projected at $210B in 2026 (+40% YoY), sustaining compute demand across all tiers\n- **[BEAR]** H100 oversupply risk accelerating — spot prices forecast to reach $1.48/hr within 12 months\n\n### Actionable Insight\nOrganizations should **lock in B200 reserved capacity now** while early-cycle pricing premiums persist — the Blackwell generation offers the best long-term compute economics for large-scale training. For cost-sensitive inference workloads, **AMD MI300X** at $1.85/hr represents a **27% discount** versus B200 with **18% higher TFLOPS/$** efficiency, making it the strongest value play in the current market.", "type": "quick_summary", "timestamp": "2026-02-23T12:00:00.000000"}, "trends": {"analysis": "\n\n## 1. **Price Trajectory Analysis**  \n- **High-End Tier (B200/H200)**:  \n  - B200 ($3.75–$5.35/hr) down **-2.3% MoM**; H200 ($3.29–$3.49/hr) down **-1.0% MoM**.  \n  - **Inflection Point**: B200 pricing stabilized post-2026-Q1 (historical: $4.55 in 2025-11 → $4.25 in 2026-02).  \n  - TFLOPS/$ ratio: B200 (600 TFLOPS/$) vs. H200 (300.8 TFLOPS/$) → Blackwell efficiency drives value.  \n\n- **Mid-Tier (H100/A100)**:  \n  - H100-SXM ($2.15–$4.28/hr) down **-0.9% MoM**; A100-80GB ($1.10–$2.52/hr) down **-0.8% MoM**.  \n  - Historical H100-SXM pricing: $2.24 (2025-11) → $2.15 (2026-02) → **-4.0% decline YoY**.  \n\n- **Entry-Level (L40S/L4/RTX)**:  \n  - L40S ($0.79–$1.14/hr) down **-1.1% MoM**; RTX 5090 ($0.55/hr) stable (**+0.0% MoM**).  \n  - RTX-4090 historical: $0.38 (2025-07) → $0.35 (2026-02) → **-7.9% decline**.  \n\n- **Key Insight**: Price declines accelerate for GPUs >12 months old; Blackwell adoption slows Hopper depreciation.  \n\n---\n\n## 2. **Supply/Demand Dynamics**  \n- **Lead Time Collapse**: H100 lead time dropped from **52 weeks (2023-Q1)** to **1 week (2026-Q1)** → **oversupply risk**.  \n- **Regional Imbalance**:  \n  - **Asia-Pacific** (+38.7% YoY) and **Europe** (+32.1% YoY) drive 47% of global demand.  \n  - **Middle East/Africa** (+52.4% YoY) shows fastest growth but low demand index (45/100).  \n- **Premium Pricing**: Asia-Pacific charges **+15% premium**; China (domestic) charges **+25% premium** despite 15.8% YoY growth.  \n- **Supply Chain Signal**: Vast.ai dominates 40% of providers for H100/B200/MI300X → centralization risk.  \n\n---\n\n## 3. **Generational Transition Impact**  \n- **Blackwell (B200)**:  \n  - 600 TFLOPS/$ vs. H100’s 460 TFLOPS/$ → **21.7% efficiency gain**.  \n  - B200 adoption (6 providers) accelerates Hopper price erosion (**-0.9% MoM**).  \n- **Hopper (H100)**:  \n  - PCIe variant ($1.95–$2.39/hr) stable (**+0.0% MoM**), SXM variant (-0.9% MoM).  \n  - SXM demand shifts to Blackwell; PCIe persists in edge/affordable workloads.  \n- **Ampere (A100)**:  \n  - 80GB ($1.10–$2.52/hr) down **-1.3% MoM**; 40GB ($0.70–$1.97/hr) down **-1.3% MoM**.  \n  - Ampere now **commodity-tier**; TFLOPS/$ (445.7) lags Blackwell/MI300X.  \n\n---\n\n## 4. **Competitive Landscape**  \n- **AMD MI300X**:  \n  - $1.85–$3.15/hr (cheapest: Vast.ai) → **-2.6% MoM**.  \n  - 706.5 TFLOPS/$ vs. B200’s 600 → **17.7% efficiency edge**.  \n  - Threat to NVIDIA’s mid-tier (A100/H100) with 450.6 TFLOPS/$ (MI250X).  \n- **NVIDIA’s Response**:  \n  - B200/GB200 dominance in high-end (600+ TFLOPS/$) maintains **45% market share**.  \n  - PCIe H100 ($1.95/hr) undercuts MI300X for cost-sensitive workloads.  \n- **Market Share Shift**: AMD’s GPU market share rose from **12% (2025)** to **18% (2026)**.  \n\n---\n\n## 5. **Key Signals to Watch**  \n- **Price Elasticity**: Monitor B200/MI300X price declines as supply scales (current 6 vs. 4 providers).  \n- **Regional Demand Shifts**: Asia-Pacific’s **+38.7% YoY** growth vs. North America’s **+28.3%** → rebalancing.  \n- **AMD Roadmap**: MI325X (expected Q3 2026) could disrupt Blackwell with **800+ TFLOPS/$**.  \n- **Inventory Levels**: H100 oversupply risk (lead time <1 week) → potential price drops of **-5%–10% Q2 2026**.  \n- **Performance/$ Metrics**: TFLOPS/$ ratios (e.g., MI300X vs. B200) will dictate procurement decisions for 2026–2027.  \n\n---  \n**Final Note**: GPU pricing is entering a **post-scarcity phase** (H100 lead time <1 week), but efficiency gains (Blackwell/MI300X) will sustain demand in 2026. Procurement teams must prioritize **performance/$** over raw GPU specs.", "type": "market_trends", "timestamp": "2026-02-17T13:57:37.672883"}, "regional": {"analysis": "\n\n### **Regional GPU Market Opportunity Analysis**  \n**Date: 2026-02-17**  \n\n---\n\n#### **1. Regional Price Arbitrage**  \n**Key Insight**: **North America offers the lowest effective GPU pricing**, while Europe and Asia Pacific face significant premiums due to demand and regulatory friction.  \n\n- **North America**:  \n  - **Cheapest GPUs**: CoreWeave’s B200 ($3.75/hr), Vast.ai’s MI300X ($1.85/hr), and Vast.ai’s H100 PCIe ($1.95/hr).  \n  - **Premium**: 0% (baseline for global pricing).  \n  - **Why?** High provider density (e.g., CoreWeave, Lambda, Vast.ai) and energy-efficient data centers (e.g., Texas wind/solar).  \n\n- **Europe**:  \n  - **Premium**: +10% (prices 10% higher than NA baseline).  \n  - **Example**: Lambda’s H200 ($3.29/hr) would cost ~$3.62/hr with the 10% premium.  \n  - **Why?** Stricter regulations (EU AI Act compliance costs) and higher energy prices.  \n\n- **Asia Pacific**:  \n  - **Premium**: +15% (prices 15% higher than NA baseline).  \n  - **Example**: Vast.ai’s A100-80GB ($1.10/hr) would cost ~$1.27/hr with the 15% premium.  \n  - **Why?** Energy costs (e.g., Japan’s grid instability) and import tariffs on US GPUs.  \n\n- **Emerging Markets (MEA/LA/China)**:  \n  - **Premiums**: +18–25%, but **prices may be offset by lower energy costs** (see Section 4).  \n\n**Recommendation**: Deploy **cost-sensitive workloads in North America** (e.g., training with MI300X at $1.85/hr). Avoid Europe/Asia Pacific unless latency or compliance mandates require it.  \n\n---\n\n#### **2. Emerging Markets**  \n**Fastest-Growing Regions**: **Middle East & Africa (+52.4% YoY)** and **Latin America (+44.2% YoY)**.  \n\n- **Drivers**:  \n  - **Middle East & Africa**:  \n    - Government AI initiatives (e.g., UAE’s $3.5B AI fund).  \n    - Energy subsidies (oil/gas states) reduce TCO for GPU clusters.  \n  - **Latin America**:  \n    - Rising demand for generative AI in Spanish/Portuguese content.  \n    - Brazil’s tax breaks for cloud infrastructure.  \n\n- **Challenges**:  \n  - **Low Demand Index (MEA: 45/100, LA: 35/100)**: Limited provider density (e.g., only 1 provider for MI250X in MEA).  \n  - **Premiums**: +20–25% due to import barriers and currency volatility.  \n\n**Recommendation**: Target **MEA/LA for early-mover advantage**, but prioritize **AI-as-a-Service partnerships** to mitigate infrastructure risks.  \n\n---\n\n#### **3. Regulatory Impact**  \n**EU AI Act** and **China Export Controls** are reshaping pricing and availability.  \n\n- **EU AI Act**:  \n  - **Compliance Costs**: +10–15% premium in Europe (already baked into pricing).  \n  - **Impact**: Forces providers to adopt “high-risk” AI governance frameworks, increasing operational overhead.  \n\n- **China Export Controls**:  \n  - **NVIDIA GPU Restrictions**: Limits access to H100/B200 in China’s domestic market.  \n  - **Shift to AMD/SMI**: China’s domestic players (e.g., SMIC) are adopting AMD MI300X (no export restrictions).  \n  - **Price Effect**: MI300X in China could drop below $1.85/hr as supply chains localize.  \n\n**Recommendation**: In Europe, use **compliance-ready GPUs** (e.g., A100-40GB at $0.70/hr). In China, prioritize **AMD-based infrastructure** to avoid export delays.  \n\n---\n\n#### **4. Energy Cost Impact on TCO**  \nEnergy costs vary by 2–3x globally, significantly affecting GPU TCO.  \n\n| Region          | Avg. Energy Cost (USD/kWh) | GPU TCO Impact (Est.) |  \n|-----------------|----------------------------|------------------------|  \n| **North America** | $0.08–0.12                 | +5–10% over GPU cost   |  \n| **Europe**       | $0.15–0.20                 | +15–25% over GPU cost  |", "type": "regional_analysis", "timestamp": "2026-02-17T13:57:37.673631"}, "investment": {"analysis": "\n\n### **GPU Market Investment Outlook (2026-Q1)**  \n*Prepared for Institutional Decision-Makers*  \n\n---\n\n#### **1. Buy vs. Rent Decision Framework**  \n**Actionable Thresholds for Reserved vs. On-Demand vs. Spot:**  \n- **Reserved Instances (12–36M hours/year):**  \n  - **High-Priority:** H100 PCIe, A100 40GB, L40S (stable pricing, high utilization workloads).  \n  - **Avoid:** B200, H200 (prices still declining 1–2.3% MoM; lock-in risks).  \n- **Spot Instances (Elastic Workloads):**  \n  - **Best For:** A100 80GB, MI250X, L4 (low base prices, high availability).  \n  - **Risks:** RTX 5090, MI300X (limited providers; no spot availability).  \n- **On-Demand (Short-Term Bursting):**  \n  - **Optimize For:** B200 (cheapest at $3.75/hr), H100 SXM ($2.15/hr).  \n  - **Avoid:** V100 (no price erosion; +0% MoM).  \n\n**Rule of Thumb:**  \n- Commit to reserved if utilization >70% for 6+ months.  \n- Use spot for 30–50% of training/inference budgets to hedge against on-demand volatility.  \n\n---\n\n#### **2. Price Floor Analysis**  \n**Projected Bottoming Points (Based on 6–12 MoM Trends):**  \n| GPU | Current Price | Projected Floor (2026-Q4) | Rationale |  \n|------|---------------|---------------------------|-----------|  \n| **B200** | $3.75–$5.35/hr | **$3.00–$4.00/hr** | 2–3% MoM declines to stabilize by Q3 as supply ramps. |  \n| **H100 SXM** | $2.15–$4.28/hr | **$1.80–$2.20/hr** | Lead times normalized; pricing power erodes. |  \n| **MI300X** | $1.85–$3.15/hr | **$1.50–$1.80/hr** | AMD’s cost advantage; 2.6% MoM declines likely to continue. |  \n| **A100 40GB** | $0.70–$1.97/hr | **$0.60–$0.80/hr** | Mature product; minimal further efficiency gains. |  \n| **L4** | $0.70–$0.80/hr | **$0.60–$0.70/hr** | Inference workloads commoditizing. |  \n\n**Key Insight:** AMD’s MI300X ($1.85/hr) and MI250X ($0.85/hr) are already below NVIDIA’s price floors for equivalent TFLOPS, signaling long-term margin compression for NVIDIA.  \n\n---\n\n#### **3. Technology Transition Timing**  \n**Migration Roadmap (ROI-Driven):**  \n- **A100 → H100 (Complete by 2026-Q2):**  \n  - H100 offers **10x TFLOPS/$** over A100 (460.2 vs. 445.7).  \n  - Lead times now 1 week (vs. 52 weeks in 2023); cost parity achieved by Q3.  \n- **H100 → B200 (Delayed to 2026-Q4+):**  \n  - B200 is **33% more efficient** (600 TFLOPS/$ vs. H100’s 460), but current $3.75/hr is 30% above H100.  \n  - **Hold H100 until B200 prices drop below $3.00/hr** (projected Q4).  \n- **Legacy GPUs (V100, RTX 5090):**  \n  - **Exit by 2026-Q3**; TFLOPS/$ lags newer chips by 10x+; no further price declines.  \n\n---\n\n#### **4. Provider Risk Assessment**  \n**Top-Tier Providers (Stability + Cost Efficiency):**  \n- **Vast.ai:**  \n  - **Pros:** Cheapest for H100 PCIe ($1.95/hr), MI250X ($0.85/hr), and L40S ($0.79/hr).  \n  - **Risks:** High concentration in lower-tier GPUs; liquidity risks for large-scale commitments.  \n- **CoreWeave:**  \n  - **Pros:** Cheapest B200 ($3.75/hr); strong balance sheet; 6 providers listed.  \n  - **Risks:** Limited GPU diversity; overexposure to NVIDIA.  \n- **GCP:**  \n  - **Pros:** Stable pricing for L4 ($0.70/hr) and V100 ($2.48/hr).  \n  - **Cons:** Higher premiums in Asia Pacific (15%).  \n\n**Avoid:** Lambda (only 2 H200 providers; limited scalability) and single-provider GPUs (e.g., RTX 5090 on Vast.ai).  \n\n---\n\n#### **5. Budget Planning (Next 4 Quarters)**  \n**Cost Projections by Workload Type:**  \n| Workload | Q1 2026 | Q4 2026 (Est.) | Notes |  \n|----------|---------|----------------|-------|  \n| **Large Model Training (B200/H100)** | $3.75–$2.15/hr | **$3.00–$1.80/hr** | 20–30% savings by Q4. |  \n| **Inference (L40S/L4)** | $0.79–$0.70/hr | **$0.65–$0.60/hr** | Commoditization accelerates. |  \n| **Legacy Workloads (A100/V100)** | $1.10–$2.48/hr | **$0.60–$2.48/hr** | A100 drops 50%; V100 stagnant. |  \n\n**Regional Adjustments:**  \n- **Asia Pacific:** +15% premium; prioritize spot instances to offset.  \n- **Middle East/Africa:** +20% premium; avoid on-demand for non-critical workloads.  \n\n---\n\n#### **6. Alpha Opportunities**  \n**High-Conviction Bets:**  \n- **AMD Arbitrage:** MI300X ($1.85/hr, 706 TFLOPS/$) is **27% cheaper** than B200 for equivalent performance.  \n- **RTX 5090 Underutilization:** $0.55/hr with 1,523 TFLOPS/$ (best price/perf). Ideal for **lightweight inference** or **research workloads** with low memory needs.  \n- **Emerging Markets Premium Capture:** Deploy spot instances in Asia Pacific (38.7% YoY growth) to monetize 15% pricing premiums.  \n- **Upcoming Disruptions:**  \n  - **NVIDIA Blackwell (B200 successor):** Expected Q3 2026; B200 prices may collapse post-launch.  \n  - **AMD Instinct M300:** Potential 2026 release could further pressure NVIDIA’s TFLOPS/$ metrics.  \n\n---\n\n### **Final Investment Thesis**  \n- **Short-Term (2026-Q2):** Over", "type": "investment_outlook", "timestamp": "2026-02-17T13:57:37.673146"}, "notes": {"analysis": "\n\n### **MARKET OUTLOOK (30/60/90 DAY)**  \n- **H100-SXM**: 30D: $2.05–$2.15 (↓1.5%, CL: 75%); 60D: $1.95–$2.05 (↓4.5%, CL: 65%); 90D: $1.85–$1.95 (↓9.5%, CL: 55%) → *Supply glut and hyperscaler efficiency gains cap upside*.  \n- **B200**: 30D: $3.40–$3.65 (↓4.0%, CL: 60%); 60D: $3.10–$3.35 (↓9.0%, CL: 50%); 90D: $2.85–$3.10 (↓15.0%, CL: 40%) → *High TFLOPS/$ ratio vs. MI300X limits declines*.  \n- **A100-80GB**: 30D: $0.80–$0.90 (↓6.0%, CL: 70%); 60D: $0.75–$0.85 (↓11.0%, CL: 60%); 90D: $0.70–$0.80 (↓16.0%, CL: 55%) → *Legacy demand wanes as H100/B200 adoption accelerates*.  \n- **MI300X**: 30D: $1.60–$1.75 (↓8.0%, CL: 65%); 60D: $1.45–$1.60 (↓16.0%, CL: 55%); 90D: $1.30–$1.45 (↓23.0%, CL: 50%) → *Cost-competitiveness vs. NVIDIA drives gradual share gains*.  \n\n---\n\n### **KEY TRADE IDEAS**  \n- **[BUY]** *Spot H100-SXM on Vast.ai* ($1.95/hr) for 30D AI training cycles → *Narrow bid-ask spread (11.2%) and low volatility (8.5%) favor short-term execution*.  \n- **[HOLD]** *Reserved B200 on CoreWeave* ($3.75/hr) for Q2 2026 → *High MoM declines (-2.3%) suggest near-term discounting, but TFLOPS/$ parity with MI300X supports floor*.  \n- **[SELL]** *Spot A100-80GB overcommitments* → *Price erosion (-1.3% MoM) and 16.7% bid-ask spread signal oversupply; rotate to H100/MI300X*.  \n- **[BUY]** *MI300X on Vast.ai* ($1.85/hr) for inference workloads → *706.5 TFLOPS/$ outperforms NVIDIA peers by 55%; 13.9% spread indicates near-term arbitrage*.  \n\n---\n\n### **RISK SIGNALS**  \n- **Upside**: *$700B hyperscaler AI capex* (Amazon, Google, Microsoft) could tighten H100/B200 availability by Q3 2026, reversing 2–3% MoM declines.  \n- **Downside**: *US-China H200 export restrictions* may spill over to B200, delaying Asian-Pacific adoption (24.3% regional share, +38.7% YoY growth).  \n- **Supply Shock**: *CoWoS packaging sold out through 2026* risks 10–15% GPU production delays, amplifying pricing power for V100/H100.  \n\n---\n\n### **SECTOR ROTATION CALL**  \n- **A100 → H100**: 68% of providers now offer H100 (vs. 9 for A100); TFLOPS/$ improves from 283.6 to 460.2.  \n- **H100 → B200**: Early signs of rotation in North America (42.5% share, +28.3% YoY) as B200’s 192GB memory addresses LLM scaling needs.  \n- **NVIDIA → AMD**: MI300X’s 706.5 TFLOPS/$ (+22% vs. B200) and 15% price premium in Asia-Pacific suggest 5–7% market share gains by 2026-Q4.  \n\n---\n\n### **ALPHA OPPORTUNITIES**  \n- **Underpriced Capacity**: *RTX 5090* ($0.55/hr, 1,523 TFLOPS/$) offers 3.4x efficiency vs. L4 (172.9 TFLOPS/$) → *Ideal for niche inference tasks with low memory demands*.  \n- **Arbitrage**: *B200 on CoreWeave* ($3.75/hr) vs. Lambda’s H200 ($3.29/hr) → 144% TFLOPS/$ uplift for +17% premium; hedge with short NVDA futures.  \n- **Timing Trade**: *Pre-buy H100-SXM before NVIDIA Q4 FY2026 earnings (Feb 25)* → Anticipate 5–7% price pop if Amazon/Microsoft capex guidance exceeds $700B.  \n\n---  \n**DISCLOSURE**: This analysis assumes no material regulatory shifts, stable CoWoS capacity, and continuation of current hyperscaler capex trends. Positions should be hedged against regional demand shocks (e.g., China’s 25% premium).", "type": "market_notes", "timestamp": "2026-02-17T13:57:37.673435"}, "efficiency": {"analysis": "\n\n### **1. Utilization Gap Analysis**  \n**Key Wastage Areas**:  \n- **MI300X (56.6% utilization, 60.6/100 efficiency)**: Worst-performing GPU, with FluidStack at 52/100 efficiency.  \n- **A100-80GB (65.0% utilization, 70.0/100 efficiency)**: Suboptimal for modern workloads requiring higher memory (e.g., LLM training).  \n- **T4 (56.1% utilization, 61.1/100 efficiency)**: Underutilized in low-demand regions (e.g., Latin America).  \n- **FluidStack**: Consistently worst provider across all GPUs (e.g., MI300X 52/100, H100 74/100).  \n\n**Cost Impact**:  \n- MI300X waste: $1.85/hr × (100% - 56.6%) = **$0.80/hr wasted per GPU**.  \n- A100-80GB waste: $1.22/hr × (100% - 65%) = **$0.43/hr wasted per GPU**.  \n\n---\n\n### **2. Right-Sizing Recommendations**  \n**Actionable Migrations**:  \n| **Current GPU** | **Recommended Tier** | **Rationale** | **Cost Savings** |  \n|------------------|----------------------|---------------|------------------|  \n| **B200 (192GB)** | H100 PCIe (80GB) | For workloads <80GB memory (e.g., NLP inference). B200 is 600 TFLOPS/$ vs. H100 PCIe’s 388 TFLOPS/$ → **~39% cost savings**. | $3.75 → $1.95/hr = **$1.80/hr saved**. |  \n| **A100-80GB** | H100 PCIe (80GB) | H100 offers 460 TFLOPS/$ vs. A100’s 284 TFLOPS/$ → **~40% better efficiency**. | $1.22 → $1.95/hr = **$0.27/hr saved** (if workload fits 80GB). |  \n| **MI300X (192GB)** | H200 (141GB) | MI300X’s 706 TFLOPS/$ vs. H200’s 300 TFLOPS/$ → **235% better value** for memory-bound tasks. | $1.85 → $3.29/hr = **$1.44/hr saved** (if memory is underutilized). |  \n| **L4 (24GB)** | RTX 5090 (32GB) | RTX 5090 offers 1523 TFLOPS/$ vs. L4’s 172 TFLOPS/$ → **840% better value** for lightweight tasks. | $0.70 → $0.55/hr = **$0.15/hr saved**. |  \n\n**Example**: Migrating 100 A100-80GB instances to H100 PCIe saves **$27/day** ($0.27 × 100 × 24hr).  \n\n---\n\n### **3. Scheduling Optimization**  \n**Strategies to Reduce Idle Costs**:  \n- **Dynamic Off-Peak Scheduling**:  \n  - **CoreWeave’s H100**: 89/100 efficiency. Shift 30% of workloads to off-peak hours (e.g., 2 AM–6 AM) to reduce idle time by 15–20%.  \n  - **Preemptible Instances**: Use spot pricing for non-critical workloads (e.g., MI300X on Vast.ai at $1.85/hr vs. on-demand $3.15/hr → **41% savings**).  \n- **Auto-Scaling**: Implement Kubernetes or Slurm-based auto-scaling to match GPU clusters to real-time demand.  \n\n**Cost Impact**:  \n- Reducing idle time by 20% on 100 H100 instances: $2.15/hr × 20% × 100 × 24hr = **$10,320/month saved**.  \n\n---\n\n### **4. Provider Efficiency Ranking**  \n| **Provider** | **Top GPUs** | **Efficiency Score** | **Why?** |  \n|--------------|--------------|----------------------|----------|  \n| **CoreWeave** | H100, B200, L4 | 89–93/100 | Best-in-class orchestration, low latency, and high cluster density. |  \n| **Lambda** | H200, A100 | 82–85/100 | Strong SLAs and regional redundancy (Europe/Asia). |  \n| **Vast.ai** | H100, MI300X | 78–81/100 | Competitive pricing but inconsistent utilization. |  \n| **FluidStack** | All GPUs | 52–74/100 | Poor scheduling algorithms and high fragmentation. |  \n\n**Recommendation**: Prioritize CoreWeave for compute-heavy workloads and Lambda for hybrid cloud deployments. Avoid FluidStack for critical tasks.  \n\n---\n\n### **5. Cost Savings Estimate**  \n**Scenario**: Optimize 1,000 GPU instances (mix of MI300X, A100, H100, L4) with the above strategies.  \n\n| **Optimization** | **Monthly Savings** |  \n|------------------|---------------------|  \n| Right-sizing (B200→H100, A100→H100) | $1.80 + $0.27 = **$2.07/hr × 1,000 × 24hr = $50,000/month** |  \n| Off-peak scheduling + preemptible use | **$10,320/month** (from H100 idle reduction) + **$4,000/month** (MI300X spot pricing) |  \n| Provider migration (FluidStack→CoreWeave) | 15% utilization improvement × $2.15/hr × 1,000 × 24hr = **$7,740/month** |  \n| **Total Estimated Savings** | **~$72,060/month** (~$864,720/year) |  \n\n---\n\n### **Final Recommendations**  \n1. **Audit GPU tiers**: Replace B200/A100 with H100 PCIe for memory-efficient workloads.  \n2. **Adopt CoreWeave for H100/B200**: Leverage 89–93/100 efficiency.  \n3. **Use spot instances for MI300X**: Save 41% on idle costs.  \n4. **Implement auto-scaling**: Reduce idle time by 20%+ on H100 clusters.  \n\nBy addressing underutilization and right-sizing, organizations can reduce GPU costs by **~35–45%** while maintaining performance.", "type": "efficiency_optimization", "timestamp": "2026-02-17T13:57:58.126891"}, "forecast": {"analysis": "\nOkay, let's tackle this GPU price forecast query. First, I need to go through all the provided data and understand the current market context, historical trends, and the various models given. The user wants a comprehensive analysis with specific sections like price outlook, elasticity, competitive displacement, etc. \n\nStarting with the 30/60/90-day price outlook. The data already has 3mo and 12mo forecasts for each GPU. I need to map these into 30, 60, 90-day targets. For example, the 3mo forecast for H100-SXM is $1.95, so maybe the 30-day is a bit closer to current price, then interpolate for 60 and 90 days. But wait, the models already have 3mo numbers. Maybe the user wants the 30-day as a short-term, 3mo as 90-day? The original models list 3mo and 12mo, so perhaps the 30/60/90 refers to 1mo, 2mo, 3mo? Or maybe the user wants a breakdown into 30, 60, 90 days beyond the existing 3mo. Hmm. The current date is 2026-02-17, and the historical data goes up to 2026-02. The models have 3mo and 12mo forecasts. So for the 30/60/90-day outlook, I can take the existing 3mo as the 90-day target. For the shorter terms, maybe calculate the monthly decline based on the historical MoM changes and the given elasticity. For example, H100-SXM has a 3mo target of $1.95 from current $2.18. The MoM change in the past was -0.9%. If the trend continues, the price would decrease by about 0.9% each month. So from $2.18, after 1 month: 2.18 * 0.991 ≈ $2.16, 2 months: 2.16 * 0.991 ≈ $2.14, 3 months: 2.14 * 0.991 ≈ $2.12. But the model's 3mo forecast is $1.95, which is a bigger drop. So maybe the elasticity and supply/demand factors are causing a steeper decline. The elasticity for H100-SXM is -0.35, meaning a 1% price decrease leads to 0.35% increase in demand. But since the model's 3mo is $1.95, which is a 9.6% decrease from current $2.18. So maybe the decline is faster. I need to check each GPU's model and see if the 3mo target is already given. The user probably wants the 30/60/90-day targets based on the existing 3mo and 12mo forecasts. Maybe the 3mo is the 90-day target, and the 30 and 60 can be interpolated. Alternatively, the user might expect linear interpolation between current price and the 3mo target. For example, for H100-SXM, current $2.18 to $1.95 over 3 months. So per month decrease is (2.18 - 1.95)/3 ≈ $0.077 per month. So 30-day: ~$2.10, 60-day: ~$2.03, 90-day: $1.95. That seems reasonable. I'll need to do this for each GPU, using their 3mo target and current price to calculate the monthly steps.\n\nNext, elasticity analysis. The elasticity values are given for each GPU. The most elastic would be the one with the most negative elasticity, like T4 at -0.60, and the least elastic would be GB200 at -0.10. So I need to list them in order and explain how demand changes affect pricing. For example, T4's price is very sensitive to demand changes, so if demand drops, prices could fall quickly. Conversely, GB200 is less elastic, so even if demand increases, the price doesn't drop as much.\n\nCompetitive displacement: NVIDIA's moat is strong, but AMD and others are gaining share. The models mention things like AMD gaining share with MI300X, and GB200's constrained supply. I need to explain how AMD's increasing supply and better price/perf (like MI300X's higher TFLOPS/$) are putting pressure on NVIDIA's H100/H200 prices. Also, Google and AWS's custom silicon might be taking some market share, but their shares are smaller. NVIDIA's trend is declining, while AMD's is increasing. This competition would lead to NVIDIA having to either lower prices or face losing market share, which is already reflected in the price forecasts.\n\nGenerational crossover points: When does B200 become cheaper than H100 per FLOP? The TFLOPS/$ for B200 is 600, H100 is 460.2. So if the price ratio is such that (B200 price / H100 price) < (B200 TFLOPS / H100 TFLOPS). Let's compute: B200 TFLOPS is 192GB vs H100's 80GB? Wait, the TFLOPS/$ is given. For B200, it's 600 TFLOPS per dollar, H100 is 460.2. So B200 is more efficient. The current price is B200 at $4.25 vs H100 at $2.18. Let's calculate the cost per TFLOP. For B200: $4.25 / 600 = $0.00708 per TFLOP. For H100: $2.18 / 460.2 ≈ $0.00474 per TFLOP. So currently, H100 is cheaper per TFLOP. The crossover point is when B200's cost per TFLOP equals H100's. Let’s set up the equation: (B200 price) / 600 = (H100 price) / 460.2. Solving for B200 price = (H100 price * 600) / 460.2 ≈ H100 price * 1.303. So if B200's price is 1.303 times H100's price, they are equal. Currently, B200 is $4.25 vs H100 $2.18 → 4.25 / 2.18 ≈ 1.949, which is higher than 1.303, so H100 is better. When will B200's price drop to 1.303 * H100 price? Using the forecasts: B200's 3mo target is $4.05, 12mo $3.10. H100's 3mo $1.95, 12mo $1.48. Let's check at 3mo: 4.05 / 1.95 ≈ 2.077 (still higher). At 12mo: 3.10 / 1.48 ≈ 2.095. Wait, that's increasing. Hmm, maybe my calculation is wrong. Wait, the equation is B200 price = 1.303 * H100 price. So if H100 price is $X, B200 needs to be $1.303X. Currently, B200 is $4.25, H100 is $2.18. 1.303 * 2.18 ≈ $2.84. So if B200 drops to $2.84, then it becomes equal. Given B200's 12mo forecast is $3.10, which is higher than $2.84, so even at 12mo, B200 is still more expensive. Wait, but the model says B200's price is decreasing from $4.25 to $3.10. H100 is decreasing from $2.18 to $1.48. Let's compute when B200's price / H100's price equals 1.303. Let’s denote t as time in months. Let’s assume linear decrease for simplicity. For B200: current price P_B = 4.25, target 3mo 4.05, 12mo 3.10. The rate of decrease per month: from 4.25 to 3.10 over 12 months is (4.25 - 3.10)/12 ≈ 0.0958 per month. Similarly for H100: from 2.18 to 1.48 over 12 months is (2.18 - 1.48)/12 ≈ 0.0583 per month. So equations: P_B(t) = 4.25 - 0.0958*t, P_H(t) = 2.18 - 0.0583*t. We need to find t where P_B(t)/P_H(t) = 1.303. Solving: (4.25 - 0.0958t) / (2.18 - 0.0583t) = 1.303. Multiply both sides: 4.25 - 0.0958t = 1.303*(2.18 - 0.0583t). Let's compute RHS: 1.303*2.18 ≈ 2.84, 1.303*(-0.0583t) ≈ -0.076t. So equation becomes: 4.25 - 0.0958t ≈ 2.84 - 0.076t. Rearranging: 4.25 - 2.84 ≈ 0.0958t - 0.076t → 1.41 ≈ 0.0198t → t ≈ 71.2 months. That's over 5 years, which is way beyond the 12mo forecast. So according to this linear model, B200 never becomes cheaper than H100 per TFLOP within the forecast period. But maybe the price decrease isn't linear. The model for B200 is \"Early-cycle premium (mirrors H100 2023 trajectory)\", which might mean a steeper decline later. Alternatively, maybe the elasticity and supply/demand factors cause a non-linear decrease. This might require a different approach. Alternatively, perhaps the TFLOPS/$ for each GPU changes over time as newer models are released. Wait, the TFLOPS/$ is given as a fixed number in the current pricing. But if B200's TFLOPS/$ is higher than H100, then if B200's price drops enough relative to H100, it becomes more cost-effective. However, based on the given forecasts, it seems that even in 12 months, B200 is still more expensive per TFLOP. So maybe the crossover is not expected in the near term. Alternatively, maybe I made a mistake in the calculation. Let me check again. Current B200 price: $4.25, TFLOPS/$ 600 → cost per TFLOP: $4.25 / 600 ≈ $0.00708. H100: $2.18 / 460.2 ≈ $0.00474. So H100 is cheaper. To find when B200 becomes cheaper, need $B200 / 600 < $H100 / 460.2 → $B200 < ($H100 * 600)/460.2 ≈ $H100 * 1.303. So if B200's price is less than 1.303 times H100's price. Let's see the forecasted prices. At 12mo, B200 is $3.10, H100 is $1.48. 3.10 / 1.48 ≈ 2.095, which is still higher than 1.303. So even at 12mo, B200 is more expensive. Therefore, the crossover isn't expected in the next 12 months. Maybe the model assumes that B200's price will decrease more sharply? The model for B200 says \"pattern=Early-cycle premium (mirrors H100 2023 trajectory)\". If we look at H100's historical prices: in the historical data, H100-SXM went from $2.24 in 2025-11 to $2.18 in 2026-02, a very small decrease. But if the B200 is following the H100's early-cycle premium, which in 2023 might have had a steeper decline. However, the given forecast for B200 is a 3mo target of $4.05 (from $4.25) and 12mo of $3.10. If the decline is exponential or follows a different pattern, maybe the crossover happens later. But with the given data, it's not in the next 12 months. So the answer would be that the crossover isn't expected within the forecast period based on current trends.\n\nArbitrage opportunities: Look for price differences between providers. For example, the B200 has a range from $3.75 to $5.35. The cheapest is CoreWeave at $3.75, while others go up to $5.35. So if you can commit to CoreWeave, you save money. Similarly, for H200, cheapest is Lambda at $3.29, others up to $3.49. Also, commitment types (on-demand vs reserved) might have different prices, but the data here is only on-demand. So the arbitrage is to use the cheapest providers. Also, maybe some GPUs have lower prices in certain regions. The regional market shows different premiums, so using providers in regions with lower premiums could save money. For example, North America has 0% premium, while others have higher. So if a provider in North America offers a GPU cheaper than others, that's an opportunity.\n\nRisk scenarios: Bull case would be increased demand (AI CapEx rising), supply constraints (NVIDIA's lead time decreasing but maybe unexpected shortages), or new products. Bear case: oversupply, slower AI adoption, or competition from AMD/Google/AWS. For example, if AMD's MI300X gains more market share, it could pressure NVIDIA's prices more than expected, leading to faster declines.\n\nTrade recommendations: Buy H100 and H200 now if expecting price drops, but given their current trends, maybe short them. For B200, given constrained supply and strong demand, maybe hold or buy if you need it. For A100, which is", "type": "price_forecasts", "timestamp": "2026-02-17T13:57:58.155899"}, "sustainability": {"analysis": "\n\n### **1. ESG Ranking: GPU Compute Providers**  \n**Top 3 ESG-Compliant Providers (Sustainability Score + Green Energy + PUE):**  \n1. **Google Cloud (GCP)**  \n   - **Score**: 80.2/100 | **Green Energy**: 74.8% | **PUE**: 1.08  \n   - **Best Region**: `europe-north1` (highest green energy, lowest PUE).  \n   - **Worst Region**: `asia-east1` (lowest green energy, higher PUE).  \n\n2. **AWS**  \n   - **Score**: 79.2/100 | **Green Energy**: 73.2% | **PUE**: 1.1  \n   - **Best Region**: `eu-north-1` (high green energy, low PUE).  \n   - **Worst Region**: `ap-northeast-1` (low green energy, higher PUE).  \n\n3. **Azure**  \n   - **Score**: 77.6/100 | **Green Energy**: 71.4% | **PUE**: 1.11  \n   - **Best Region**: `northeurope` (strong green energy, moderate PUE).  \n   - **Worst Region**: `japaneast` (lower green energy, higher PUE).  \n\n**Recommendation**: ESG-conscious buyers should prioritize **GCP’s `europe-north1`** for GPU workloads, followed by AWS’s `eu-north-1`. Avoid Lambda and CoreWeave’s `us-east`/`us-south` regions due to low green energy (66–72%) and higher PUE (1.12–1.15).  \n\n---\n\n### **2. Carbon Cost Analysis: GPU-Hour Footprint**  \n**Formula**:  \n$$ \\text{Carbon (gCO₂/GPU-hour)} = \\text{Power (kW)} \\times \\text{PUE} \\times \\text{Grid Carbon Intensity (gCO₂/kWh)} \\times (1 - \\text{Green Energy \\%}) $$  \nAssumptions:  \n- GPU power: 300W (typical for H100/A100).  \n- Grid carbon intensity:  \n  - Europe (green energy regions): ~300 gCO₂/kWh.  \n  - Asia (coal-heavy grids): ~700 gCO₂/kWh.  \n  - US (mixed grid): ~500 gCO₂/kWh.  \n\n**Best/Worst Combinations**:  \n| Provider | Best Region (gCO₂/GPU-hr) | Worst Region (gCO₂/GPU-hr) |  \n|----------|---------------------------|----------------------------|  \n| **GCP**  | 9.7 (europe-north1)       | 120.7 (asia-east1)         |  \n| **AWS**  | 12.1 (eu-north-1)         | 136.5 (ap-northeast-1)     |  \n| **Azure**| 14.3 (northeurope)        | 157.5 (japaneast)          |  \n| **CoreWeave** | 15.8 (us-west)        | 172.5 (us-east)            |  \n| **Lambda** | 21.2 (us-west)          | 237.5 (us-south)           |  \n\n**Key Insight**: GCP’s `europe-north1` emits **~9.7gCO₂/GPU-hour** (vs. Lambda’s `us-south` at **237.5gCO₂/GPU-hour**), a **24x difference**.  \n\n---\n\n### **3. Supply Chain Vulnerabilities**  \n**Critical Risks**:  \n- **TSMC Over-Reliance**: NVIDIA (100%), AMD (100%), Google TPU (100%) depend on TSMC for advanced nodes (e.g., 4N/3D-Flip-Chip).  \n  - **Bottlenecks**:  \n    - NVIDIA: CoWoS packaging (TSMC-led) and HBM3e (SK Hynix/Samsung).  \n    - AMD: TSMC 5nm/3nm capacity and HBM3 allocation.  \n    - Google TPU: Internal demand vs. cloud availability (TSMC wafer allocation).  \n- **", "type": "sustainability_risk", "timestamp": "2026-02-17T13:57:58.185474"}, "gpu_H100-SXM": {"analysis": "\n\n### 1. **Current Market Positioning & Value Proposition**  \nThe **NVIDIA H100 SXM 80GB** is NVIDIA’s flagship GPU for data centers, leveraging the **Hopper architecture** and **80GB HBM2e VRAM** to deliver unmatched performance in AI, HPC, and enterprise workloads. Key differentiators include:  \n- **FP16 Performance**: 989.5 TFLOPS (critical for AI training/inference).  \n- **NVLink 4.0**: 900 GB/s interconnect bandwidth for multi-GPU scalability.  \n- **High VRAM**: 80GB enables large-scale models (e.g., LLMs, 3D rendering).  \n- **Power Efficiency**: 700W TDP balances performance with data center power constraints.  \n\n**Value Proposition**:  \n- **AI/ML Dominance**: Ideal for training large language models (LLMs), diffusion models, and real-time inference.  \n- **HPC Workloads**: Accelerates simulations in genomics, climate modeling, and computational fluid dynamics.  \n- **Enterprise Adoption**: Supports hybrid cloud deployments and AI-driven analytics.  \n- **Competitive Pricing**: Cloud providers now offer H100s at ~**$2.15–$2.50/hour**, far below MSRP ($30,000).  \n\n---\n\n### 2. **Price Trend Analysis & Forecast**  \n#### **Historical Pricing (2023–2026)**:  \n- **2023**: Prices started at **$4.7/hour**, dropping steadily to **$2.15/hour** by late 2025.  \n- **2024–2025**: Availability shifted from \"scarce\" to \"abundant\" as supply stabilized.  \n- **2026**: Prices stabilize at **$2.20–$2.30/hour**, with \"abundant\" availability.  \n\n#### **Drivers of Decline**:  \n- **Supply Chain Improvements**: Increased H100 production and cloud provider inventory.  \n- **Competition**: NVIDIA’s H200 (2024) and AMD/Intel’s AI GPUs pressured pricing.  \n- **Spot Market Growth**: Spot pricing (e.g., CoreWeave at **$1.115/hour**) reduced on-demand costs.  \n\n#### **Forecast (2025–2026)**:  \n- **Short-Term (2025 Q3–2026)**: Prices will stabilize at **$2.20–$2.30/hour**.  \n- **Long-Term (2026+)**: Potential dip to **$1.80–$2.00/hour** if H200 adoption accelerates.  \n\n---\n\n### 3. **Best Use Cases at Current Pricing**  \nThe H100’s current pricing (~$2.20/hour) justifies its use for **high-value, compute-intensive workloads**:  \n- **AI Training**: LLMs (e.g., Llama 3, GPT-4 alternatives), vision-language models.  \n- **HPC Simulations**: Molecular dynamics, weather forecasting, and AI-driven scientific research.  \n- **Enterprise AI**: Real-time inference for chatbots, recommendation systems, and generative AI.  \n- **Graphics Rendering**: 8K/VR rendering with high VRAM.  \n\n**Not Ideal For**:  \n- **General Workloads**: Lower-tier GPUs (e.g., A100, L4) are cheaper for basic ML or video processing.  \n- **Budget Constraints**: At $1569/month for 80GB VRAM, it’s overkill for small-scale projects.  \n\n---\n\n### 4. **Buy/Wait/Skip Recommendation**  \n**Buy Now If**:  \n- You need **80GB VRAM** for large-scale AI/HPC workloads.  \n- Your project requires **NVLink 4.0** for multi-GPU scalability.  \n- You can’t wait for the H200 (2024) or newer architectures.  \n\n**Wait If**:  \n- You’re budget-sensitive and can delay projects until **2026** (prices may drop to $1.80/hour).  \n- You’re targeting **inference-only** workloads (H200 or L4 may suffice).  \n\n**Skip If**:  \n- Your workload fits on **A100 (40GB)** or **L4 (24GB)** GPUs.  \n- You need **spot pricing** for cost savings (H100 spot instances are rare).  \n\n---\n\n### 5. **Best Provider Recommendation**  \n#### **Top Provider**: **Vast.ai**  \n- **Price**: **$2.15/hour** (lowest on-demand rate).  \n- **Spot Pricing**: Not available (but on-demand is cheapest).  \n- **Regions**: US, EU, APAC (global flexibility).  \n- **Monthly Cost**: **$1569.5** (vs. CoreWeave’s $1627.9).  \n\n#### **Why Vast.ai?**  \n- **Cost Efficiency**: 10–15% cheaper than CoreWeave/FluidStack.  \n- **Global Availability**: Critical for teams needing EU/APAC access.  \n- **", "gpu_id": "H100-SXM", "timestamp": "2026-02-17T13:58:51.188676"}};</script>
</head>
<body>

<!-- ═══ TOPBAR ═══ -->
<div class="topbar">
  <div class="topbar-brand">
    <div class="topbar-logo">G</div>
    <div class="topbar-name">
      <span class="topbar-title">GPU Intel Pro</span>
      <span class="topbar-subtitle">Market Terminal</span>
    </div>
  </div>
  <div class="topbar-indicators" id="tickerBar"></div>
  <div class="topbar-meta">
    <div class="live-dot"></div>
    <div class="topbar-time" id="headerTime"></div>
  </div>
</div>

<!-- ═══ NEWS TICKER ═══ -->
<div class="news-bar">
  <div class="news-label">LIVE</div>
  <div class="news-track" id="newsScroll"></div>
</div>

<!-- ═══ NAV ═══ -->
<div class="nav" id="navTabs">
  <div class="nav-item active" data-tab="overview">Overview</div>
  <div class="nav-item" data-tab="pricing">Price Matrix</div>
  <div class="nav-item" data-tab="trends">Trends</div>
  <div class="nav-item" data-tab="providers">Providers</div>
  <div class="nav-item" data-tab="regional">Regional</div>
  <div class="nav-item" data-tab="spot">Spot Market</div>
  <div class="nav-item" data-tab="inference">Inference</div>
  <div class="nav-item" data-tab="tco">TCO</div>
  <div class="nav-item" data-tab="workloads">Workloads</div>
  <div class="nav-item" data-tab="efficiency">Efficiency</div>
  <div class="nav-item" data-tab="forecasting">Forecasting</div>
  <div class="nav-item" data-tab="sustainability">Sustainability</div>
  <div class="nav-item" data-tab="model-fit">Model Fit</div>
  <div class="nav-item" data-tab="ai-analysis">AI Analysis</div>
  <div class="nav-item" data-tab="data-audit">Data</div>
</div>

<!-- ═══ MAIN ═══ -->
<div class="main">

<!-- ── OVERVIEW ── -->
<div class="tab-panel active" id="tab-overview">
  <div class="kpi-strip mb" id="overviewKpis"></div>
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Spot Market Snapshot</span><span class="card-hd-badge">LIVE</span></div>
      <div class="card-bd-flush"><table class="dt" id="overviewSpotTable"></table></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">GPU Price Trends — 12mo ($/hr avg)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:280px;"><canvas id="chartOverviewTrends"></canvas></div></div>
    </div>
  </div>
  <div class="grid g-3 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Market Size & AI CapEx ($B)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:250px;"><canvas id="chartMarketSize"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">GPU Shipments (K units/qtr)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:250px;"><canvas id="chartOverviewShipments"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Flagship GPU Lead Time (weeks)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:250px;"><canvas id="chartOverviewLead"></canvas></div></div>
    </div>
  </div>
  <div class="grid g-6-4 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">GPU Pricing Overview</span><span class="dim" style="font-size:10px;font-family:var(--mono);">On-demand price range across all providers</span></div>
      <div class="card-bd-flush"><table class="dt" id="overviewTopTable"></table></div>
    </div>
    <div class="ai-panel">
      <div class="card-hd">
        <span class="card-hd-title">Market Intelligence Brief</span>
        <span class="card-hd-badge" style="background:var(--cyan-dim);color:var(--cyan);">ANALYST</span>
        <button class="btn" onclick="loadAI('summary')">Refresh</button>
      </div>
      <div class="ai-body" id="aiSummaryContent"><div class="ai-loading">Generating analysis</div></div>
    </div>
  </div>
  <div class="card mb">
    <div class="card-hd">
      <div style="display:flex;align-items:center;gap:10px;">
        <span class="card-hd-title">Developer & MLOps Sentiment</span>
        <span class="card-hd-badge" style="background:var(--purple-dim);color:var(--purple);">COMMUNITY</span>
      </div>
      <span class="dim" style="font-size:10px;font-family:var(--mono);">Reddit · GitHub · HuggingFace · 30-day signals</span>
    </div>
    <div class="card-bd" id="sentimentPanel"></div>
  </div>
</div>

<!-- ── PRICING ── -->
<div class="tab-panel" id="tab-pricing">
  <div class="card mb">
    <div class="card-hd">
      <span class="card-hd-title">GPU Price Grid</span>
      <span style="font-size:10px;margin-left:8px;"><span class="tag" style="background:var(--blue-dim);color:var(--blue);font-size:9px;">CLOUD</span> <span class="tag" style="background:var(--amber-dim);color:var(--amber);font-size:9px;">MARKETPLACE</span></span>
      <span class="dim" style="font-size:10px;font-family:var(--mono);margin-left:auto;">On-demand $/hr per GPU</span>
    </div>
    <div class="card-bd-flush" style="overflow-x:auto;"><table class="dt" id="priceMatrixTable"></table></div>
  </div>
  <div class="grid g-2">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Price Distribution by GPU</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:300px;"><canvas id="chartPriceDist"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Performance per Dollar (FP16 TFLOPS/$)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:300px;"><canvas id="chartFlopsPerDollar"></canvas></div></div>
    </div>
  </div>
</div>

<!-- ── TRENDS ── -->
<div class="tab-panel" id="tab-trends">
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd">
        <span class="card-hd-title">Historical Price Trends</span>
        <select class="ctrl-select" id="trendGpuSelect" onchange="updateTrendChart()"></select>
      </div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartTrends"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">GPU Market Price Index</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartPriceIndex"></canvas></div></div>
    </div>
  </div>
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Price Decay Since Launch</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:300px;"><canvas id="chartDecay"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Market Supply &amp; Competition</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:300px;"><canvas id="chartMarketSupply"></canvas></div></div>
    </div>
  </div>
</div>

<!-- ── PROVIDERS ── -->
<div class="tab-panel" id="tab-providers">
  <div style="margin-bottom:14px;display:flex;gap:10px;align-items:center;">
    <span class="dim" style="font-size:11px;">Select GPU:</span>
    <select class="ctrl-select" id="providerGpuSelect" onchange="updateProviderView()"></select>
  </div>
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title" id="providerChartTitle">Price Comparison</span><span class="card-hd-badge" style="background:var(--cyan-dim,rgba(34,211,238,0.12));color:var(--cyan,#22d3ee);">Cloud</span><span class="card-hd-badge" style="background:var(--amber-dim);color:var(--amber);margin-left:4px;">Marketplace</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartProviders"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">On-Demand vs Reserved vs Spot</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartPriceTypes"></canvas></div></div>
    </div>
  </div>
  <div class="card mb">
    <div class="card-hd"><span class="card-hd-title">Cloud Providers</span><span class="card-hd-badge" style="background:var(--blue-dim);color:var(--blue);">Own Infrastructure</span></div>
    <div class="card-bd-flush"><table class="dt" id="providerCloudTable"></table></div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="card-hd-title">GPU Marketplaces</span><span class="card-hd-badge" style="background:var(--amber-dim);color:var(--amber);">Aggregated / Community Hardware</span></div>
    <div class="card-bd-flush"><table class="dt" id="providerMktTable"></table></div>
  </div>
</div>

<!-- ── REGIONAL ── -->
<div class="tab-panel" id="tab-regional">
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Market Share by Region</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:300px;"><canvas id="chartRegionShare"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">YoY Growth by Region</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:300px;"><canvas id="chartRegionGrowth"></canvas></div></div>
    </div>
  </div>
  <div class="region-grid mb" id="regionCards"></div>
  <div class="card mb">
    <div class="card-hd"><span class="card-hd-title">Regional GPU Pricing Comparison ($/hr)</span></div>
    <div class="card-bd-flush"><table class="dt" id="regionalPricingTable"></table></div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="card-hd-title">Regional Adoption Trend</span></div>
    <div class="card-bd"><div class="chart-wrap" style="height:280px;"><canvas id="chartRegionAdoption"></canvas></div></div>
  </div>
</div>

<!-- ── SPOT MARKET ── -->
<div class="tab-panel" id="tab-spot">
  <div class="kpi-strip mb" id="spotStats"></div>
  <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:14px;margin-bottom:14px;" id="spotCards"></div>
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Spot Discount vs On-Demand</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartSpotDiscount"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Price Momentum (90d → 30d → Now)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartSpotMomentum"></canvas></div></div>
    </div>
  </div>
  <div class="grid g-2">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Trading Volume Trend (GPU-hrs/day)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:280px;"><canvas id="chartVolumeTrend"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Available Inventory Trend (GPUs)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:280px;"><canvas id="chartInventoryTrend"></canvas></div></div>
    </div>
  </div>
</div>

<!-- ── INFERENCE ── -->
<div class="tab-panel" id="tab-inference">
  <div class="kpi-strip mb" id="inferenceStats"></div>
  <div class="card mb">
    <div class="card-hd">
      <span class="card-hd-title">Top 20 Models — $/M Tokens by Provider</span>
      <div style="display:flex;gap:8px;align-items:center;">
        <select id="inferCatFilter" style="background:var(--bg2);color:var(--fg);border:1px solid var(--border);border-radius:4px;padding:2px 8px;font-size:11px;font-family:var(--mono);">
          <option value="all">All Categories</option>
          <option value="Small">Small (&lt;10B)</option>
          <option value="Medium">Medium (10-30B)</option>
          <option value="Large">Large (30-200B)</option>
          <option value="Frontier">Frontier (200B+)</option>
        </select>
        <span class="dim" style="font-size:10px;font-family:var(--mono);">Provider API pricing</span>
      </div>
    </div>
    <div class="card-bd-flush" style="overflow-x:auto;"><table class="dt" id="inferenceTable"></table></div>
  </div>
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">$/M Tokens by Provider — Top Models</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:380px;"><canvas id="chartInferenceCost"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Self-Hosted GPU Cost vs Provider API</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:380px;"><canvas id="chartApiVsSelfHosted"></canvas></div></div>
    </div>
  </div>
  <div class="grid g-2">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Cost Frontier — Model Size vs $/M Tokens</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartInferenceThroughput"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Provider Coverage — Models per Provider</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartProviderCoverage"></canvas></div></div>
    </div>
  </div>
</div>

<!-- ── TCO ── -->
<div class="tab-panel" id="tab-tco">
  <div class="kpi-strip mb" id="tcoStats"></div>
  <div class="grid g-2 mb">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">TCO Breakdown ($/hr per GPU)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:380px;"><canvas id="chartTcoStack"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title" id="tcoPieTitle">TCO Component Share (Flagship GPU)</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:380px;"><canvas id="chartTcoPie"></canvas></div></div>
    </div>
  </div>
  <div class="card mb">
    <div class="card-hd"><span class="card-hd-title">Full TCO Breakdown by GPU</span></div>
    <div class="card-bd-flush" style="overflow-x:auto;"><table class="dt" id="tcoTable"></table></div>
  </div>
  <div class="card">
    <div class="card-hd"><span class="card-hd-title">Monthly TCO — GPU Compute vs Hidden Costs</span></div>
    <div class="card-bd"><div class="chart-wrap" style="height:280px;"><canvas id="chartTcoMonthly"></canvas></div></div>
  </div>
</div>

<!-- ── WORKLOADS ── -->
<div class="tab-panel" id="tab-workloads">
  <div class="card mb">
    <div class="card-hd"><span class="card-hd-title">Workload-Based GPU Recommendations</span></div>
    <div class="card-bd-flush"><table class="dt" id="workloadTable"></table></div>
  </div>
  <div class="grid g-2">
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Monthly Cost by Workload</span></div>
      <div class="card-bd"><div class="chart-wrap" style="height:340px;"><canvas id="chartWorkloadCost"></canvas></div></div>
    </div>
    <div class="card">
      <div class="card-hd"><span class="card-hd-title">Cost Calculator</span></div>
      <div class="card-bd" id="costCalcBody">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px;">
          <div>
            <label style="font-size:10px;color:var(--text-3);text-transform:uppercase;letter-spacing:0.5px;">GPU Type</label>
            <select class="ctrl-select" id="calcGpu" style="width:100%;margin-top:4px;" onchange="calcCost()"></select>
          </div>
          <div>
            <label style="font-size:10px;color:var(--text-3);text-transform:uppercase;letter-spacing:0.5px;">Provider</label>
            <select class="ctrl-select" id="calcProvider" style="width:100%;margin-top:4px;" onchange="calcCost()"></select>
          </div>
          <div>
            <label style="font-size:10px;color:var(--text-3);text-transform:uppercase;letter-spacing:0.5px;"># GPUs</label>
            <input type="number" id="calcGpus" value="8" min="1" class="ctrl-input" style="margin-top:4px;" oninput="calcCost()">
          </div>
          <div>
            <label style="font-size:10px;color:var(--text-3);text-transform:uppercase;letter-spacing:0.5px;">Hours/Day</label>
            <input type="number" id="calcHours" value="24" min="1" max="24" class="ctrl-input" style="margin-top:4px;" oninput="calcCost()">
          </div>
        </div>
        <div id="calcResult" style="background:var(--bg-3);border-radius:var(--radius-sm);padding:16px;font-family:var(--mono);border:1px solid var(--border-0);"></div>
      </div>
    </div>
  </div>
</div>

<!-- ── EFFICIENCY ── -->
<div class="tab-panel" id="tab-efficiency">
  <div class="kpi-strip mb" id="effStats"></div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Utilization by Provider</span></div><div class="card-bd" style="height:320px;"><canvas id="chartUtilByProvider"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Efficiency Scores</span></div><div class="card-bd" style="height:320px;"><canvas id="chartEfficiency"></canvas></div></div>
  </div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Utilization Trends (5-month)</span></div><div class="card-bd" style="height:300px;"><canvas id="chartUtilTrend"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Reservation Breakeven Analysis</span></div><div class="card-bd" style="height:300px;"><canvas id="chartBreakeven"></canvas></div></div>
  </div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Recommended Allocation by Utilization</span></div><div class="card-bd"><div id="reservationTable"></div></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Savings by Commitment Type</span></div><div class="card-bd" style="height:300px;"><canvas id="chartSavings"></canvas></div></div>
  </div>
  <div class="card" style="border-color:var(--purple-dim);">
    <div class="card-hd" style="background:var(--bg-3);">
      <span class="card-hd-title" style="color:var(--purple);">AI Efficiency Analysis</span>
      <div style="display:flex;gap:6px;align-items:center;">
        <button class="btn" onclick="loadAI('efficiency');document.querySelector('[data-tab=ai-analysis]').click();" style="font-size:10px;">View in AI Hub</button>
      </div>
    </div>
  </div>
</div>

<!-- ── FORECASTING ── -->
<div class="tab-panel" id="tab-forecasting">
  <div class="kpi-strip mb" id="forecastStats"></div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Price Forecasts (3/6/12 Month)</span></div><div class="card-bd" style="height:360px;"><canvas id="chartForecast"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Price Elasticity Coefficients</span></div><div class="card-bd" style="height:360px;"><canvas id="chartElasticity"></canvas></div></div>
  </div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Competitive Moat Radar</span></div><div class="card-bd" style="height:360px;"><canvas id="chartMoatRadar"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Market Share Trends</span></div><div class="card-bd" style="height:360px;"><canvas id="chartMoatShare"></canvas></div></div>
  </div>
  <div class="card mb">
    <div class="card-hd"><span class="card-hd-title">Competitive Landscape Detail</span></div>
    <div class="card-bd"><div id="competitiveTable"></div></div>
  </div>
  <div class="card" style="border-color:var(--purple-dim);">
    <div class="card-hd" style="background:var(--bg-3);">
      <span class="card-hd-title" style="color:var(--purple);">AI Price Forecast & Competitive Analysis</span>
      <div style="display:flex;gap:6px;align-items:center;">
        <button class="btn" onclick="loadAI('forecast');document.querySelector('[data-tab=ai-analysis]').click();" style="font-size:10px;">View in AI Hub</button>
      </div>
    </div>
  </div>
</div>

<!-- ── SUSTAINABILITY ── -->
<div class="tab-panel" id="tab-sustainability">
  <div class="kpi-strip mb" id="susStats"></div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Carbon Footprint by GPU (Annual, US avg)</span></div><div class="card-bd" style="height:320px;"><canvas id="chartCarbonByGpu"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">PUE & Green Energy by Provider</span></div><div class="card-bd" style="height:320px;"><canvas id="chartPueGreen"></canvas></div></div>
  </div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Supply Chain Risk Scores</span></div><div class="card-bd" style="height:300px;"><canvas id="chartSupplyRisk"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Lead Time Trends (weeks)</span></div><div class="card-bd" style="height:300px;"><canvas id="chartRiskTrend"></canvas></div></div>
  </div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Sustainability Scores by Region</span></div><div class="card-bd"><div id="sustainabilityTable"></div></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Export Control Timeline</span></div><div class="card-bd"><div id="exportControlTable"></div></div></div>
  </div>
  <div class="card" style="border-color:var(--purple-dim);">
    <div class="card-hd" style="background:var(--bg-3);">
      <span class="card-hd-title" style="color:var(--purple);">AI Sustainability & Risk Analysis</span>
      <div style="display:flex;gap:6px;align-items:center;">
        <button class="btn" onclick="loadAI('sustainability');document.querySelector('[data-tab=ai-analysis]').click();" style="font-size:10px;">View in AI Hub</button>
      </div>
    </div>
  </div>
</div>

<!-- ── MODEL FIT ── -->
<div class="tab-panel" id="tab-model-fit">
  <div class="kpi-strip mb" id="fitStats"></div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Cost per 1M Tokens by Model Size & GPU</span></div><div class="card-bd" style="height:360px;"><canvas id="chartFitCost"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">Fit Score by Model Size & GPU</span></div><div class="card-bd" style="height:360px;"><canvas id="chartFitScore"></canvas></div></div>
  </div>
  <div class="grid g-2 mb">
    <div class="card"><div class="card-hd"><span class="card-hd-title">Throughput vs Cost Frontier</span></div><div class="card-bd" style="height:340px;"><canvas id="chartFitFrontier"></canvas></div></div>
    <div class="card"><div class="card-hd"><span class="card-hd-title">VRAM Headroom by Configuration</span></div><div class="card-bd" style="height:340px;"><canvas id="chartFitVram"></canvas></div></div>
  </div>
  <div class="card mb">
    <div class="card-hd"><span class="card-hd-title">Model-to-Hardware Fit Matrix</span></div>
    <div class="card-bd"><div id="fitTable"></div></div>
  </div>
</div>

<!-- ── AI ANALYSIS ── -->
<div class="tab-panel" id="tab-ai-analysis">

  <!-- Command Bar -->
  <div class="ai-cmdbar">
    <div class="ai-cmdbar-label">AI Intelligence</div>
    <div class="ai-cmdbar-sep"></div>
    <button class="btn btn-primary" onclick="loadAllAI()" id="btnGenerateAll">Generate All Reports</button>
    <button class="btn" onclick="refreshAllAI()">Refresh All (bypass cache)</button>
    <div class="ai-cmdbar-sep"></div>
    <select class="ctrl-select" id="aiGpuSelect" style="min-width:180px;"><option value="">-- GPU Deep Dive --</option></select>
    <button class="btn" onclick="loadGpuAI()">Analyze</button>
    <div style="margin-left:auto;display:flex;align-items:center;gap:8px;">
      <span class="ai-cmdbar-label" style="font-size:9px;">STATUS</span>
      <span class="intel-status intel-status-idle" id="aiGlobalStatus">IDLE</span>
    </div>
  </div>

  <!-- Analyst Notes — Top Priority (full width) -->
  <div class="notes-panel mb" id="notesSection">
    <div class="card-hd">
      <div style="display:flex;align-items:center;gap:10px;">
        <span class="card-hd-title" style="color:var(--orange);">Analyst Market Notes</span>
        <span class="card-hd-badge" style="background:var(--orange-dim);color:var(--orange);">INSTITUTIONAL</span>
      </div>
      <div style="display:flex;gap:6px;">
        <button class="btn" onclick="loadAI('notes')">Generate</button>
      </div>
    </div>
    <div class="ai-body" id="aiNotesContent">
      <div class="ai-idle"><div class="ai-idle-icon">&#x1F4CB;</div><span>Click Generate or Generate All to create analyst notes with BUY/SELL/HOLD signals</span></div>
    </div>
  </div>

  <!-- Intelligence Cards Grid -->
  <div class="intel-grid mb">

    <!-- Market Trends -->
    <div class="intel-card" id="intelTrends">
      <div class="intel-hd">
        <div class="intel-hd-left">
          <div class="intel-icon" style="background:var(--blue-dim);color:var(--blue);">&#x1F4C8;</div>
          <div><div class="intel-title">Market Trends</div><div class="intel-sub">Pricing trajectories, supply/demand, generational shifts</div></div>
        </div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span class="intel-status intel-status-idle" id="statusTrends">IDLE</span>
          <button class="btn" onclick="loadAI('trends')" style="font-size:10px;padding:3px 10px;">Run</button>
        </div>
      </div>
      <div class="intel-bd"><div class="ai-body" id="aiTrendsContent">
        <div class="ai-idle"><div class="ai-idle-icon">&#x1F4C8;</div><span>Price trajectory, supply/demand dynamics, generational impact</span></div>
      </div></div>
    </div>

    <!-- Investment Outlook -->
    <div class="intel-card" id="intelInvestment">
      <div class="intel-hd">
        <div class="intel-hd-left">
          <div class="intel-icon" style="background:var(--green-dim);color:var(--green);">&#x1F4B0;</div>
          <div><div class="intel-title">Investment Outlook</div><div class="intel-sub">Buy vs rent, price floors, provider risk, budget planning</div></div>
        </div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span class="intel-status intel-status-idle" id="statusInvestment">IDLE</span>
          <button class="btn" onclick="loadAI('investment')" style="font-size:10px;padding:3px 10px;">Run</button>
        </div>
      </div>
      <div class="intel-bd"><div class="ai-body" id="aiInvestmentContent">
        <div class="ai-idle"><div class="ai-idle-icon">&#x1F4B0;</div><span>Buy/rent framework, price floors, transition timing, alpha opportunities</span></div>
      </div></div>
    </div>

    <!-- Regional Analysis -->
    <div class="intel-card" id="intelRegional">
      <div class="intel-hd">
        <div class="intel-hd-left">
          <div class="intel-icon" style="background:var(--cyan-dim);color:var(--cyan);">&#x1F30D;</div>
          <div><div class="intel-title">Regional Opportunities</div><div class="intel-sub">Price arbitrage, regulatory impact, deployment strategy</div></div>
        </div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span class="intel-status intel-status-idle" id="statusRegional">IDLE</span>
          <button class="btn" onclick="loadAI('regional')" style="font-size:10px;padding:3px 10px;">Run</button>
        </div>
      </div>
      <div class="intel-bd"><div class="ai-body" id="aiRegionalContent">
        <div class="ai-idle"><div class="ai-idle-icon">&#x1F30D;</div><span>Regional arbitrage, emerging markets, regulatory impact, energy costs</span></div>
      </div></div>
    </div>

    <!-- Efficiency Optimization -->
    <div class="intel-card" id="intelEfficiency">
      <div class="intel-hd">
        <div class="intel-hd-left">
          <div class="intel-icon" style="background:var(--amber-dim);color:var(--amber);">&#x26A1;</div>
          <div><div class="intel-title">Efficiency Optimization</div><div class="intel-sub">Utilization gaps, right-sizing, scheduling, cost savings</div></div>
        </div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span class="intel-status intel-status-idle" id="statusEfficiency">IDLE</span>
          <button class="btn" onclick="loadAI('efficiency')" style="font-size:10px;padding:3px 10px;">Run</button>
        </div>
      </div>
      <div class="intel-bd"><div class="ai-body" id="aiEfficiencyContent">
        <div class="ai-idle"><div class="ai-idle-icon">&#x26A1;</div><span>Utilization gaps, right-sizing, scheduling optimization, cost savings</span></div>
      </div></div>
    </div>

    <!-- Price Forecasts -->
    <div class="intel-card" id="intelForecast">
      <div class="intel-hd">
        <div class="intel-hd-left">
          <div class="intel-icon" style="background:var(--purple-dim);color:var(--purple);">&#x1F52E;</div>
          <div><div class="intel-title">Price Forecast & Competitive</div><div class="intel-sub">30/60/90-day outlook, elasticity, competitive displacement</div></div>
        </div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span class="intel-status intel-status-idle" id="statusForecast">IDLE</span>
          <button class="btn" onclick="loadAI('forecast')" style="font-size:10px;padding:3px 10px;">Run</button>
        </div>
      </div>
      <div class="intel-bd"><div class="ai-body" id="aiForecastContent">
        <div class="ai-idle"><div class="ai-idle-icon">&#x1F52E;</div><span>Price targets, elasticity analysis, competitive displacement, arbitrage</span></div>
      </div></div>
    </div>

    <!-- Sustainability & Risk -->
    <div class="intel-card" id="intelSustainability">
      <div class="intel-hd">
        <div class="intel-hd-left">
          <div class="intel-icon" style="background:var(--green-dim);color:var(--green);">&#x1F331;</div>
          <div><div class="intel-title">Sustainability & Supply Risk</div><div class="intel-sub">ESG ranking, carbon costs, supply chain, geopolitical risk</div></div>
        </div>
        <div style="display:flex;align-items:center;gap:6px;">
          <span class="intel-status intel-status-idle" id="statusSustainability">IDLE</span>
          <button class="btn" onclick="loadAI('sustainability')" style="font-size:10px;padding:3px 10px;">Run</button>
        </div>
      </div>
      <div class="intel-bd"><div class="ai-body" id="aiSustainabilityContent">
        <div class="ai-idle"><div class="ai-idle-icon">&#x1F331;</div><span>ESG ranking, carbon costs, supply chain vulnerabilities, regulatory outlook</span></div>
      </div></div>
    </div>

  </div>

  <!-- GPU Deep Dive (full width) -->
  <div class="intel-card" id="intelGpuDive">
    <div class="intel-hd">
      <div class="intel-hd-left">
        <div class="intel-icon" style="background:var(--cyan-dim);color:var(--cyan);">&#x1F50D;</div>
        <div><div class="intel-title" id="aiGpuTitle">GPU Deep Dive</div><div class="intel-sub">Select a GPU above for detailed market positioning, pricing forecast, and provider recommendation</div></div>
      </div>
      <span class="intel-status intel-status-idle" id="statusGpu">IDLE</span>
    </div>
    <div class="intel-bd"><div class="ai-body" id="aiGpuContent">
      <div class="ai-idle"><div class="ai-idle-icon">&#x1F50D;</div><span>Select a GPU from the dropdown and click Analyze for a deep-dive report</span></div>
    </div></div>
  </div>

</div>

<!-- ── DATA AUDIT ── -->
<div class="tab-panel" id="tab-data-audit">

  <div class="ai-cmdbar mb">
    <div class="ai-cmdbar-label">Data Audit</div>
    <div class="ai-cmdbar-sep"></div>
    <input class="ctrl-input" id="dataAuditSearch" placeholder="Search across all datasets..." style="max-width:360px;">
    <div class="ai-cmdbar-sep"></div>
    <button class="btn" onclick="expandAllDataSections(true)">Expand All</button>
    <button class="btn" onclick="expandAllDataSections(false)">Collapse All</button>
    <button class="btn btn-primary" onclick="exportAllDataJSON()">Export JSON</button>
    <div style="margin-left:auto;display:flex;align-items:center;gap:8px;">
      <span class="ai-cmdbar-label" style="font-size:9px;">DATASETS</span>
      <span class="tag" style="background:var(--cyan-dim);color:var(--cyan);" id="dataAuditCount">0</span>
    </div>
  </div>

  <div id="dataAuditContainer"></div>

</div>

</div><!-- /main -->

<script>
// ════════════════════════════════════════════════════════════════
// DATA
// ════════════════════════════════════════════════════════════════
let DATA = {
  matrix:[], specs:{}, providers:{}, historical:{},
  indicators:{}, regional:{}, workloads:{},
  tco:{}, inference:{}, spot:{}, news:[],
  utilization:{}, reservations:{}, forecasts:{},
  competitive:{}, sustainability:{}, supplychain:{}, modelfit:{}, sentiment:{}
};

const C = {
  blue:'#4e8ff7', cyan:'#22d3ee', green:'#34d399', red:'#f87171',
  amber:'#fbbf24', purple:'#a78bfa', orange:'#fb923c', pink:'#f472b6',
  teal:'#2dd4bf', indigo:'#818cf8', lime:'#a3e635', sky:'#38bdf8'
};
const CL = Object.values(C);
const PC = {
  'AWS':C.orange,'GCP':C.blue,'Azure':C.cyan,'Lambda':C.purple,
  'CoreWeave':C.green,'RunPod':C.pink,'Vast.ai':C.amber,
  'FluidStack':C.teal,'Oracle':C.red,'Together':C.indigo
};

Chart.defaults.color = '#5c6980';
Chart.defaults.borderColor = 'rgba(26,34,51,0.6)';
Chart.defaults.font.family = "'JetBrains Mono','SF Mono',monospace";
Chart.defaults.font.size = 10.5;
Chart.defaults.plugins.legend.labels.boxWidth = 10;
Chart.defaults.plugins.legend.labels.padding = 14;
Chart.defaults.elements.bar.borderRadius = 3;
Chart.defaults.elements.line.borderWidth = 2;
Chart.defaults.elements.point.radius = 2.5;

let charts = {};

// ════════════════════════════════════════════════════════════════
// LOADING
// ════════════════════════════════════════════════════════════════
const IS_STATIC = typeof EMBEDDED_DATA !== 'undefined';
async function fetchJSON(url) {
  const r = await fetch(url);
  const ct = r.headers.get('content-type') || '';
  if(!r.ok || !ct.includes('json')) throw new Error(`Server unavailable (${r.status})`);
  return r.json();
}

async function loadAllData() {
  if(IS_STATIC) {
    DATA = EMBEDDED_DATA;
    renderAll();
    loadAI('summary');
    return;
  }
  const [matrix,specs,providers,historical,indicators,regional,workloads,tco,inference,spot,news,
         utilization,reservations,forecasts,competitive,sustainability,supplychain,modelfit] = await Promise.all([
    fetchJSON('/api/matrix'), fetchJSON('/api/specs'), fetchJSON('/api/providers'),
    fetchJSON('/api/historical'), fetchJSON('/api/indicators'), fetchJSON('/api/regional'),
    fetchJSON('/api/workloads'), fetchJSON('/api/tco'), fetchJSON('/api/inference'),
    fetchJSON('/api/spot'), fetchJSON('/api/news'),
    fetchJSON('/api/utilization'), fetchJSON('/api/reservations'), fetchJSON('/api/forecasts'),
    fetchJSON('/api/competitive'), fetchJSON('/api/sustainability'), fetchJSON('/api/supplychain'),
    fetchJSON('/api/modelfit'),
  ]);
  DATA = {matrix,specs,providers,historical,indicators,regional,workloads,tco,inference,spot,news,
          utilization,reservations,forecasts,competitive,sustainability,supplychain,modelfit};
  renderAll();
  loadAI('summary');
}

// ════════════════════════════════════════════════════════════════
// NAV
// ════════════════════════════════════════════════════════════════
document.querySelectorAll('.nav-item').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.nav-item').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-panel').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
  });
});

// ════════════════════════════════════════════════════════════════
// RENDER ALL
// ════════════════════════════════════════════════════════════════
function renderAll() {
  renderTicker();
  renderNewsBanner();
  renderOverview();
  renderPriceMatrix();
  renderTrendsTab();
  renderProvidersTab();
  renderRegionalTab();
  renderWorkloadsTab();
  renderSpotTab();
  renderInferenceTab();
  renderTcoTab();
  renderEfficiencyTab();
  renderForecastingTab();
  renderSustainabilityTab();
  renderModelFitTab();
  renderSentimentPanel();
  renderDataAudit();
  populateSelectors();
  updateTime();
  setInterval(updateTime, 1000);
}

function updateTime() {
  document.getElementById('headerTime').textContent = new Date().toLocaleString('en-US', {
    year:'numeric', month:'short', day:'numeric', hour:'2-digit', minute:'2-digit', second:'2-digit'
  });
}

// ════════════════════════════════════════════════════════════════
// TICKER
// ════════════════════════════════════════════════════════════════
function renderTicker() {
  const mi = DATA.indicators;
  const spot = DATA.spot;
  const tb = document.getElementById('tickerBar');
  if (!mi || !mi.nvidia_stock) return;

  // SVG sparkline from price array
  const spark = (prices, color, w=44, h=14) => {
    if (!prices || prices.length < 2) return '';
    const mn = Math.min(...prices), mx = Math.max(...prices), rng = mx - mn || 1;
    const pts = prices.map((p,i) => `${(i/(prices.length-1))*w},${h-((p-mn)/rng)*(h-2)-1}`).join(' ');
    return `<svg width="${w}" height="${h}" class="indicator-spark-svg"><polyline points="${pts}" fill="none" stroke="${color}" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" opacity="0.85"/></svg>`;
  };

  // 24h % change from hourly prices
  const pctChg = (s) => {
    if (!s?.hourly_prices_24h?.length) return 0;
    const p = s.hourly_prices_24h;
    return ((p[p.length-1] - p[0]) / p[0] * 100).toFixed(1);
  };

  const chgBadge = (val, suffix='%') => {
    const cls = val >= 0 ? 'up' : 'down';
    return `<span class="indicator-change ${cls}">${val > 0 ? '+' : ''}${val}${suffix}</span>`;
  };

  // Stock: label on top, value + change on bottom row
  const mkStock = (label, price, ytdChg) => {
    return `<div class="indicator">
      <span class="indicator-label">${label}</span>
      <div class="indicator-row">
        <span class="indicator-value">$${price}</span>
        ${chgBadge(ytdChg)}
      </div>
    </div>`;
  };

  // Spot: label on top, sparkline + value + change on bottom row
  const mkSpot = (label, s, color) => {
    if (!s) return '';
    const chg = parseFloat(pctChg(s));
    return `<div class="indicator">
      <span class="indicator-label">${label}</span>
      <div class="indicator-row">
        ${spark(s.hourly_prices_24h, color)}
        <span class="indicator-value">$${s.last_trade.toFixed(2)}</span>
        ${chgBadge(chg)}
      </div>
    </div>`;
  };

  // Metric: label on top, value + sub-badge on bottom row
  const mkMetric = (label, value, sub, subCls) => {
    return `<div class="indicator">
      <span class="indicator-label">${label}</span>
      <div class="indicator-row">
        <span class="indicator-value">${value}</span>
        ${sub ? `<span class="indicator-sub ${subCls||''}">${sub}</span>` : ''}
      </div>
    </div>`;
  };

  // Derived data
  const leadKeys = Object.keys(mi.flagship_lead_time_weeks||{}).sort();
  const lead = mi.flagship_lead_time_weeks?.[leadKeys[leadKeys.length-1]] ?? '--';
  const leadTag = (typeof lead === 'number' && lead <= 2) ? ['AVAILABLE','tag-green'] : (typeof lead === 'number' && lead <= 8) ? ['MODERATE','tag-amber'] : ['CONSTRAINED','tag-red'];

  const shipKeys = Object.keys(mi.data_center_gpu_shipments_k).sort();
  const latestShip = mi.data_center_gpu_shipments_k[shipKeys[shipKeys.length-1]];

  const amdKeys = Object.keys(mi.amd_gpu_market_share_pct).sort();
  const amdShare = mi.amd_gpu_market_share_pct[amdKeys[amdKeys.length-1]];

  const totalVol = spot ? Object.values(spot).reduce((s,g) => s + (g['24h_volume_gpu_hrs']||0), 0) : 0;

  const div = '<div class="indicator-divider"></div>';

  tb.innerHTML =
    mkStock('NVDA', mi.nvidia_stock.current, mi.nvidia_stock.ytd_change) +
    mkStock('AMD', mi.amd_stock.current, mi.amd_stock.ytd_change) +
    div +
    mkSpot('B200 SPOT', spot?.['B200'], '#a78bfa') +
    mkSpot('H200 SPOT', spot?.['H200'], '#4e8ff7') +
    mkSpot('H100 SPOT', spot?.['H100-SXM'], '#22d3ee') +
    div +
    mkMetric('AI CAPEX \'26', '$'+mi.ai_capex_bn['2026_est']+'B', '+40% YoY', 'up') +
    mkMetric('GPU MKT', '$'+mi.gpu_market_size_bn['2025']+'B', '+35%', 'up') +
    div +
    mkMetric('B200 LEAD', lead+'wk', leadTag[0], leadTag[1]) +
    mkMetric('AMD DC', amdShare+'%', 'mkt share', '') +
    mkMetric('SPOT VOL', (totalVol/1000).toFixed(0)+'K hrs', '', '');
}

// ════════════════════════════════════════════════════════════════
// NEWS
// ════════════════════════════════════════════════════════════════
function renderNewsBanner() {
  const news = DATA.news;
  if (!news || !news.length) return;
  const items = [...news, ...news];
  document.getElementById('newsScroll').innerHTML = items.map(n =>
    `<span class="news-entry">
      <span class="news-src">${n.source}</span>
      <span class="news-txt">${n.headline}</span>
      <span class="news-tag news-tag-${n.impact}">${n.impact}</span>
    </span>`
  ).join('');
}

// ════════════════════════════════════════════════════════════════
// OVERVIEW
// ════════════════════════════════════════════════════════════════
function renderOverview() {
  const m = DATA.matrix, mi = DATA.indicators, spot = DATA.spot;
  if (!m || !m.length) return;

  // KPI calculations
  const b200s = spot?.['B200'], h200s = spot?.['H200'], h100s = spot?.['H100-SXM'];
  const totalVol = spot ? Object.values(spot).reduce((s,g) => s + (g['24h_volume_gpu_hrs']||0), 0) : 0;
  const totalAvail = spot ? Object.values(spot).reduce((s,g) => s + (g.available_gpus||0), 0) : 0;
  const mktSize = mi.gpu_market_size_bn?.['2025'] || '--';
  const capex26 = mi.ai_capex_bn?.['2026_est'] || '--';
  const leadKeys = Object.keys(mi.flagship_lead_time_weeks||{}).sort();
  const lead = mi.flagship_lead_time_weeks?.[leadKeys[leadKeys.length-1]] ?? '--';
  const bestVal = m.reduce((a,b) => a.flops_per_dollar > b.flops_per_dollar ? a : b);
  const nProv = new Set(m.map(r => r.cheapest_provider)).size;

  const kpi = (cls, label, val, sub) => `<div class="kpi kpi-${cls}"><div class="kpi-label">${label}</div><div class="kpi-value">${val}</div><div class="kpi-sub">${sub}</div></div>`;

  document.getElementById('overviewKpis').innerHTML =
    kpi('purple', 'B200 Spot', '$'+(b200s?.last_trade?.toFixed(2)||'--')+'/hr', `Spread ${b200s?.spread_pct||'--'}% &middot; Vol ${(b200s?.['24h_volume_gpu_hrs']||0).toLocaleString()} hrs`) +
    kpi('blue', 'H200 Spot', '$'+(h200s?.last_trade?.toFixed(2)||'--')+'/hr', `Bid $${h200s?.bid||'--'} / Ask $${h200s?.ask||'--'} &middot; <span class="up">${h200s?.available_gpus?.toLocaleString()||0} avail</span>`) +
    kpi('cyan', 'Spot Volume (24h)', (totalVol/1000).toFixed(0)+'K GPU-hrs', `${totalAvail.toLocaleString()} GPUs available across ${nProv} providers`) +
    kpi('green', 'GPU Market 2025', '$'+mktSize+'B', `AI CapEx \'26E: <span class="up">$${capex26}B</span> (+40% YoY)`) +
    kpi('amber', 'Flagship Lead Time', lead+' wk', (typeof lead === 'number' && lead <= 2) ? '<span class="up">Supply normalized</span>' : '<span class="dn">Constrained</span>') +
    kpi('red', 'Best Value GPU', bestVal.flops_per_dollar+' TFLOPS/$', `${bestVal.name} @ $${bestVal.cheapest_price.toFixed(2)}/hr`);

  renderOverviewSpotTable();
  renderOverviewTrendChart();
  renderMarketSizeChart();
  renderOverviewShipmentsChart();
  renderOverviewLeadChart();
  renderOverviewTable();
}

function renderOverviewSpotTable() {
  const spot = DATA.spot;
  if (!spot || !Object.keys(spot).length) return;
  const gpus = ['B200','H200','H100-SXM','A100-80GB','MI300X','RTX-4090'];
  let h = '<thead><tr><th>GPU</th><th class="r">Bid</th><th class="r">Ask</th><th class="r">Last</th><th class="r">Spread</th><th class="r">24h Low</th><th class="r">24h High</th><th class="r">24h Vol</th><th class="r">Avail</th><th>24h Trend</th></tr></thead><tbody>';
  gpus.forEach(g => {
    const s = spot[g]; if (!s) return;
    const prices = s.hourly_prices_24h||[];
    const chg = prices.length > 1 ? ((prices[prices.length-1]-prices[0])/prices[0]*100).toFixed(1) : 0;
    const chgCls = chg >= 0 ? 'c-green' : 'c-red';
    const chgSign = chg > 0 ? '+' : '';
    // Mini inline SVG sparkline
    let sparkSvg = '';
    if (prices.length > 1) {
      const mn=Math.min(...prices), mx=Math.max(...prices), rng=mx-mn||1;
      const clr = chg >= 0 ? '#34d399' : '#f87171';
      const pts = prices.map((p,i) => `${(i/(prices.length-1))*60},${18-((p-mn)/rng)*16-1}`).join(' ');
      sparkSvg = `<svg width="60" height="18" style="vertical-align:middle;"><polyline points="${pts}" fill="none" stroke="${clr}" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
    }
    h += `<tr><td class="gpu-name">${g}</td><td class="r">$${s.bid.toFixed(2)}</td><td class="r">$${s.ask.toFixed(2)}</td><td class="r fw">$${s.last_trade.toFixed(2)}</td><td class="r ${s.spread_pct > 15 ? 'c-red' : s.spread_pct > 10 ? 'c-amber' : 'c-green'}">${s.spread_pct}%</td><td class="r">$${s['24h_low'].toFixed(2)}</td><td class="r">$${s['24h_high'].toFixed(2)}</td><td class="r">${s['24h_volume_gpu_hrs'].toLocaleString()}</td><td class="r">${s.available_gpus.toLocaleString()}</td><td>${sparkSvg} <span class="${chgCls}" style="font-size:10px;">${chgSign}${chg}%</span></td></tr>`;
  });
  h += '</tbody>';
  document.getElementById('overviewSpotTable').innerHTML = h;
}

function renderOverviewTrendChart() {
  const hist = DATA.historical;
  const gpus = ['B200','H200','H100-SXM','A100-80GB','MI300X','RTX-4090'];
  const ap = new Set();
  gpus.forEach(g => { if(hist[g]) Object.keys(hist[g]).forEach(p => ap.add(p)); });
  const periods = [...ap].sort().slice(-12);
  const ds = gpus.map((g,i) => ({
    label:g, data:periods.map(p => hist[g]?.[p]?.avg||null),
    borderColor:CL[i], backgroundColor:CL[i]+'18', tension:0.35,
    pointRadius:2, borderWidth:2, fill:false, spanGaps:true,
  }));
  if(charts.ot) charts.ot.destroy();
  charts.ot = new Chart(document.getElementById('chartOverviewTrends'),{
    type:'line', data:{labels:periods, datasets:ds},
    options:{responsive:true, maintainAspectRatio:false,
      plugins:{legend:{position:'top'}},
      scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}
    }
  });
}

function renderMarketSizeChart() {
  const mi=DATA.indicators; if(!mi.gpu_market_size_bn) return;
  const mkt=mi.gpu_market_size_bn, capex=mi.ai_capex_bn;
  const yrs=['2023','2024','2025','2026','2027'];
  const yrLabels = yrs.map(y => (mkt[y+'_est']||capex[y+'_est']) ? y+'E' : y);
  if(charts.ms) charts.ms.destroy();
  charts.ms = new Chart(document.getElementById('chartMarketSize'),{
    type:'bar',
    data:{labels:yrLabels, datasets:[
      {label:'GPU Market ($B)',data:yrs.map(y=>mkt[y]||mkt[y+'_est']||null),backgroundColor:C.cyan+'70',borderColor:C.cyan,borderWidth:1},
      {label:'AI CapEx ($B)',data:yrs.map(y=>capex[y]||capex[y+'_est']||null),backgroundColor:C.purple+'70',borderColor:C.purple,borderWidth:1}
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},
      scales:{y:{title:{display:true,text:'$B'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });
}

function renderOverviewShipmentsChart() {
  const mi = DATA.indicators; if(!mi.data_center_gpu_shipments_k) return;
  const s = mi.data_center_gpu_shipments_k, lbl = Object.keys(s).sort();
  if(charts.ovShip) charts.ovShip.destroy();
  charts.ovShip = new Chart(document.getElementById('chartOverviewShipments'),{
    type:'bar',
    data:{labels:lbl, datasets:[{label:'DC GPU Shipments (K)',data:lbl.map(l=>s[l]),backgroundColor:C.cyan+'50',borderColor:C.cyan,borderWidth:1,borderRadius:3}]},
    options:{responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}},
      scales:{y:{grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false},ticks:{maxRotation:45}}}}
  });
}

function renderOverviewLeadChart() {
  const mi = DATA.indicators; if(!mi.flagship_lead_time_weeks) return;
  const lt = mi.flagship_lead_time_weeks, lbl = Object.keys(lt).sort();
  if(charts.ovLead) charts.ovLead.destroy();
  charts.ovLead = new Chart(document.getElementById('chartOverviewLead'),{
    type:'line',
    data:{labels:lbl, datasets:[{label:'Flagship Lead (wks)',data:lbl.map(l=>lt[l]),
      borderColor:C.amber,backgroundColor:C.amber+'20',fill:true,tension:0.3,pointRadius:2,borderWidth:2}]},
    options:{responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}},
      scales:{y:{title:{display:true,text:'weeks'},grid:{color:'rgba(26,34,51,0.4)'},reverse:false},x:{grid:{display:false},ticks:{maxRotation:45}}}}
  });
}

function renderOverviewTable() {
  const m = DATA.matrix, hist = DATA.historical;

  // SVG sparkline helper
  const spark = (prices, w=52, h=16) => {
    if (!prices || prices.length < 2) return '<span class="dim">—</span>';
    const mn = Math.min(...prices), mx = Math.max(...prices), rng = mx - mn || 1;
    const pts = prices.map((p,i) => `${(i/(prices.length-1))*w},${h-((p-mn)/rng)*(h-2)-1}`).join(' ');
    const clr = prices[prices.length-1] <= prices[0] ? 'var(--green)' : 'var(--red)';
    return `<svg width="${w}" height="${h}" style="vertical-align:middle;"><polyline points="${pts}" fill="none" stroke="${clr}" stroke-width="1.5"/></svg>`;
  };

  // Price bar helper — visual range indicator
  const priceBar = (low, avg, high) => {
    if (!high || high === low) return '';
    const pct = ((avg - low) / (high - low)) * 100;
    return `<div style="width:60px;height:4px;background:var(--bg-4);border-radius:2px;display:inline-block;vertical-align:middle;margin-left:6px;position:relative;">` +
      `<div style="position:absolute;left:0;top:0;height:100%;width:100%;border-radius:2px;background:linear-gradient(90deg,var(--green),var(--amber),var(--red));opacity:0.3;"></div>` +
      `<div style="position:absolute;left:${pct}%;top:-2px;width:3px;height:8px;background:var(--text-0);border-radius:1px;transform:translateX(-50%);"></div></div>`;
  };

  let h = '<thead><tr><th>GPU</th><th class="r">VRAM</th><th class="r">From</th><th class="r">Avg</th><th class="r">To</th><th>Range</th><th class="r">Providers</th><th class="r">MoM</th><th class="r">TFLOPS/$</th><th>6mo</th></tr></thead><tbody>';
  m.forEach(r => {
    const mc = r.monthly_change_pct < 0 ? 'c-green' : r.monthly_change_pct > 0 ? 'c-red' : '';
    const momSign = r.monthly_change_pct > 0 ? '+' : '';
    // Get trend data
    const hd = hist[r.gpu_id] || {};
    const periods = Object.keys(hd).sort().slice(-6);
    const trend = periods.map(p => hd[p]?.avg).filter(v => v != null);

    h += `<tr>` +
      `<td class="gpu-name">${r.name}</td>` +
      `<td class="r">${r.vram_gb}GB</td>` +
      `<td class="r c-green fw">$${r.cheapest_price.toFixed(2)}</td>` +
      `<td class="r fw">$${r.avg_price.toFixed(2)}</td>` +
      `<td class="r c-red">$${r.most_expensive.toFixed(2)}</td>` +
      `<td>${priceBar(r.cheapest_price, r.avg_price, r.most_expensive)}</td>` +
      `<td class="r c-cyan">${r.num_providers}</td>` +
      `<td class="r ${mc}">${momSign}${r.monthly_change_pct}%</td>` +
      `<td class="r c-purple">${r.flops_per_dollar}</td>` +
      `<td>${spark(trend)}</td>` +
      `</tr>`;
  });
  h += '</tbody>';
  document.getElementById('overviewTopTable').innerHTML = h;
}

// ════════════════════════════════════════════════════════════════
// PRICE MATRIX
// ════════════════════════════════════════════════════════════════
function renderPriceMatrix() {
  const m = DATA.matrix;
  const pd = DATA.providers;

  // Define provider columns in display order
  const cloudProvs = ['AWS','GCP','Azure','Lambda','CoreWeave','Oracle','Together'];
  const mktProvs = ['RunPod','Vast.ai','FluidStack'];
  const cloudLabels = ['AWS','GCP','Azure','Lambda','CoreW.','Oracle','Tog.'];
  const mktLabels = ['RunPod','Vast.ai','Fluid.'];

  // Build two-row header
  let h = '<thead>';
  // Row 1: group headers
  h += '<tr><th rowspan="2">GPU</th><th rowspan="2" class="r">VRAM</th>';
  h += `<th colspan="${cloudProvs.length}" class="pg-cloud-hdr">Cloud Providers</th>`;
  h += '<th rowspan="2" class="pg-divider"></th>';
  h += `<th colspan="${mktProvs.length}" class="pg-mkt-hdr">Marketplaces</th>`;
  h += '<th rowspan="2" class="r pg-best">Best $/hr</th></tr>';
  // Row 2: individual provider names
  h += '<tr>';
  cloudLabels.forEach(l => { h += `<th class="pg-prov-th">${l}</th>`; });
  mktLabels.forEach(l => { h += `<th class="pg-prov-th">${l}</th>`; });
  h += '</tr></thead><tbody>';

  m.forEach(r => {
    const gpuId = r.gpu_id;
    // Gather all prices for this GPU across providers
    const allPrices = [];
    const prices = {};
    [...cloudProvs,...mktProvs].forEach(prov => {
      const g = pd[prov]?.gpus?.[gpuId];
      if (g) {
        prices[prov] = g.price_per_gpu_hr;
        allPrices.push(g.price_per_gpu_hr);
      }
    });
    const minP = allPrices.length ? Math.min(...allPrices) : null;
    const maxP = allPrices.length > 1 ? Math.max(...allPrices) : null;

    h += `<tr><td class="gpu-name">${r.name}</td><td class="r">${r.vram_gb}GB</td>`;
    // Cloud columns
    cloudProvs.forEach(prov => {
      if (prices[prov] != null) {
        const cls = prices[prov] === minP ? 'pg-cell-best' : (prices[prov] === maxP ? 'pg-cell-worst' : '');
        const tc = prices[prov] === minP ? ' c-green fw' : '';
        h += `<td class="r ${cls}${tc}">$${prices[prov].toFixed(2)}</td>`;
      } else {
        h += '<td class="pg-cell-na">—</td>';
      }
    });
    // Divider
    h += '<td class="pg-divider"></td>';
    // Marketplace columns
    mktProvs.forEach(prov => {
      if (prices[prov] != null) {
        const cls = prices[prov] === minP ? 'pg-cell-best' : (prices[prov] === maxP ? 'pg-cell-worst' : '');
        const tc = prices[prov] === minP ? ' c-green fw' : '';
        h += `<td class="r ${cls}${tc}">$${prices[prov].toFixed(2)}</td>`;
      } else {
        h += '<td class="pg-cell-na">—</td>';
      }
    });
    // Best column with MoM
    const mc = r.monthly_change_pct < 0 ? 'c-green' : 'c-red';
    const momStr = `${r.monthly_change_pct > 0 ? '+' : ''}${r.monthly_change_pct}%`;
    h += `<td class="r pg-best c-green fw">$${r.cheapest_price.toFixed(2)} <span class="${mc}" style="font-size:10px;font-weight:400;">${momStr}</span></td>`;
    h += '</tr>';
  });
  h += '</tbody>';
  document.getElementById('priceMatrixTable').innerHTML = h;

  // Charts remain unchanged
  if(charts.pd) charts.pd.destroy();
  charts.pd = new Chart(document.getElementById('chartPriceDist'),{type:'bar',
    data:{labels:m.map(r=>r.gpu_id),datasets:[
      {label:'Best',data:m.map(r=>r.cheapest_price),backgroundColor:C.green+'80',borderColor:C.green,borderWidth:1},
      {label:'Avg',data:m.map(r=>r.avg_price),backgroundColor:C.amber+'80',borderColor:C.amber,borderWidth:1},
      {label:'Max',data:m.map(r=>r.most_expensive),backgroundColor:C.red+'50',borderColor:C.red,borderWidth:1},
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},
      scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });

  if(charts.fpd) charts.fpd.destroy();
  charts.fpd = new Chart(document.getElementById('chartFlopsPerDollar'),{type:'bar',
    data:{labels:m.map(r=>r.gpu_id),datasets:[{label:'FP16 TFLOPS/$',data:m.map(r=>r.flops_per_dollar),
      backgroundColor:m.map((_,i)=>CL[i%CL.length]+'70'),borderColor:m.map((_,i)=>CL[i%CL.length]),borderWidth:1}]},
    options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},
      scales:{x:{title:{display:true,text:'TFLOPS/$'},grid:{color:'rgba(26,34,51,0.4)'}},y:{grid:{display:false}}}}
  });
}

// ════════════════════════════════════════════════════════════════
// TRENDS
// ════════════════════════════════════════════════════════════════
function renderTrendsTab() {
  updateTrendChart();
  renderPriceIndexChart();
  renderDecayChart();
  renderMarketSupplyChart();
}

function renderPriceIndexChart() {
  const hist=DATA.historical, gpus=Object.keys(hist);
  const ap=new Set(); gpus.forEach(g=>Object.keys(hist[g]).forEach(p=>ap.add(p)));
  const periods=[...ap].sort();
  const means=periods.map(p=>{
    const vals=gpus.map(g=>hist[g]?.[p]?.avg).filter(v=>v!=null);
    return vals.length? vals.reduce((a,b)=>a+b,0)/vals.length : null;
  });
  if(charts.pi) charts.pi.destroy();
  charts.pi = new Chart(document.getElementById('chartPriceIndex'),{type:'line',
    data:{labels:periods,datasets:[{label:'Market Mean $/hr',data:means,borderColor:C.cyan,backgroundColor:C.cyan+'18',fill:true,tension:0.35,borderWidth:2,pointRadius:2}]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},title:{display:true,text:'Mean GPU Price Across All Models',color:C.cyan,font:{size:12}}},
      scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });
}

function updateTrendChart() {
  const sel=document.getElementById('trendGpuSelect');
  const gpuId=sel.value; const hist=DATA.historical[gpuId]; if(!hist) return;
  const p=Object.keys(hist).sort();
  if(charts.tr) charts.tr.destroy();
  charts.tr = new Chart(document.getElementById('chartTrends'),{type:'line',
    data:{labels:p,datasets:[
      {label:'Average',data:p.map(k=>hist[k].avg),borderColor:C.cyan,backgroundColor:C.cyan+'18',fill:true,tension:0.35,borderWidth:2},
      {label:'Min',data:p.map(k=>hist[k].min),borderColor:C.green,borderDash:[5,5],tension:0.35,borderWidth:1,pointRadius:0},
      {label:'Max',data:p.map(k=>hist[k].max),borderColor:C.red,borderDash:[5,5],tension:0.35,borderWidth:1,pointRadius:0},
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:gpuId+' Price Band ($/hr)',color:C.cyan,font:{size:12}}},scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });
}

function renderDecayChart() {
  const hist=DATA.historical, gpus=Object.keys(hist);
  const ds=[];
  gpus.forEach((g,i)=>{
    const periods=Object.keys(hist[g]).sort();
    if(periods.length<6) return;
    const base=hist[g][periods[0]].avg;
    if(!base) return;
    const pts=periods.map((p,j)=>({x:j,y:(hist[g][p].avg/base)*100}));
    ds.push({label:g,data:pts,borderColor:CL[i%CL.length],tension:0.35,pointRadius:1.5,borderWidth:2,fill:false});
  });
  if(charts.dc) charts.dc.destroy();
  charts.dc = new Chart(document.getElementById('chartDecay'),{type:'line',
    data:{datasets:ds},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}}},
      scales:{x:{type:'linear',title:{display:true,text:'Months Since Launch'},ticks:{stepSize:6},grid:{display:false}},
        y:{title:{display:true,text:'% of Launch Price'},grid:{color:'rgba(26,34,51,0.4)'}}}}
  });
}

function renderMarketSupplyChart() {
  const mi=DATA.indicators;
  const ship=mi.data_center_gpu_shipments_k, amd=mi.amd_gpu_market_share_pct;
  if(!ship) return;
  const qMap={'Q1':'01','Q2':'04','Q3':'07','Q4':'10'};
  const sLbl=Object.keys(ship).sort();
  const monthLabels=sLbl.map(q=>{const[y,qn]=q.split('-');return y+'-'+qMap[qn];});
  const amdVals=monthLabels.map(m=>{
    if(!amd) return null;
    const keys=Object.keys(amd).sort();
    let best=null,bestDist=Infinity;
    keys.forEach(k=>{const d=Math.abs(new Date(k+'-01')-new Date(m+'-01'));if(d<bestDist){bestDist=d;best=k;}});
    return best?amd[best]:null;
  });
  if(charts.sc) charts.sc.destroy();
  charts.sc = new Chart(document.getElementById('chartMarketSupply'),{type:'bar',
    data:{labels:monthLabels,datasets:[
      {label:'GPU Shipments (K)',data:sLbl.map(l=>ship[l]),backgroundColor:C.cyan+'60',borderColor:C.cyan,borderWidth:1,yAxisID:'y',order:2},
      {label:'AMD Share %',data:amdVals,type:'line',borderColor:C.red,backgroundColor:C.red+'18',fill:false,tension:0.35,borderWidth:2,pointRadius:3,yAxisID:'y1',order:1}
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}}},
      scales:{y:{title:{display:true,text:'Shipments (K)'},grid:{color:'rgba(26,34,51,0.4)'}},
        y1:{position:'right',max:30,title:{display:true,text:'AMD Share %'},grid:{display:false}},
        x:{grid:{display:false}}}}
  });
}

// ════════════════════════════════════════════════════════════════
// PROVIDERS
// ════════════════════════════════════════════════════════════════
function renderProvidersTab() { updateProviderView(); }

function updateProviderView() {
  const sel0=document.getElementById('providerGpuSelect');
  if(!sel0.value){
    const pd=DATA.providers, hasMkt=g=>Object.values(pd).some(p=>p.type==='marketplace'&&p.gpus?.[g]);
    const best=[...sel0.options].find(o=>hasMkt(o.value));
    if(best) sel0.value=best.value;
  }
  const gpuId = sel0.value || 'H100-SXM';
  document.getElementById('providerChartTitle').textContent = `Price Comparison — ${gpuId}`;
  const pd = DATA.providers;
  const rows = [];
  for(const [prov,p] of Object.entries(pd)){
    if(p.gpus&&p.gpus[gpuId]){
      const g=p.gpus[gpuId]; const spot=g.price_per_gpu_hr*(1-p.spot_discount);
      const r1=g.price_per_gpu_hr*(1-p.reserved_1yr_discount); const r3=g.price_per_gpu_hr*(1-p.reserved_3yr_discount);
      rows.push({provider:prov,name:p.provider_name,type:p.type||'cloud',instance:g.instance,ondemand:g.price_per_gpu_hr,
        spot:p.spot_discount>0?spot:null,res1:r1,res3:r3,monthly:g.price_per_gpu_hr*730,regions:g.regions||{},spot_discount:p.spot_discount});
    }
  }
  rows.sort((a,b)=>a.ondemand-b.ondemand);

  const cloudRows = rows.filter(r => r.type === 'cloud');
  const mktRows = rows.filter(r => r.type === 'marketplace');

  // Horizontal range bars: best price → on-demand per provider
  if(charts.pv) charts.pv.destroy();
  const rangeData=rows.map(r=>{
    const best=Math.min(r.ondemand, r.spot||Infinity, r.res3||Infinity, r.res1||Infinity);
    return [+best.toFixed(3), +r.ondemand.toFixed(3)];
  });
  charts.pv = new Chart(document.getElementById('chartProviders'),{type:'bar',
    data:{labels:rows.map(r=>r.provider),datasets:[{label:'Price Range $/hr',data:rangeData,
      backgroundColor:rows.map(r=> r.type==='marketplace' ? C.amber+'60' : C.cyan+'60'),
      borderColor:rows.map(r=> r.type==='marketplace' ? C.amber : C.cyan),borderWidth:1,borderSkipped:false
    }]},
    options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},
      tooltip:{callbacks:{
        label:(ctx)=>{const r=rows[ctx.dataIndex],d=ctx.raw;return `Best: $${d[0].toFixed(2)} → On-Demand: $${d[1].toFixed(2)}`;},
        afterLabel:(ctx)=>{const r=rows[ctx.dataIndex];const save=((1-ctx.raw[0]/ctx.raw[1])*100);return (r.type==='marketplace'?'Marketplace':'Cloud')+(save>0?' · Save up to '+save.toFixed(0)+'%':'');}
      }}},
      scales:{x:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},y:{grid:{display:false}}}}
  });

  // Grouped bar: on-demand/spot/reserved
  if(charts.pt) charts.pt.destroy();
  charts.pt = new Chart(document.getElementById('chartPriceTypes'),{type:'bar',
    data:{labels:rows.map(r=>r.provider),datasets:[
      {label:'On-Demand',data:rows.map(r=>r.ondemand),backgroundColor:C.amber+'70',borderColor:C.amber,borderWidth:1},
      {label:'Spot',data:rows.map(r=>r.spot||0),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
      {label:'1yr Reserved',data:rows.map(r=>r.res1),backgroundColor:C.blue+'70',borderColor:C.blue,borderWidth:1},
      {label:'3yr Reserved',data:rows.map(r=>r.res3),backgroundColor:C.purple+'70',borderColor:C.purple,borderWidth:1},
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });

  // Render cloud table
  const renderProvTable = (tableRows, elId) => {
    const best = tableRows[0]?.ondemand || 1;
    let h=`<thead><tr><th>Provider</th><th>Instance</th><th class="r">On-Demand</th><th class="r">Spot</th><th class="r">1yr Res.</th><th class="r">3yr Res.</th><th class="r">Monthly</th><th class="r">Annual</th><th class="r">vs Best</th><th>Regions</th></tr></thead><tbody>`;
    if(!tableRows.length) { h += '<tr><td colspan="10" class="dim" style="text-align:center;padding:20px;">No providers offer this GPU</td></tr>'; }
    tableRows.forEach(r=>{
      const prem=((r.ondemand-best)/best*100);
      const pc=prem===0?'c-green':'c-red';
      h+=`<tr><td style="color:${PC[r.provider]||C.blue};font-weight:700;">${r.provider}</td><td class="dim">${r.instance}</td><td class="r c-green fw">$${r.ondemand.toFixed(2)}</td><td class="r" style="color:var(--green)">${r.spot?'$'+r.spot.toFixed(2):'—'}</td><td class="r">$${r.res1.toFixed(2)}</td><td class="r c-cyan">$${r.res3.toFixed(2)}</td><td class="r">$${r.monthly.toFixed(0)}</td><td class="r">$${(r.monthly*12).toFixed(0)}</td><td class="r ${pc}">${prem===0?'BEST':'+'+prem.toFixed(1)+'%'}</td><td class="dim" style="font-size:10px;">${Object.keys(r.regions).join(', ')}</td></tr>`;
    });
    h+='</tbody>';
    document.getElementById(elId).innerHTML=h;
  };

  renderProvTable(cloudRows, 'providerCloudTable');
  renderProvTable(mktRows, 'providerMktTable');

  // If marketplace table is empty, show which GPUs are available
  if(!mktRows.length){
    const mktGpus=new Set();
    Object.values(DATA.providers).forEach(p=>{if(p.type==='marketplace'&&p.gpus)Object.keys(p.gpus).forEach(g=>mktGpus.add(g));});
    if(mktGpus.size){
      const links=[...mktGpus].sort().map(g=>`<a href="#" style="color:var(--amber);text-decoration:underline;cursor:pointer;" onclick="event.preventDefault();document.getElementById('providerGpuSelect').value='${g}';updateProviderView();">${g}</a>`);
      document.querySelector('#providerMktTable tbody').innerHTML=`<tr><td colspan="10" class="dim" style="text-align:center;padding:20px;">No marketplace providers offer <strong>${gpuId}</strong>. Try: ${links.join(', ')}</td></tr>`;
    }
  }
}

// ════════════════════════════════════════════════════════════════
// REGIONAL
// ════════════════════════════════════════════════════════════════
function renderRegionalTab() {
  const reg=DATA.regional; if(!reg||!Object.keys(reg).length) return;
  const regions=Object.keys(reg), rd=Object.values(reg);

  if(charts.rs) charts.rs.destroy();
  charts.rs = new Chart(document.getElementById('chartRegionShare'),{type:'doughnut',
    data:{labels:regions,datasets:[{data:rd.map(r=>r.market_share_pct),backgroundColor:CL.slice(0,regions.length).map(c=>c+'80'),borderColor:CL.slice(0,regions.length),borderWidth:2}]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'right'}}}
  });

  if(charts.rg) charts.rg.destroy();
  charts.rg = new Chart(document.getElementById('chartRegionGrowth'),{type:'bar',
    data:{labels:regions,datasets:[{label:'YoY Growth %',data:rd.map(r=>r.yoy_growth_pct),backgroundColor:rd.map((_,i)=>CL[i]+'70'),borderColor:rd.map((_,i)=>CL[i]),borderWidth:1}]},
    options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{title:{display:true,text:'YoY Growth %'},grid:{color:'rgba(26,34,51,0.4)'}},y:{grid:{display:false}}}}
  });

  let cHtml='';
  const maxDemand=Math.max(...rd.map(r=>r.gpu_demand_index));
  regions.forEach((r,i) => {
    const d=reg[r], demandPct=(d.gpu_demand_index/maxDemand*100).toFixed(0);
    const premColor=d.avg_price_premium_pct===0?'var(--green)':d.avg_price_premium_pct<=15?'var(--amber)':'var(--red)';
    cHtml += `<div class="region-tile" style="border-left:3px solid ${CL[i]}">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
        <div class="region-tile-name" style="margin-bottom:0;">${r}</div>
        <span style="font-size:10px;font-weight:700;color:${CL[i]};">${d.market_share_pct}%</span>
      </div>
      <div style="height:4px;background:var(--bg-3);border-radius:2px;margin-bottom:8px;"><div style="height:100%;width:${demandPct}%;background:${CL[i]};border-radius:2px;"></div></div>
      <div class="region-row"><span class="region-row-k">Growth</span><span class="region-row-v" style="color:var(--green)">+${d.yoy_growth_pct}%</span></div>
      <div class="region-row"><span class="region-row-k">Demand</span><span class="region-row-v">${d.gpu_demand_index}<span class="dim">/100</span></span></div>
      <div class="region-row"><span class="region-row-k">Premium</span><span class="region-row-v" style="color:${premColor}">${d.avg_price_premium_pct===0?'Baseline':'+'+d.avg_price_premium_pct+'%'}</span></div>
      <div class="region-row"><span class="region-row-k">Energy</span><span class="region-row-v">$${d.energy_cost_kwh}<span class="dim">/kWh</span></span></div>
      <div style="margin-top:4px;font-size:9px;color:var(--text-3);">${d.top_providers.slice(0,3).join(' · ')}</div>
    </div>`;
  });
  document.getElementById('regionCards').innerHTML = cHtml;

  renderRegionalPricingTable(reg, regions);
  renderRegionAdoptionChart(reg, regions);
}

function renderRegionalPricingTable(reg, regions) {
  const gs=new Set(); regions.forEach(r=>{const gp=reg[r].gpu_pricing;if(gp)Object.keys(gp).forEach(g=>gs.add(g));});
  const gpus=[...gs];
  // Find cheapest low price per GPU
  const cheapest={};
  gpus.forEach(g=>{let min=Infinity; regions.forEach(r=>{const p=reg[r].gpu_pricing?.[g];if(p&&p.low<min) min=p.low;}); cheapest[g]=min;});
  let h='<thead><tr><th>Region</th>';
  gpus.forEach(g=>{h+=`<th class="r">${g} Low</th><th class="r">${g} High</th>`;});
  h+='</tr></thead><tbody>';
  regions.forEach((r,i)=>{
    const gp=reg[r].gpu_pricing||{};
    h+=`<tr><td style="color:${CL[i]};font-weight:700;">${r}</td>`;
    gpus.forEach(g=>{
      if(gp[g]){
        const isBest=gp[g].low<=cheapest[g];
        h+=`<td class="r" style="color:var(--green);${isBest?'font-weight:700;background:rgba(52,211,153,0.08);':''}">$${gp[g].low.toFixed(2)}${isBest?' ★':''}</td><td class="r" style="color:var(--red);">$${gp[g].high.toFixed(2)}</td>`;
      } else h+='<td class="r dim">--</td><td class="r dim">--</td>';
    });
    h+='</tr>';
  });
  h+='</tbody>';
  document.getElementById('regionalPricingTable').innerHTML=h;
}

function renderRegionAdoptionChart(reg, regions) {
  const ap=new Set(); regions.forEach(r=>{const at=reg[r].adoption_trend_monthly;if(at)Object.keys(at).forEach(p=>ap.add(p));});
  const periods=[...ap].sort();
  const ds=regions.map((r,i)=>({label:r,data:periods.map(p=>reg[r].adoption_trend_monthly?.[p]||null),borderColor:CL[i],tension:0.35,pointRadius:2,borderWidth:2,fill:false,spanGaps:true}));
  if(charts.ra) charts.ra.destroy();
  charts.ra = new Chart(document.getElementById('chartRegionAdoption'),{type:'line',data:{labels:periods,datasets:ds},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}}},scales:{y:{title:{display:true,text:'Market Share %'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });
}

// ════════════════════════════════════════════════════════════════
// WORKLOADS
// ════════════════════════════════════════════════════════════════
function renderWorkloadsTab() {
  const wl=DATA.workloads; if(!wl) return;
  let h=`<thead><tr><th>Workload</th><th>Recommended GPUs</th><th class="r">Min GPUs</th><th class="r">Budget/mo Low</th><th class="r">Budget/mo High</th><th>Best Value</th></tr></thead><tbody>`;
  const labels=[],lows=[],highs=[];
  for(const [name,rec] of Object.entries(wl)){
    labels.push(name); lows.push(rec.budget_monthly_low); highs.push(rec.budget_monthly_high);
    h+=`<tr><td class="gpu-name">${name}</td><td>${rec.recommended.join(', ')}</td><td class="r">${rec.min_gpus}</td><td class="r c-green">$${rec.budget_monthly_low.toLocaleString()}</td><td class="r c-red">$${rec.budget_monthly_high.toLocaleString()}</td><td class="c-cyan">${rec.best_value}</td></tr>`;
  }
  h+='</tbody>';
  document.getElementById('workloadTable').innerHTML=h;
  if(charts.wc) charts.wc.destroy();
  charts.wc = new Chart(document.getElementById('chartWorkloadCost'),{type:'bar',
    data:{labels,datasets:[
      {label:'Low Budget',data:lows,backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
      {label:'High Budget',data:highs,backgroundColor:C.red+'50',borderColor:C.red,borderWidth:1},
    ]},
    options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},
      scales:{x:{type:'logarithmic',title:{display:true,text:'$/month (log)'},grid:{color:'rgba(26,34,51,0.4)'}},y:{grid:{display:false}}}}
  });
}

// ════════════════════════════════════════════════════════════════
// COST CALCULATOR
// ════════════════════════════════════════════════════════════════
function calcCost() {
  const gpuId=document.getElementById('calcGpu').value;
  const provId=document.getElementById('calcProvider').value;
  const numGpus=parseInt(document.getElementById('calcGpus').value)||1;
  const hrsDay=parseInt(document.getElementById('calcHours').value)||24;
  if(!gpuId||!DATA.providers[provId]?.gpus?.[gpuId]){
    document.getElementById('calcResult').innerHTML='<span class="dim">Select GPU and provider</span>'; return;
  }
  const pd=DATA.providers[provId], g=pd.gpus[gpuId], hr=g.price_per_gpu_hr;
  const daily=hr*hrsDay*numGpus, monthly=daily*30, yearly=daily*365;
  const spot=hr*(1-pd.spot_discount), r1=hr*(1-pd.reserved_1yr_discount), r3=hr*(1-pd.reserved_3yr_discount);
  document.getElementById('calcResult').innerHTML=`
    <div style="margin-bottom:10px;color:var(--cyan);font-weight:700;">${DATA.specs[gpuId]?.name||gpuId} x${numGpus} @ ${provId}</div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
      <div>On-Demand/hr: <span class="c-green fw">$${(hr*numGpus).toFixed(2)}</span></div>
      <div>Daily: <span class="c-green fw">$${daily.toFixed(0)}</span></div>
      <div>Monthly: <span style="color:var(--amber);font-weight:700;">$${monthly.toLocaleString('en',{maximumFractionDigits:0})}</span></div>
      <div>Yearly: <span style="color:var(--orange);font-weight:700;">$${yearly.toLocaleString('en',{maximumFractionDigits:0})}</span></div>
    </div>
    <hr style="border-color:var(--border-0);margin:10px 0;">
    <div style="font-size:11px;">
      <div>Spot: $${(spot*numGpus*hrsDay*30).toFixed(0)}/mo ${pd.spot_discount>0?'(save '+(pd.spot_discount*100)+'%)':'(N/A)'}</div>
      <div>1yr Reserved: $${(r1*numGpus*hrsDay*30).toFixed(0)}/mo (save ${(pd.reserved_1yr_discount*100)}%)</div>
      <div>3yr Reserved: $${(r3*numGpus*hrsDay*30).toFixed(0)}/mo (save ${(pd.reserved_3yr_discount*100)}%)</div>
    </div>`;
}

// ════════════════════════════════════════════════════════════════
// SELECTORS
// ════════════════════════════════════════════════════════════════
function populateSelectors() {
  const gpus=Object.keys(DATA.specs), provs=Object.keys(DATA.providers);
  const provGpus=new Set(); Object.values(DATA.providers).forEach(p=>{if(p.gpus)Object.keys(p.gpus).forEach(g=>provGpus.add(g));});
  [document.getElementById('trendGpuSelect'),document.getElementById('providerGpuSelect'),
   document.getElementById('calcGpu'),document.getElementById('aiGpuSelect')].forEach(sel=>{
    if(!sel) return;
    const ex=sel.value, hb=sel.id==='aiGpuSelect';
    const isProv=sel.id==='providerGpuSelect';
    sel.innerHTML=(hb?'<option value="">-- Select GPU --</option>':'')+
      gpus.filter(g=>{if(sel.id==='trendGpuSelect')return DATA.historical[g]; if(isProv)return provGpus.has(g); return true;})
        .map(g=>`<option value="${g}" ${g===ex?'selected':''}>${DATA.specs[g]?.name||g}</option>`).join('');
    if(!ex&&!hb&&sel.options.length) sel.value=sel.options[0].value;
  });
  const ps=document.getElementById('calcProvider');
  ps.innerHTML=provs.map(p=>`<option value="${p}">${p}</option>`).join('');
}

// ════════════════════════════════════════════════════════════════
// SPOT MARKET
// ════════════════════════════════════════════════════════════════
function renderSpotTab() {
  const spot=DATA.spot; if(!spot||!Object.keys(spot).length) return;
  const gpus=Object.keys(spot), sd=Object.values(spot);
  const totalVol=sd.reduce((s,d)=>s+d['24h_volume_gpu_hrs'],0);
  const avgSpread=(sd.reduce((s,d)=>s+d.spread_pct,0)/sd.length).toFixed(1);
  const totalInv=sd.reduce((s,d)=>s+d.available_gpus,0);
  const topVol=gpus.reduce((a,b)=>spot[a]['24h_volume_gpu_hrs']>spot[b]['24h_volume_gpu_hrs']?a:b);

  document.getElementById('spotStats').innerHTML=`
    <div class="kpi kpi-cyan"><div class="kpi-label">24h Total Volume</div><div class="kpi-value">${totalVol.toLocaleString()}</div><div class="kpi-sub">GPU-hours traded</div></div>
    <div class="kpi kpi-green"><div class="kpi-label">Avg Bid-Ask Spread</div><div class="kpi-value">${avgSpread}%</div><div class="kpi-sub">Across ${gpus.length} GPUs</div></div>
    <div class="kpi kpi-amber"><div class="kpi-label">Available Inventory</div><div class="kpi-value">${totalInv.toLocaleString()}</div><div class="kpi-sub">GPUs on market</div></div>
    <div class="kpi kpi-purple"><div class="kpi-label">Most Active</div><div class="kpi-value">${topVol}</div><div class="kpi-sub">${spot[topVol]['24h_volume_gpu_hrs'].toLocaleString()} GPU-hrs</div></div>`;

  let cHtml='';
  gpus.forEach((g,i)=>{
    const d=spot[g];
    cHtml+=`<div class="spot-tile" style="border-top:2px solid ${CL[i%CL.length]}">
      <div class="spot-tile-gpu">${g}<span style="float:right;font-size:11px;color:var(--amber);">Spread: ${d.spread_pct}%</span></div>
      <div class="spot-prices"><div><div class="spot-lbl">Bid</div><div class="spot-bid-val">$${d.bid.toFixed(2)}</div></div><div><div class="spot-lbl">Ask</div><div class="spot-ask-val">$${d.ask.toFixed(2)}</div></div></div>
      <div class="spot-meta-row"><span>Vol: ${d['24h_volume_gpu_hrs'].toLocaleString()}</span><span>Avail: ${d.available_gpus.toLocaleString()}</span><span>30d Vol: ${d.volatility_30d}%</span></div>
      <div class="spot-mini"><canvas id="sm_${g.replace(/[^a-zA-Z0-9]/g,'_')}" height="44"></canvas></div>
    </div>`;
  });
  document.getElementById('spotCards').innerHTML=cHtml;

  gpus.forEach((g,i)=>{
    const cv=document.getElementById(`sm_${g.replace(/[^a-zA-Z0-9]/g,'_')}`);
    if(!cv) return;
    const prices=spot[g].hourly_prices_24h||[];
    new Chart(cv,{type:'line',data:{labels:prices.map((_,j)=>j+'h'),datasets:[{data:prices,borderColor:CL[i%CL.length],backgroundColor:CL[i%CL.length]+'15',fill:true,tension:0.35,pointRadius:0,borderWidth:1.5}]},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:false}}}});
  });

  // Spot Discount vs On-Demand: horizontal bars showing % savings
  const discountData=gpus.map(g=>{
    const d=spot[g], provs=DATA.providers;
    let ondemand=null;
    for(const p of Object.values(provs)){if(p.gpus?.[g]){const od=p.gpus[g].price_per_gpu_hr;if(!ondemand||od<ondemand)ondemand=od;}}
    const save=ondemand?((1-d.bid/ondemand)*100):0;
    return {gpu:g,bid:d.bid,ondemand,save};
  }).sort((a,b)=>b.save-a.save);

  if(charts.sd) charts.sd.destroy();
  charts.sd=new Chart(document.getElementById('chartSpotDiscount'),{type:'bar',
    data:{labels:discountData.map(d=>d.gpu),datasets:[
      {label:'Spot Bid',data:discountData.map(d=>d.bid),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
      {label:'On-Demand (cheapest)',data:discountData.map(d=>d.ondemand),backgroundColor:C.red+'30',borderColor:C.red,borderWidth:1,borderDash:[3,3]}
    ]},
    options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,
      plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}},
        tooltip:{callbacks:{afterBody:(ctx)=>{const d=discountData[ctx[0].dataIndex];return d.save>0?`Save ${d.save.toFixed(0)}% vs on-demand`:'';}}}},
      scales:{x:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},y:{grid:{display:false}}}}
  });

  // Price Momentum: 90d → 30d → Now per GPU
  if(charts.sm) charts.sm.destroy();
  charts.sm=new Chart(document.getElementById('chartSpotMomentum'),{type:'bar',
    data:{labels:gpus,datasets:[
      {label:'90d Avg',data:sd.map(d=>d['90d_avg']||null),backgroundColor:C.purple+'50',borderColor:C.purple,borderWidth:1},
      {label:'30d Avg',data:sd.map(d=>d['30d_avg']),backgroundColor:C.amber+'50',borderColor:C.amber,borderWidth:1},
      {label:'Now (Last Trade)',data:sd.map(d=>d.last_trade),backgroundColor:C.cyan+'70',borderColor:C.cyan,borderWidth:1}
    ]},
    options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}},
        tooltip:{callbacks:{afterBody:(ctx)=>{const i=ctx[0].dataIndex,d=sd[i],avg90=d['90d_avg']||d['30d_avg'];const chg=((d.last_trade-avg90)/avg90*100).toFixed(1);return chg<0?`${chg}% from 90d avg`:`+${chg}% from 90d avg`;}}}},
      scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });

  // Volume Trend: 90d → 30d → Now per GPU
  if(charts.vt) charts.vt.destroy();
  charts.vt=new Chart(document.getElementById('chartVolumeTrend'),{type:'bar',
    data:{labels:gpus,datasets:[
      {label:'90d Avg',data:sd.map(d=>d.volume_90d_avg||0),backgroundColor:C.purple+'45',borderColor:C.purple,borderWidth:1},
      {label:'30d Avg',data:sd.map(d=>d.volume_30d_avg||0),backgroundColor:C.amber+'50',borderColor:C.amber,borderWidth:1},
      {label:'Now (24h)',data:sd.map(d=>d['24h_volume_gpu_hrs']),backgroundColor:C.cyan+'70',borderColor:C.cyan,borderWidth:1}
    ]},
    options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}},
        tooltip:{callbacks:{afterBody:(ctx)=>{const i=ctx[0].dataIndex,d=sd[i],v90=d.volume_90d_avg||d.volume_30d_avg;const chg=((d['24h_volume_gpu_hrs']-v90)/v90*100).toFixed(0);return chg>=0?`+${chg}% vs 90d`:`${chg}% vs 90d`;}}}},
      scales:{y:{title:{display:true,text:'GPU-hrs / day'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });

  // Inventory Trend: 90d → 30d → Now per GPU
  if(charts.ivt) charts.ivt.destroy();
  charts.ivt=new Chart(document.getElementById('chartInventoryTrend'),{type:'bar',
    data:{labels:gpus,datasets:[
      {label:'90d Ago',data:sd.map(d=>d.inventory_90d||0),backgroundColor:C.purple+'45',borderColor:C.purple,borderWidth:1},
      {label:'30d Ago',data:sd.map(d=>d.inventory_30d||0),backgroundColor:C.amber+'50',borderColor:C.amber,borderWidth:1},
      {label:'Now',data:sd.map(d=>d.available_gpus),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1}
    ]},
    options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}},
        tooltip:{callbacks:{afterBody:(ctx)=>{const i=ctx[0].dataIndex,d=sd[i],inv90=d.inventory_90d||d.inventory_30d;const chg=((d.available_gpus-inv90)/inv90*100).toFixed(0);return chg>=0?`+${chg}% vs 90d`:`${chg}% vs 90d`;}}}},
      scales:{y:{title:{display:true,text:'Available GPUs'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });
}

// ════════════════════════════════════════════════════════════════
// INFERENCE
// ════════════════════════════════════════════════════════════════
function renderInferenceTab(filterCat) {
  const inf=DATA.inference; if(!inf||!Object.keys(inf).length) return;
  const allModels=Object.keys(inf);
  const cat=filterCat||'all';
  const models=cat==='all'?allModels:allModels.filter(m=>inf[m].category===cat);

  // Collect all providers across models
  const provSet=new Set();
  models.forEach(m=>{if(inf[m].providers)Object.keys(inf[m].providers).forEach(p=>provSet.add(p));});
  const providers=[...provSet].sort();

  // Collect all provider prices for stats
  const allPrices=[]; const selfHostedPrices=[];
  models.forEach(m=>{
    if(inf[m].providers) Object.values(inf[m].providers).forEach(p=>{if(p>0)allPrices.push(p);});
    if(inf[m].gpus) Object.values(inf[m].gpus).forEach(g=>{if(g.cost_per_1m_tokens>0)selfHostedPrices.push(g.cost_per_1m_tokens);});
  });
  const cheapestProv=allPrices.length?Math.min(...allPrices):0;
  const avgProv=allPrices.length?(allPrices.reduce((a,b)=>a+b,0)/allPrices.length):0;
  const cheapestSelf=selfHostedPrices.length?Math.min(...selfHostedPrices):0;

  // Find #1 ranked model price for reference
  const topModel=allModels.find(m=>inf[m].rank===1)||allModels[0];
  const topPrice=inf[topModel]?.providers?Math.min(...Object.values(inf[topModel].providers).filter(v=>v>0)):0;

  document.getElementById('inferenceStats').innerHTML=`
    <div class="kpi kpi-green"><div class="kpi-label">Cheapest Provider</div><div class="kpi-value">$${cheapestProv.toFixed(3)}</div><div class="kpi-sub">Per M tokens (API)</div></div>
    <div class="kpi kpi-cyan"><div class="kpi-label">Avg Provider Price</div><div class="kpi-value">$${avgProv.toFixed(2)}</div><div class="kpi-sub">Across ${providers.length} providers</div></div>
    <div class="kpi kpi-purple"><div class="kpi-label">Models Tracked</div><div class="kpi-value">${allModels.length}</div><div class="kpi-sub">${models.length} shown · OpenRouter Top 20</div></div>
    <div class="kpi kpi-amber"><div class="kpi-label">#1 ${topModel}</div><div class="kpi-value">$${topPrice.toFixed(2)}</div><div class="kpi-sub">Most popular model</div></div>`;

  // Build table: Model | Params | Cat | Provider1 | Provider2 | ... | Best Provider | Best Self-Hosted
  const catColors={Small:'#22c55e',Medium:'#3b82f6',Large:'#a855f7',Frontier:'#f59e0b'};
  let h='<thead><tr><th style="position:sticky;left:0;background:var(--card);z-index:2;width:30px;">#</th><th style="background:var(--card);">Model</th><th class="r">Params</th><th>Cat</th>';
  providers.forEach(p=>{h+=`<th class="r" style="font-size:10px;white-space:nowrap;">${p}</th>`;});
  h+='<th class="r" style="background:rgba(34,197,94,0.08);">Best API</th><th class="r" style="background:rgba(56,189,248,0.08);">Best GPU</th>';
  h+='</tr></thead><tbody>';

  // Sort models by rank (usage popularity)
  const sorted=[...models].sort((a,b)=>(inf[a].rank||99)-(inf[b].rank||99));

  sorted.forEach(m=>{
    const d=inf[m];
    const provPrices=d.providers||{};
    const provVals=Object.values(provPrices).filter(v=>v>0);
    const bestProv=provVals.length?Math.min(...provVals):null;
    const gpuVals=d.gpus?Object.values(d.gpus).map(g=>g.cost_per_1m_tokens).filter(v=>v>0):[];
    const bestGpu=gpuVals.length?Math.min(...gpuVals):null;
    const cc=catColors[d.category]||'#666';
    h+=`<tr><td style="position:sticky;left:0;background:var(--card);z-index:1;font-family:var(--mono);font-size:11px;color:var(--fg2);text-align:center;">${d.rank||''}</td>`;
    h+=`<td class="gpu-name" style="white-space:nowrap;">${m}</td>`;
    h+=`<td class="r" style="font-family:var(--mono);font-size:11px;">${d.params_b}B</td>`;
    h+=`<td><span style="background:${cc}20;color:${cc};padding:1px 6px;border-radius:3px;font-size:10px;font-weight:600;">${d.category}</span></td>`;
    providers.forEach(p=>{
      const price=provPrices[p];
      if(price!=null && price>0){
        const isBest=price===bestProv;
        h+=`<td class="r" style="font-family:var(--mono);font-size:11px;${isBest?'color:var(--green);font-weight:700;':''}">$${price<1?price.toFixed(3):price.toFixed(2)}</td>`;
      } else {
        h+='<td class="r dim" style="font-size:10px;">—</td>';
      }
    });
    h+=`<td class="r" style="background:rgba(34,197,94,0.08);font-family:var(--mono);font-size:11px;font-weight:700;color:var(--green);">${bestProv!=null?'$'+(bestProv<1?bestProv.toFixed(3):bestProv.toFixed(2)):'—'}</td>`;
    h+=`<td class="r" style="background:rgba(56,189,248,0.08);font-family:var(--mono);font-size:11px;color:var(--cyan);">${bestGpu!=null?'$'+(bestGpu<1?bestGpu.toFixed(3):bestGpu.toFixed(2)):'—'}</td>`;
    h+='</tr>';
  });
  h+='</tbody>';
  document.getElementById('inferenceTable').innerHTML=h;

  // Chart 1: $/M Tokens by Provider for key models (grouped bar)
  const chartModels=sorted.filter(m=>inf[m].type==='LLM'&&inf[m].providers&&Object.keys(inf[m].providers).length>=3).slice(0,10);
  const topProviders=['Together','Fireworks','Groq','DeepInfra','AWS Bedrock','Azure'].filter(p=>provSet.has(p));
  if(charts.ic) charts.ic.destroy();
  charts.ic=new Chart(document.getElementById('chartInferenceCost'),{type:'bar',
    data:{labels:chartModels,datasets:topProviders.map((p,i)=>({
      label:p,
      data:chartModels.map(m=>inf[m].providers?.[p]||null),
      backgroundColor:CL[i%CL.length]+'70',borderColor:CL[i%CL.length],borderWidth:1
    }))},
    options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}}},
      scales:{y:{title:{display:true,text:'$/M Tokens'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false},ticks:{font:{size:9},maxRotation:45}}}}
  });

  // Chart 2: Self-hosted GPU cost vs Provider API for 70B-class models
  const compModels=sorted.filter(m=>{const p=inf[m].params_b;return inf[m].type==='LLM'&&p>=7&&Object.keys(inf[m].providers||{}).length>=3;}).slice(0,8);
  const bestProvPrices=compModels.map(m=>{const v=Object.values(inf[m].providers||{}).filter(x=>x>0);return v.length?Math.min(...v):null;});
  const bestGpuPrices=compModels.map(m=>{const v=inf[m].gpus?Object.values(inf[m].gpus).map(g=>g.cost_per_1m_tokens).filter(x=>x>0):[];return v.length?Math.min(...v):null;});
  if(charts.avs) charts.avs.destroy();
  charts.avs=new Chart(document.getElementById('chartApiVsSelfHosted'),{type:'bar',
    data:{labels:compModels,datasets:[
      {label:'Best Provider API',data:bestProvPrices,backgroundColor:C.cyan+'70',borderColor:C.cyan,borderWidth:1},
      {label:'Best Self-Hosted GPU',data:bestGpuPrices,backgroundColor:C.purple+'70',borderColor:C.purple,borderWidth:1},
    ]},
    options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{position:'top',labels:{boxWidth:10,font:{size:10}}}},
      scales:{y:{title:{display:true,text:'$/M Tokens'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false},ticks:{font:{size:9},maxRotation:45}}}}
  });

  // Chart 3: Cost frontier scatter — model size vs best $/M tokens
  const scatterData=allModels.filter(m=>inf[m].providers&&Object.values(inf[m].providers).some(v=>v>0)).map(m=>{
    const best=Math.min(...Object.values(inf[m].providers).filter(v=>v>0));
    return {x:inf[m].params_b,y:best,label:m};
  });
  if(charts.it) charts.it.destroy();
  charts.it=new Chart(document.getElementById('chartInferenceThroughput'),{type:'scatter',
    data:{datasets:[{
      label:'Model',data:scatterData,
      backgroundColor:scatterData.map(d=>d.x<10?C.green+'90':d.x<100?C.cyan+'90':d.x<300?C.purple+'90':C.amber+'90'),
      borderColor:scatterData.map(d=>d.x<10?C.green:d.x<100?C.cyan:d.x<300?C.purple:C.amber),
      borderWidth:1,pointRadius:7,pointHoverRadius:10,
    }]},
    options:{responsive:true,maintainAspectRatio:false,
      plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>`${ctx.raw.label}: ${ctx.raw.x}B params, $${ctx.raw.y.toFixed(3)}/M tok`}}},
      scales:{x:{type:'logarithmic',title:{display:true,text:'Parameters (B)'},grid:{color:'rgba(26,34,51,0.4)'}},y:{type:'logarithmic',title:{display:true,text:'Best $/M Tokens (log)'},grid:{color:'rgba(26,34,51,0.4)'}}}}
  });

  // Chart 4: Provider coverage — how many models each provider supports
  const provCount={};
  allModels.forEach(m=>{if(inf[m].providers)Object.keys(inf[m].providers).forEach(p=>{provCount[p]=(provCount[p]||0)+1;});});
  const pcSorted=Object.entries(provCount).sort((a,b)=>b[1]-a[1]);
  if(charts.pc) charts.pc.destroy();
  charts.pc=new Chart(document.getElementById('chartProviderCoverage'),{type:'bar',
    data:{labels:pcSorted.map(e=>e[0]),datasets:[{label:'Models Supported',data:pcSorted.map(e=>e[1]),backgroundColor:pcSorted.map((_,i)=>CL[i%CL.length]+'70'),borderColor:pcSorted.map((_,i)=>CL[i%CL.length]),borderWidth:1}]},
    options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,
      plugins:{legend:{display:false}},
      scales:{x:{title:{display:true,text:'# Models'},grid:{color:'rgba(26,34,51,0.4)'}},y:{grid:{display:false},ticks:{font:{size:10}}}}}
  });
}

// Wire up category filter
document.getElementById('inferCatFilter')?.addEventListener('change',function(){renderInferenceTab(this.value);});

// ════════════════════════════════════════════════════════════════
// TCO
// ════════════════════════════════════════════════════════════════
function renderTcoTab() {
  const tco=DATA.tco; if(!tco||!Object.keys(tco).length) return;
  const comps=Object.keys(tco);
  const compC=[C.cyan,C.purple,C.orange,C.amber,C.pink];
  const compL={'networking':'Networking','storage':'Storage','egress':'Egress','energy_overhead':'Energy','ops_management':'Ops/Mgmt'};
  const gs=new Set(); comps.forEach(c=>{if(tco[c]?.cost_per_gpu_hr)Object.keys(tco[c].cost_per_gpu_hr).forEach(g=>gs.add(g));});
  const gpus=[...gs];
  const totals={}, bdowns={};
  gpus.forEach(g=>{
    let t=0; const bd={};
    comps.forEach(c=>{const cost=tco[c]?.cost_per_gpu_hr?.[g]||0;t+=cost;bd[c]=cost;});
    const base=DATA.matrix.find(r=>r.gpu_id===g)?.cheapest_price||0;
    totals[g]={base,overhead:t,total:base+t}; bdowns[g]=bd;
  });

  const refT=totals['B200']||totals['H100-SXM'];
  const refName=totals['B200']?'B200':'H100-SXM';
  const ohPct=refT?((refT.overhead/refT.total)*100).toFixed(0):'--';
  document.getElementById('tcoStats').innerHTML=`
    <div class="kpi kpi-purple"><div class="kpi-label">${refName} Total TCO/hr</div><div class="kpi-value">$${refT?refT.total.toFixed(2):'--'}</div><div class="kpi-sub">GPU + overhead</div></div>
    <div class="kpi kpi-red"><div class="kpi-label">Hidden Cost %</div><div class="kpi-value">${ohPct}%</div><div class="kpi-sub">Non-GPU overhead (${refName})</div></div>
    <div class="kpi kpi-green"><div class="kpi-label">GPUs Analyzed</div><div class="kpi-value">${gpus.length}</div><div class="kpi-sub">${comps.length} cost components</div></div>
    <div class="kpi kpi-amber"><div class="kpi-label">Monthly TCO (8x${refName})</div><div class="kpi-value">$${refT?(refT.total*8*730).toLocaleString('en',{maximumFractionDigits:0}):'--'}</div><div class="kpi-sub">24/7 operation</div></div>`;

  if(charts.ts) charts.ts.destroy();
  charts.ts=new Chart(document.getElementById('chartTcoStack'),{type:'bar',
    data:{labels:gpus,datasets:[
      {label:'GPU Compute',data:gpus.map(g=>totals[g].base),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
      ...comps.map((c,i)=>({label:compL[c]||c,data:gpus.map(g=>bdowns[g]?.[c]||0),backgroundColor:compC[i]+'70',borderColor:compC[i],borderWidth:1}))
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{x:{stacked:true,grid:{display:false}},y:{stacked:true,title:{display:true,text:'$/hr (Total)'},grid:{color:'rgba(26,34,51,0.4)'}}}}
  });

  if(charts.tp) charts.tp.destroy();
  const ref=refName;
  document.getElementById('tcoPieTitle').textContent='TCO Component Share ('+ref+')';
  const pL=['GPU Compute',...comps.map(c=>compL[c]||c)];
  const pD=[totals[ref]?.base||0,...comps.map(c=>bdowns[ref]?.[c]||0)];
  const pC2=[C.green,...compC];
  charts.tp=new Chart(document.getElementById('chartTcoPie'),{type:'doughnut',
    data:{labels:pL,datasets:[{data:pD,backgroundColor:pC2.map(c=>c+'80'),borderColor:pC2,borderWidth:2}]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'right'},title:{display:true,text:ref+' TCO Breakdown',color:C.cyan,font:{size:12}}}}
  });

  let h='<thead><tr><th>GPU</th><th class="r">GPU $/hr</th>';
  comps.forEach(c=>{h+=`<th class="r">${compL[c]||c}</th>`;});
  h+='<th class="r">Total TCO</th><th class="r">Overhead %</th><th class="r">Monthly</th></tr></thead><tbody>';
  gpus.forEach(g=>{
    const t=totals[g],b=bdowns[g];
    const op=t.total>0?((t.overhead/t.total)*100).toFixed(1):0;
    h+=`<tr><td class="gpu-name">${g}</td><td class="r c-green fw">$${t.base.toFixed(2)}</td>`;
    comps.forEach(c=>{h+=`<td class="r dim">$${(b[c]||0).toFixed(2)}</td>`;});
    h+=`<td class="r c-amber fw">$${t.total.toFixed(2)}</td><td class="r c-red">${op}%</td><td class="r">$${(t.total*730).toLocaleString('en',{maximumFractionDigits:0})}</td></tr>`;
  });
  h+='</tbody>';
  document.getElementById('tcoTable').innerHTML=h;

  if(charts.tm) charts.tm.destroy();
  charts.tm=new Chart(document.getElementById('chartTcoMonthly'),{type:'bar',
    data:{labels:gpus,datasets:[
      {label:'GPU Cost ($/mo)',data:gpus.map(g=>totals[g].base*730),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
      {label:'Hidden Costs ($/mo)',data:gpus.map(g=>totals[g].overhead*730),backgroundColor:C.red+'50',borderColor:C.red,borderWidth:1},
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{x:{stacked:true,grid:{display:false}},y:{stacked:true,title:{display:true,text:'$/month'},grid:{color:'rgba(26,34,51,0.4)'}}}}
  });
}

// ════════════════════════════════════════════════════════════════
// EFFICIENCY TAB
// ════════════════════════════════════════════════════════════════
function renderEfficiencyTab() {
  const util=DATA.utilization, res=DATA.reservations;
  if(!util||!Object.keys(util).length) return;

  // KPI stats
  const gpuIds=Object.keys(util);
  const avgUtil=gpuIds.reduce((s,g)=>s+(util[g].avg_utilization||0),0)/gpuIds.length;
  const avgEff=gpuIds.reduce((s,g)=>s+(util[g].avg_efficiency||0),0)/gpuIds.length;
  const bestGpu=gpuIds.reduce((a,b)=>(util[a].avg_efficiency||0)>(util[b].avg_efficiency||0)?a:b);
  const bestProvEntries=Object.entries(util[bestGpu]?.providers||{}).filter(e=>e[1]?.efficiency_score).sort((a,b)=>b[1].efficiency_score-a[1].efficiency_score);
  const bestProv=bestProvEntries[0]||['--',{efficiency_score:0}];
  document.getElementById('effStats').innerHTML=`
    <div class="kpi kpi-cyan"><div class="kpi-label">Avg Utilization</div><div class="kpi-value">${avgUtil.toFixed(1)}%</div><div class="kpi-sub">Across ${gpuIds.length} GPU types</div></div>
    <div class="kpi kpi-green"><div class="kpi-label">Avg Efficiency</div><div class="kpi-value">${avgEff.toFixed(1)}</div><div class="kpi-sub">Score out of 100</div></div>
    <div class="kpi kpi-amber"><div class="kpi-label">Most Efficient GPU</div><div class="kpi-value">${bestGpu}</div><div class="kpi-sub">${util[bestGpu].avg_efficiency}/100</div></div>
    <div class="kpi kpi-purple"><div class="kpi-label">Top Provider</div><div class="kpi-value">${bestProv[0]}</div><div class="kpi-sub">${bestProv[1].efficiency_score}/100 on ${bestGpu}</div></div>`;

  // Utilization by Provider chart
  const providers=new Set();
  gpuIds.forEach(g=>Object.keys(util[g].providers).forEach(p=>providers.add(p)));
  const provArr=[...providers];
  if(charts.ubp) charts.ubp.destroy();
  charts.ubp=new Chart(document.getElementById('chartUtilByProvider'),{type:'bar',
    data:{labels:gpuIds,datasets:provArr.slice(0,6).map((p,i)=>({label:p,data:gpuIds.map(g=>util[g].providers[p]?.avg_utilization_pct||null),backgroundColor:CL[i]+'70',borderColor:CL[i],borderWidth:1}))},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'Utilization %'},grid:{color:'rgba(26,34,51,0.4)'},max:100},x:{grid:{display:false}}}}
  });

  // Efficiency scores
  if(charts.eff) charts.eff.destroy();
  charts.eff=new Chart(document.getElementById('chartEfficiency'),{type:'radar',
    data:{labels:gpuIds,datasets:provArr.slice(0,5).map((p,i)=>({label:p,data:gpuIds.map(g=>util[g].providers[p]?.efficiency_score||0),borderColor:CL[i],backgroundColor:CL[i]+'20',pointBackgroundColor:CL[i],borderWidth:2}))},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{r:{min:0,max:100,ticks:{stepSize:20,color:'#5c6980'},grid:{color:'rgba(26,34,51,0.4)'},pointLabels:{color:'#8a95a6',font:{size:10}}}}}
  });

  // Utilization trend lines
  const months=['Oct','Nov','Dec','Jan','Feb'];
  if(charts.utr) charts.utr.destroy();
  charts.utr=new Chart(document.getElementById('chartUtilTrend'),{type:'line',
    data:{labels:months,datasets:gpuIds.map((g,i)=>{
      const trend=util[g].providers[provArr[0]]?.utilization_trend||[];
      return {label:g,data:trend,borderColor:CL[i],tension:0.3,pointRadius:3,borderWidth:2,fill:false};
    })},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'Utilization %'},grid:{color:'rgba(26,34,51,0.4)'},max:100},x:{grid:{display:false}}}}
  });

  // Breakeven chart
  if(res&&Object.keys(res).length) {
    const rGpus=Object.keys(res);
    if(charts.bev) charts.bev.destroy();
    charts.bev=new Chart(document.getElementById('chartBreakeven'),{type:'bar',
      data:{labels:rGpus,datasets:[
        {label:'On-Demand',data:rGpus.map(g=>res[g].on_demand_rate),backgroundColor:C.red+'70',borderColor:C.red,borderWidth:1},
        {label:'1yr Reserved',data:rGpus.map(g=>res[g].reserved_1yr_rate),backgroundColor:C.amber+'70',borderColor:C.amber,borderWidth:1},
        {label:'3yr Reserved',data:rGpus.map(g=>res[g].reserved_3yr_rate),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
        {label:'Spot Avg',data:rGpus.map(g=>res[g].spot_avg_rate),backgroundColor:C.cyan+'70',borderColor:C.cyan,borderWidth:1},
      ]},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
    });

    // Savings chart (80% utilization)
    if(charts.sav) charts.sav.destroy();
    charts.sav=new Chart(document.getElementById('chartSavings'),{type:'bar',
      data:{labels:rGpus,datasets:[
        {label:'Spot Savings %',data:rGpus.map(g=>res[g].savings_at_utilization['80_pct']?.spot||0),backgroundColor:C.cyan+'70',borderColor:C.cyan,borderWidth:1},
        {label:'1yr Reserved %',data:rGpus.map(g=>res[g].savings_at_utilization['80_pct']?.reserved_1yr||0),backgroundColor:C.amber+'70',borderColor:C.amber,borderWidth:1},
        {label:'3yr Reserved %',data:rGpus.map(g=>res[g].savings_at_utilization['80_pct']?.reserved_3yr||0),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
      ]},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},title:{display:true,text:'Savings at 80% Utilization',color:'#8a95a6'}},scales:{y:{title:{display:true,text:'Savings %'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
    });

    // Reservation table
    let h='<table class="dt"><thead><tr><th>GPU</th><th>On-Demand</th><th>Spot</th><th>1yr Reserved</th><th>3yr Reserved</th><th>Low Util</th><th>Med Util</th><th>High Util</th></tr></thead><tbody>';
    rGpus.forEach(g=>{
      const r=res[g];
      h+=`<tr><td style="color:var(--cyan);font-weight:600;">${g}</td>
        <td>$${r.on_demand_rate.toFixed(2)}/hr</td>
        <td style="color:var(--green);">$${r.spot_avg_rate.toFixed(2)}/hr</td>
        <td>$${r.reserved_1yr_rate.toFixed(2)}/hr</td>
        <td style="color:var(--green);">$${r.reserved_3yr_rate.toFixed(2)}/hr</td>
        <td><span style="color:var(--amber);">${r.recommended_commitment.low_util.type}</span></td>
        <td><span style="color:var(--blue);">${r.recommended_commitment.medium_util.type}</span></td>
        <td><span style="color:var(--green);">${r.recommended_commitment.high_util.type}</span></td></tr>`;
    });
    h+='</tbody></table>';
    document.getElementById('reservationTable').innerHTML=h;
  }
}

// ════════════════════════════════════════════════════════════════
// FORECASTING TAB
// ════════════════════════════════════════════════════════════════
function renderForecastingTab() {
  const fc=DATA.forecasts, comp=DATA.competitive;
  if(!fc||!Object.keys(fc).length) return;

  const gpuIds=Object.keys(fc);

  // KPI stats
  const avgDecline=gpuIds.reduce((s,g)=>s+fc[g].elasticity_coefficient,0)/gpuIds.length;
  const mostElastic=gpuIds.reduce((a,b)=>fc[a].elasticity_coefficient<fc[b].elasticity_coefficient?a:b);
  const biggestDrop=gpuIds.reduce((a,b)=>{
    const da=(fc[a].current_avg-fc[a].forecast_12mo.mid)/fc[a].current_avg;
    const db=(fc[b].current_avg-fc[b].forecast_12mo.mid)/fc[b].current_avg;
    return da>db?a:b;
  });
  const dropPct=((fc[biggestDrop].current_avg-fc[biggestDrop].forecast_12mo.mid)/fc[biggestDrop].current_avg*100).toFixed(0);
  document.getElementById('forecastStats').innerHTML=`
    <div class="kpi kpi-blue"><div class="kpi-label">Avg Elasticity</div><div class="kpi-value">${avgDecline.toFixed(2)}</div><div class="kpi-sub">Price sensitivity coefficient</div></div>
    <div class="kpi kpi-red"><div class="kpi-label">Most Elastic</div><div class="kpi-value">${mostElastic}</div><div class="kpi-sub">Coeff: ${fc[mostElastic].elasticity_coefficient}</div></div>
    <div class="kpi kpi-amber"><div class="kpi-label">Biggest 12mo Decline</div><div class="kpi-value">${biggestDrop}</div><div class="kpi-sub">-${dropPct}% projected</div></div>
    <div class="kpi kpi-green"><div class="kpi-label">GPUs Tracked</div><div class="kpi-value">${gpuIds.length}</div><div class="kpi-sub">With forecast models</div></div>`;

  // Price forecast chart
  if(charts.pfc) charts.pfc.destroy();
  charts.pfc=new Chart(document.getElementById('chartForecast'),{type:'bar',
    data:{labels:gpuIds,datasets:[
      {label:'Current',data:gpuIds.map(g=>fc[g].current_avg),backgroundColor:C.blue+'70',borderColor:C.blue,borderWidth:1},
      {label:'3mo Forecast',data:gpuIds.map(g=>fc[g].forecast_3mo.mid),backgroundColor:C.cyan+'70',borderColor:C.cyan,borderWidth:1},
      {label:'6mo Forecast',data:gpuIds.map(g=>fc[g].forecast_6mo.mid),backgroundColor:C.amber+'70',borderColor:C.amber,borderWidth:1},
      {label:'12mo Forecast',data:gpuIds.map(g=>fc[g].forecast_12mo.mid),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
      {label:'Price Floor',data:gpuIds.map(g=>fc[g].price_floor),type:'line',borderColor:C.red,borderDash:[5,5],pointRadius:4,borderWidth:2,fill:false},
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'$/hr'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });

  // Elasticity chart
  if(charts.elc) charts.elc.destroy();
  const sorted=[...gpuIds].sort((a,b)=>fc[a].elasticity_coefficient-fc[b].elasticity_coefficient);
  charts.elc=new Chart(document.getElementById('chartElasticity'),{type:'bar',
    data:{labels:sorted,datasets:[{label:'Elasticity Coefficient',data:sorted.map(g=>fc[g].elasticity_coefficient),backgroundColor:sorted.map(g=>fc[g].elasticity_coefficient<-0.4?C.red+'70':fc[g].elasticity_coefficient<-0.25?C.amber+'70':C.green+'70'),borderColor:sorted.map(g=>fc[g].elasticity_coefficient<-0.4?C.red:fc[g].elasticity_coefficient<-0.25?C.amber:C.green),borderWidth:1}]},
    options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},title:{display:true,text:'More negative = more price sensitive',color:'#5c6980'}},scales:{x:{title:{display:true,text:'Elasticity'},grid:{color:'rgba(26,34,51,0.4)'}},y:{grid:{display:false}}}}
  });

  // Competitive moat radar
  if(comp&&Object.keys(comp).length) {
    const vendors=Object.keys(comp);
    const dims=['performance_score','ecosystem_maturity','software_compatibility','price_performance_ratio','moat_strength_score'];
    const dimLabels=['Performance','Ecosystem','Software','Price/Perf','Moat Strength'];
    if(charts.mrd) charts.mrd.destroy();
    charts.mrd=new Chart(document.getElementById('chartMoatRadar'),{type:'radar',
      data:{labels:dimLabels,datasets:vendors.map((v,i)=>({label:v.replace('_',' '),data:dims.map(d=>comp[v][d]),borderColor:CL[i],backgroundColor:CL[i]+'18',pointBackgroundColor:CL[i],borderWidth:2}))},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{r:{min:0,max:100,ticks:{stepSize:25,color:'#5c6980'},grid:{color:'rgba(26,34,51,0.4)'},pointLabels:{color:'#8a95a6',font:{size:11}}}}}
    });

    // Market share trend
    const periods=['2022','2023','2024','H1-25','2025'];
    if(charts.msh) charts.msh.destroy();
    charts.msh=new Chart(document.getElementById('chartMoatShare'),{type:'line',
      data:{labels:periods,datasets:vendors.map((v,i)=>({label:v.replace('_',' '),data:comp[v].market_share_trend,borderColor:CL[i],tension:0.3,pointRadius:4,borderWidth:2.5,fill:false}))},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'Market Share %'},grid:{color:'rgba(26,34,51,0.4)'},max:100},x:{grid:{display:false}}}}
    });

    // Competitive table
    let h='<table class="dt"><thead><tr><th>Vendor</th><th>Perf</th><th>Ecosystem</th><th>Software</th><th>Price/Perf</th><th>Moat</th><th>Share</th><th>Products</th></tr></thead><tbody>';
    vendors.forEach(v=>{
      const d=comp[v];
      const sc=c=>c>=80?'var(--green)':c>=60?'var(--amber)':'var(--red)';
      h+=`<tr><td style="color:var(--cyan);font-weight:700;">${v.replace('_',' ')}</td>
        <td style="color:${sc(d.performance_score)}">${d.performance_score}</td>
        <td style="color:${sc(d.ecosystem_maturity)}">${d.ecosystem_maturity}</td>
        <td style="color:${sc(d.software_compatibility)}">${d.software_compatibility}</td>
        <td style="color:${sc(d.price_performance_ratio)}">${d.price_performance_ratio}</td>
        <td style="color:${sc(d.moat_strength_score)};font-weight:700;">${d.moat_strength_score}</td>
        <td>${d.market_share_pct}%</td>
        <td style="font-size:10px;">${d.key_products.join(', ')}</td></tr>`;
    });
    h+='</tbody></table>';
    document.getElementById('competitiveTable').innerHTML=h;
  }
}

// ════════════════════════════════════════════════════════════════
// SUSTAINABILITY TAB
// ════════════════════════════════════════════════════════════════
function renderSustainabilityTab() {
  const sus=DATA.sustainability, sc=DATA.supplychain;
  if(!sus||!sus.providers) return;

  const provs=Object.keys(sus.providers);
  const carbon=sus.gpu_carbon||{};
  const carbonGpus=Object.keys(carbon);

  // KPI stats
  const avgScore=provs.reduce((s,p)=>s+sus.providers[p].avg_sustainability_score,0)/provs.length;
  const greenest=provs.reduce((a,b)=>sus.providers[a].avg_sustainability_score>sus.providers[b].avg_sustainability_score?a:b);
  const avgPue=provs.reduce((s,p)=>s+sus.providers[p].avg_pue,0)/provs.length;
  document.getElementById('susStats').innerHTML=`
    <div class="kpi kpi-green"><div class="kpi-label">Avg Sustainability</div><div class="kpi-value">${avgScore.toFixed(0)}</div><div class="kpi-sub">Score across ${provs.length} providers</div></div>
    <div class="kpi kpi-cyan"><div class="kpi-label">Greenest Provider</div><div class="kpi-value">${greenest}</div><div class="kpi-sub">${sus.providers[greenest].avg_sustainability_score}/100</div></div>
    <div class="kpi kpi-amber"><div class="kpi-label">Avg PUE</div><div class="kpi-value">${avgPue.toFixed(2)}</div><div class="kpi-sub">Power Usage Effectiveness</div></div>
    <div class="kpi kpi-purple"><div class="kpi-label">Supply Vendors</div><div class="kpi-value">${sc?.vendors?Object.keys(sc.vendors).length:'--'}</div><div class="kpi-sub">Tracked for risk</div></div>`;

  // Carbon by GPU
  if(charts.cbg) charts.cbg.destroy();
  charts.cbg=new Chart(document.getElementById('chartCarbonByGpu'),{type:'bar',
    data:{labels:carbonGpus,datasets:[
      {label:'US Average (kg CO2/yr)',data:carbonGpus.map(g=>carbon[g].carbon_kg_per_year_us_avg),backgroundColor:C.red+'70',borderColor:C.red,borderWidth:1},
      {label:'EU Nordic (kg CO2/yr)',data:carbonGpus.map(g=>carbon[g].carbon_kg_per_year_eu_nordic),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1},
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'kg CO2/year'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });

  // PUE & Green Energy by provider
  if(charts.pge) charts.pge.destroy();
  charts.pge=new Chart(document.getElementById('chartPueGreen'),{type:'bar',
    data:{labels:provs,datasets:[
      {label:'Green Energy %',data:provs.map(p=>sus.providers[p].avg_green_energy_pct),backgroundColor:C.green+'70',borderColor:C.green,borderWidth:1,yAxisID:'y'},
      {label:'PUE',data:provs.map(p=>sus.providers[p].avg_pue),type:'line',borderColor:C.amber,borderWidth:2.5,pointRadius:4,yAxisID:'y1',fill:false},
    ]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{
      y:{title:{display:true,text:'Green Energy %'},grid:{color:'rgba(26,34,51,0.4)'},max:100},
      y1:{position:'right',title:{display:true,text:'PUE'},min:1.0,max:1.25,grid:{display:false}},
      x:{grid:{display:false}}}}
  });

  // Supply chain risk
  if(sc&&sc.vendors) {
    const vendors=Object.keys(sc.vendors);
    if(charts.scr) charts.scr.destroy();
    charts.scr=new Chart(document.getElementById('chartSupplyRisk'),{type:'bar',
      data:{labels:vendors,datasets:[
        {label:'Supply Risk Score',data:vendors.map(v=>sc.vendors[v].supply_risk_score),backgroundColor:vendors.map(v=>{const s=sc.vendors[v].supply_risk_score;return s>50?C.red+'70':s>35?C.amber+'70':C.green+'70';}),borderColor:vendors.map(v=>{const s=sc.vendors[v].supply_risk_score;return s>50?C.red:s>35?C.amber:C.green;}),borderWidth:1},
        {label:'TSMC Dependency %',data:vendors.map(v=>sc.vendors[v].tsmc_dependency_pct),backgroundColor:C.purple+'50',borderColor:C.purple,borderWidth:1},
      ]},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'Score / %'},grid:{color:'rgba(26,34,51,0.4)'},max:100},x:{grid:{display:false}}}}
    });

    // Lead time trend
    const periods=['2023-Q1','2023-Q3','2024-Q1','2024-Q3','2025-Q1'];
    if(charts.ltt) charts.ltt.destroy();
    charts.ltt=new Chart(document.getElementById('chartRiskTrend'),{type:'line',
      data:{labels:periods,datasets:vendors.map((v,i)=>({label:v,data:sc.vendors[v].lead_time_trend,borderColor:CL[i],tension:0.35,pointRadius:4,borderWidth:2.5,fill:false}))},
      options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'Lead Time (weeks)'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
    });

    // Sustainability score table
    let h='<table class="dt"><thead><tr><th>Provider</th><th>Region</th><th>Score</th><th>Green %</th><th>PUE</th><th>CO2 g/kWh</th><th>Water L/kWh</th></tr></thead><tbody>';
    provs.forEach(p=>{
      const regions=sus.providers[p].regions;
      Object.entries(regions).forEach(([reg,d])=>{
        const sc2=d.sustainability_score>=80?'var(--green)':d.sustainability_score>=60?'var(--amber)':'var(--red)';
        h+=`<tr><td style="color:var(--cyan);font-weight:600;">${p}</td><td>${reg}</td>
          <td style="color:${sc2};font-weight:700;">${d.sustainability_score}</td>
          <td>${d.green_energy_pct}%</td><td>${d.pue}</td>
          <td>${d.carbon_gco2_per_kwh}</td><td>${d.water_usage_l_per_kwh}</td></tr>`;
      });
    });
    h+='</tbody></table>';
    document.getElementById('sustainabilityTable').innerHTML=h;

    // Export control timeline
    if(sc.export_controls) {
      let eh='<table class="dt"><thead><tr><th>Date</th><th>Regulation</th><th>Target</th><th>Impact</th><th>Description</th></tr></thead><tbody>';
      sc.export_controls.forEach(e=>{
        const ic=e.impact==='high'?'var(--red)':e.impact==='medium'?'var(--amber)':'var(--green)';
        eh+=`<tr><td style="font-family:var(--mono);color:var(--text-2);">${e.date}</td>
          <td style="color:var(--cyan);font-weight:600;">${e.regulation}</td>
          <td>${e.target}</td>
          <td style="color:${ic};font-weight:700;text-transform:uppercase;">${e.impact}</td>
          <td style="font-size:11px;">${e.description}</td></tr>`;
      });
      eh+='</tbody></table>';
      document.getElementById('exportControlTable').innerHTML=eh;
    }
  }
}

// ════════════════════════════════════════════════════════════════
// MODEL FIT TAB
// ════════════════════════════════════════════════════════════════
function renderModelFitTab() {
  const mf=DATA.modelfit;
  if(!mf||!Object.keys(mf).length) return;

  const sizes=Object.keys(mf);

  // KPI stats
  let bestOverall={score:0,gpu:'',size:''};
  let cheapest={cost:999,gpu:'',size:''};
  sizes.forEach(s=>{
    Object.entries(mf[s].gpus).forEach(([g,d])=>{
      if(d.fit_score>bestOverall.score) bestOverall={score:d.fit_score,gpu:g,size:s};
      if(d.cost_per_1m_tokens<cheapest.cost) cheapest={cost:d.cost_per_1m_tokens,gpu:g,size:s};
    });
  });
  document.getElementById('fitStats').innerHTML=`
    <div class="kpi kpi-green"><div class="kpi-label">Best Overall Fit</div><div class="kpi-value">${bestOverall.gpu}</div><div class="kpi-sub">${bestOverall.size} params, score: ${bestOverall.score}</div></div>
    <div class="kpi kpi-cyan"><div class="kpi-label">Cheapest Inference</div><div class="kpi-value">$${cheapest.cost}</div><div class="kpi-sub">${cheapest.gpu} for ${cheapest.size} models</div></div>
    <div class="kpi kpi-amber"><div class="kpi-label">Model Sizes</div><div class="kpi-value">${sizes.length}</div><div class="kpi-sub">${sizes.join(', ')} params</div></div>
    <div class="kpi kpi-purple"><div class="kpi-label">Configurations</div><div class="kpi-value">${sizes.reduce((s,sz)=>s+Object.keys(mf[sz].gpus).length,0)}</div><div class="kpi-sub">GPU+model combos</div></div>`;

  // Cost per 1M tokens by size
  const allGpus=new Set();
  sizes.forEach(s=>Object.keys(mf[s].gpus).forEach(g=>allGpus.add(g)));
  const gpuArr=[...allGpus];
  if(charts.fcc) charts.fcc.destroy();
  charts.fcc=new Chart(document.getElementById('chartFitCost'),{type:'bar',
    data:{labels:sizes.map(s=>s+' params'),datasets:gpuArr.map((g,i)=>({label:g,data:sizes.map(s=>mf[s].gpus[g]?.cost_per_1m_tokens||null),backgroundColor:CL[i%CL.length]+'70',borderColor:CL[i%CL.length],borderWidth:1}))},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'$/M Tokens'},grid:{color:'rgba(26,34,51,0.4)'}},x:{grid:{display:false}}}}
  });

  // Fit score chart
  if(charts.fsc) charts.fsc.destroy();
  charts.fsc=new Chart(document.getElementById('chartFitScore'),{type:'bar',
    data:{labels:sizes.map(s=>s+' params'),datasets:gpuArr.map((g,i)=>({label:g,data:sizes.map(s=>mf[s].gpus[g]?.fit_score||null),backgroundColor:CL[i%CL.length]+'70',borderColor:CL[i%CL.length],borderWidth:1}))},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'}},scales:{y:{title:{display:true,text:'Fit Score (0-100)'},grid:{color:'rgba(26,34,51,0.4)'},max:100},x:{grid:{display:false}}}}
  });

  // Throughput vs cost scatter (frontier)
  const scatterData=[];
  sizes.forEach((s,si)=>{
    Object.entries(mf[s].gpus).forEach(([g,d])=>{
      scatterData.push({x:d.cost_per_1m_tokens,y:d.throughput_tok_s,label:`${g} (${s})`,size:s,gpu:g,sizeIdx:si});
    });
  });
  if(charts.fft) charts.fft.destroy();
  charts.fft=new Chart(document.getElementById('chartFitFrontier'),{type:'scatter',
    data:{datasets:sizes.map((s,i)=>({
      label:s+' params',
      data:scatterData.filter(d=>d.size===s).map(d=>({x:d.x,y:d.y})),
      backgroundColor:CL[i]+'90',
      borderColor:CL[i],
      borderWidth:1.5,
      pointRadius:6,
    }))},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top'},tooltip:{callbacks:{label:function(ctx){const d=scatterData.filter(d=>d.size===sizes[ctx.datasetIndex])[ctx.dataIndex];return d?`${d.gpu}: $${d.x}/M tok, ${d.y} tok/s`:'';}}}},
      scales:{x:{title:{display:true,text:'Cost ($/M tokens)'},grid:{color:'rgba(26,34,51,0.4)'}},y:{title:{display:true,text:'Throughput (tok/s)'},grid:{color:'rgba(26,34,51,0.4)'}}}}
  });

  // VRAM headroom chart
  if(charts.fvr) charts.fvr.destroy();
  const vramData=[];sizes.forEach(s=>{Object.entries(mf[s].gpus).forEach(([g,d])=>{vramData.push({label:`${g}\n(${s})`,val:d.vram_headroom_pct});});});
  charts.fvr=new Chart(document.getElementById('chartFitVram'),{type:'bar',
    data:{labels:vramData.map(d=>d.label),datasets:[{label:'VRAM Headroom %',data:vramData.map(d=>d.val),backgroundColor:vramData.map(d=>d.val>50?C.green+'70':d.val>20?C.amber+'70':C.red+'70'),borderColor:vramData.map(d=>d.val>50?C.green:d.val>20?C.amber:C.red),borderWidth:1}]},
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{title:{display:true,text:'VRAM Headroom %'},grid:{color:'rgba(26,34,51,0.4)'},max:100},x:{grid:{display:false},ticks:{font:{size:8},maxRotation:90}}}}
  });

  // Fit matrix table
  let h='<table class="dt"><thead><tr><th>Model Size</th><th>GPU</th><th>Config</th><th>Throughput</th><th>Cost/1M Tok</th><th>VRAM Headroom</th><th>Fit Score</th><th>Notes</th></tr></thead><tbody>';
  sizes.forEach(s=>{
    const entries=Object.entries(mf[s].gpus).sort((a,b)=>b[1].fit_score-a[1].fit_score);
    entries.forEach(([g,d],idx)=>{
      const sc=d.fit_score>=85?'var(--green)':d.fit_score>=70?'var(--amber)':'var(--red)';
      const vr=d.vram_headroom_pct>50?'var(--green)':d.vram_headroom_pct>20?'var(--amber)':'var(--red)';
      h+=`<tr><td style="color:var(--purple);font-weight:600;">${idx===0?s:''}</td>
        <td style="color:var(--cyan);font-weight:600;">${g}</td>
        <td style="font-family:var(--mono);font-size:10px;">${d.optimal_config}</td>
        <td>${d.throughput_tok_s} tok/s</td>
        <td style="font-weight:600;">$${d.cost_per_1m_tokens}</td>
        <td style="color:${vr}">${d.vram_headroom_pct}%</td>
        <td style="color:${sc};font-weight:700;">${d.fit_score}/100</td>
        <td style="font-size:10px;color:var(--text-3);">${d.notes}</td></tr>`;
    });
  });
  h+='</tbody></table>';
  document.getElementById('fitTable').innerHTML=h;
}

// ════════════════════════════════════════════════════════════════
// AI INTELLIGENCE SYSTEM
// ════════════════════════════════════════════════════════════════

const AI_MAP = {
  'summary':    {url:'/api/ai/summary',     el:'aiSummaryContent',        status:null},
  'trends':     {url:'/api/ai/trends',       el:'aiTrendsContent',         status:'statusTrends'},
  'regional':   {url:'/api/ai/regional',     el:'aiRegionalContent',       status:'statusRegional'},
  'investment': {url:'/api/ai/investment',    el:'aiInvestmentContent',     status:'statusInvestment'},
  'notes':      {url:'/api/ai/notes',        el:'aiNotesContent',          status:null},
  'efficiency': {url:'/api/ai/efficiency',    el:'aiEfficiencyContent',     status:'statusEfficiency'},
  'forecast':   {url:'/api/ai/forecast',      el:'aiForecastContent',       status:'statusForecast'},
  'sustainability':{url:'/api/ai/sustainability',el:'aiSustainabilityContent',status:'statusSustainability'},
};

let aiLoadedSet = new Set();
let aiRunningCount = 0;

function setAIStatus(statusId, state) {
  if(!statusId) return;
  const el = document.getElementById(statusId);
  if(!el) return;
  el.className = 'intel-status intel-status-' + (state==='loading'?'loading':state==='ready'?'ready':'idle');
  el.textContent = state==='loading'?'RUNNING':state==='ready'?'READY':'IDLE';
}

function updateGlobalStatus() {
  const gs = document.getElementById('aiGlobalStatus');
  if(!gs) return;
  if(aiRunningCount > 0) {
    gs.className = 'intel-status intel-status-loading';
    gs.textContent = `${aiRunningCount} RUNNING`;
  } else if(aiLoadedSet.size > 0) {
    gs.className = 'intel-status intel-status-ready';
    gs.textContent = `${aiLoadedSet.size}/${Object.keys(AI_MAP).length-1} READY`;
  } else {
    gs.className = 'intel-status intel-status-idle';
    gs.textContent = 'IDLE';
  }
}

// Post-process AI markdown: highlight signal tags and key metrics
function formatAIOutput(raw) {
  let html = marked.parse(raw || '');
  // Signal tags: [BUY] [SELL] [HOLD] [WATCH] [ALERT] [BULL] [BEAR]
  html = html.replace(/\[BUY\]/gi, '<span class="ai-sig ai-sig-buy">BUY</span>');
  html = html.replace(/\[SELL\]/gi, '<span class="ai-sig ai-sig-sell">SELL</span>');
  html = html.replace(/\[HOLD\]/gi, '<span class="ai-sig ai-sig-hold">HOLD</span>');
  html = html.replace(/\[WATCH\]/gi, '<span class="ai-sig ai-sig-watch">WATCH</span>');
  html = html.replace(/\[ALERT\]/gi, '<span class="ai-sig ai-sig-alert">ALERT</span>');
  html = html.replace(/\[BULL\]/gi, '<span class="ai-sig ai-sig-bull">BULL</span>');
  html = html.replace(/\[BEAR\]/gi, '<span class="ai-sig ai-sig-bear">BEAR</span>');
  // Highlight dollar amounts
  html = html.replace(/(\$[\d,.]+(?:\/hr|\/mo|\/yr|B|M|K)?)/g, '<code>$1</code>');
  // Highlight percentages with direction
  html = html.replace(/([-+]?\d+\.?\d*%)/g, function(m) {
    const v = parseFloat(m);
    if(v > 0) return `<span style="color:var(--green);font-weight:600;">${m}</span>`;
    if(v < 0) return `<span style="color:var(--red);font-weight:600;">${m}</span>`;
    return m;
  });
  return html;
}

async function loadAI(type, bypassCache) {
  const cfg = AI_MAP[type];
  if(!cfg) return;
  const el = document.getElementById(cfg.el);
  if(!el) return;

  // Use embedded AI data when available (static deployment or cached)
  if(typeof EMBEDDED_AI !== 'undefined' && EMBEDDED_AI[type]) {
    const cached = EMBEDDED_AI[type];
    const raw = cached.analysis || cached.quick_summary || JSON.stringify(cached);
    el.innerHTML = formatAIOutput(raw);
    setAIStatus(cfg.status, 'ready');
    aiLoadedSet.add(type);
    updateGlobalStatus();
    return;
  }

  // Live server mode — fetch from API
  el.innerHTML = '<div class="ai-loading"><div class="ai-spinner"></div>Generating analysis&hellip; This may take 15-30 seconds</div>';
  setAIStatus(cfg.status, 'loading');
  aiRunningCount++;
  updateGlobalStatus();

  try {
    const url = bypassCache ? cfg.url + (cfg.url.includes('?') ? '&' : '?') + 'nocache=1' : cfg.url;
    const r = await fetchJSON(url);
    if(r.error) {
      el.innerHTML = `<div style="color:var(--red);padding:20px;font-size:12px;"><strong>Error:</strong> ${r.error}</div>`;
      setAIStatus(cfg.status, 'idle');
    } else {
      const raw = r.analysis || r.quick_summary || JSON.stringify(r);
      el.innerHTML = formatAIOutput(raw);
      setAIStatus(cfg.status, 'ready');
      aiLoadedSet.add(type);
    }
  } catch(e) {
    el.innerHTML = `<div style="color:var(--red);padding:20px;font-size:12px;"><strong>Failed:</strong> ${e.message}</div>`;
    setAIStatus(cfg.status, 'idle');
  }
  aiRunningCount = Math.max(0, aiRunningCount - 1);
  updateGlobalStatus();
}

async function loadAllAI() {
  const btn = document.getElementById('btnGenerateAll');
  if(btn) { btn.textContent = 'Generating...'; btn.disabled = true; }
  // Fire all intelligence reports in parallel
  const types = ['notes','trends','investment','regional','efficiency','forecast','sustainability'];
  await Promise.all(types.map(t => loadAI(t)));
  if(btn) { btn.textContent = 'Generate All Reports'; btn.disabled = false; }
}

async function refreshAllAI() {
  // On static deployment, just re-render from embedded data
  const types = ['notes','trends','investment','regional','efficiency','forecast','sustainability'];
  if(IS_STATIC) {
    aiLoadedSet.clear();
    await Promise.all(types.map(t => loadAI(t)));
    return;
  }
  aiLoadedSet.clear();
  await Promise.all(types.map(t => loadAI(t, true)));
}

async function loadGpuAI() {
  const gpuId = document.getElementById('aiGpuSelect').value;
  if(!gpuId) return;
  const name = DATA.specs[gpuId]?.name || gpuId;
  document.getElementById('aiGpuTitle').textContent = `GPU Deep Dive — ${name}`;
  const el = document.getElementById('aiGpuContent');
  const statusEl = document.getElementById('statusGpu');

  // Use embedded AI data when available
  const embeddedKey = 'gpu_' + gpuId;
  if(typeof EMBEDDED_AI !== 'undefined' && EMBEDDED_AI[embeddedKey]) {
    el.innerHTML = formatAIOutput(EMBEDDED_AI[embeddedKey].analysis || '');
    if(statusEl) { statusEl.className='intel-status intel-status-ready'; statusEl.textContent='READY'; }
    return;
  }

  // Live server fallback
  el.innerHTML = `<div class="ai-loading"><div class="ai-spinner"></div>Analyzing ${name}&hellip;</div>`;
  if(statusEl) { statusEl.className='intel-status intel-status-loading'; statusEl.textContent='RUNNING'; }

  try {
    const r = await fetchJSON(`/api/ai/gpu?id=${gpuId}`);
    if(r.error) el.innerHTML = `<div style="color:var(--red);padding:20px;">Error: ${r.error}</div>`;
    else el.innerHTML = formatAIOutput(r.analysis || '');
    if(statusEl) { statusEl.className='intel-status intel-status-ready'; statusEl.textContent='READY'; }
  } catch(e) {
    el.innerHTML = `<div style="color:var(--red);padding:20px;">Failed: ${e.message}</div>`;
    if(statusEl) { statusEl.className='intel-status intel-status-idle'; statusEl.textContent='IDLE'; }
  }
}

// Auto-load AI for tab-specific panels when tab is visited
const aiTabAutoLoad = {
  'efficiency': 'efficiency',
  'forecasting': 'forecast',
  'sustainability': 'sustainability',
};
document.addEventListener('click', function(e) {
  const navItem = e.target.closest('.nav-item');
  if(!navItem) return;
  const tabId = navItem.dataset.tab;
  if(aiTabAutoLoad[tabId] && !aiLoadedSet.has(aiTabAutoLoad[tabId])) {
    loadAI(aiTabAutoLoad[tabId]);
  }
});

// ════════════════════════════════════════════════════════════════
// SENTIMENT
// ════════════════════════════════════════════════════════════════

function renderSentimentPanel() {
  const sent = DATA.sentiment;
  if (!sent || !Object.keys(sent).length) return;
  const el = document.getElementById('sentimentPanel');
  if (!el) return;

  // Sort by score descending
  const entries = Object.entries(sent).sort((a,b) => b[1].score - a[1].score);

  const adoptionIcon = a => a === 'rising' ? '<span style="color:var(--green);">&#9650;</span>' :
    a === 'declining' ? '<span style="color:var(--red);">&#9660;</span>' :
    '<span style="color:var(--text-3);">&#9654;</span>';
  const adoptionColor = a => a === 'rising' ? 'var(--green)' : a === 'declining' ? 'var(--red)' : 'var(--text-3)';
  const scoreColor = s => s >= 80 ? 'var(--green)' : s >= 60 ? 'var(--blue)' : s >= 40 ? 'var(--amber)' : 'var(--red)';
  const ecoTag = e => {
    const colors = {mature:'var(--green)',growing:'var(--blue)',early:'var(--amber)',legacy:'var(--text-3)'};
    return `<span class="tag" style="background:${colors[e]||'var(--text-3)'}20;color:${colors[e]||'var(--text-3)'};font-size:9px;">${e.toUpperCase()}</span>`;
  };

  let html = '<div class="sent-grid">';
  entries.forEach(([gpu, s]) => {
    const sc = scoreColor(s.score);
    html += `<div class="sent-card">
      <div class="sent-top">
        <div>
          <span class="sent-gpu">${gpu}</span>
          ${s.community_pick ? '<span class="tag sent-pick" style="margin-left:6px;font-size:9px;">COMMUNITY PICK</span>' : ''}
        </div>
        <div class="sent-badges">
          ${ecoTag(s.ecosystem)}
          <span class="tag" style="background:${adoptionColor(s.adoption)}20;color:${adoptionColor(s.adoption)};font-size:9px;">${adoptionIcon(s.adoption)} ${s.adoption.toUpperCase()}</span>
        </div>
      </div>
      <div class="sent-score-wrap">
        <div class="sent-bar-bg"><div class="sent-bar" style="width:${s.score}%;background:${sc};"></div></div>
        <span class="sent-score-val" style="color:${sc};">${s.score}</span>
      </div>
      <div class="sent-metrics">
        <span class="sent-metric">Reddit <b>${(s.reddit_sentiment*100).toFixed(0)}%</b> pos</span>
        <span class="sent-metric">GitHub <b>${s.github_compat_score}/100</b></span>
        <span class="sent-metric">HF <b>${s.hf_models_trained.toLocaleString()}</b> models</span>
        <span class="sent-metric">Mentions <b>${(s.mentions_30d/1000).toFixed(1)}K</b>/30d</span>
      </div>
      <div class="sent-tags">
        ${s.pros.slice(0,2).map(p => `<span class="sent-pro">+ ${p}</span>`).join('')}
        ${s.cons.slice(0,1).map(c => `<span class="sent-con">- ${c}</span>`).join('')}
      </div>
      <div class="sent-use">${s.top_use_case}</div>
    </div>`;
  });
  html += '</div>';
  el.innerHTML = html;
}

// ════════════════════════════════════════════════════════════════
// DATA AUDIT
// ════════════════════════════════════════════════════════════════

const DATA_SECTIONS = [
  { key:'matrix',         label:'GPU Price Matrix',       color:'blue',   type:'array' },
  { key:'specs',          label:'GPU Specifications',     color:'cyan',   type:'dict-of-objects' },
  { key:'providers',      label:'Cloud Providers',        color:'orange', type:'dict-of-objects' },
  { key:'historical',     label:'Historical Pricing',     color:'purple', type:'dict-of-objects' },
  { key:'indicators',     label:'Market Indicators',      color:'green',  type:'flat-object' },
  { key:'regional',       label:'Regional Markets',       color:'amber',  type:'dict-of-objects' },
  { key:'workloads',      label:'Workload Recommendations', color:'pink', type:'dict-of-objects' },
  { key:'tco',            label:'TCO Breakdown',          color:'red',    type:'dict-of-objects' },
  { key:'inference',      label:'Inference Model Pricing',color:'blue',   type:'dict-of-objects' },
  { key:'spot',           label:'Spot Market',            color:'cyan',   type:'dict-of-objects' },
  { key:'news',           label:'News Feed',              color:'amber',  type:'array' },
  { key:'utilization',    label:'Utilization Metrics',    color:'green',  type:'dict-of-objects' },
  { key:'reservations',   label:'Reservation Economics',  color:'purple', type:'dict-of-objects' },
  { key:'forecasts',      label:'Price Forecasts',        color:'orange', type:'dict-of-objects' },
  { key:'competitive',    label:'Competitive Landscape',  color:'blue',   type:'dict-of-objects' },
  { key:'sustainability', label:'Sustainability Metrics', color:'green',  type:'dict-of-objects' },
  { key:'supplychain',    label:'Supply Chain',           color:'red',    type:'dict-of-objects' },
  { key:'modelfit',       label:'Model Fit / GPU Sizing', color:'purple', type:'dict-of-objects' },
  { key:'sentiment',     label:'Developer & MLOps Sentiment', color:'pink', type:'dict-of-objects' },
];

function countEntries(val, type) {
  if (!val) return 0;
  if (type === 'array') return val.length;
  if (type === 'flat-object') return Object.keys(val).length;
  return Object.keys(val).length;
}

function escHtml(s) {
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function flattenValue(v) {
  if (v === null || v === undefined) return '';
  if (typeof v === 'object') return JSON.stringify(v);
  return String(v);
}

function buildArrayTable(arr, searchTerm) {
  if (!arr || !arr.length) return '<div class="da-raw dim">No data</div>';
  const cols = Object.keys(arr[0]);
  let html = '<table class="dt"><thead><tr>';
  cols.forEach(c => html += `<th>${escHtml(c)}</th>`);
  html += '</tr></thead><tbody>';
  arr.forEach(row => {
    const vals = cols.map(c => flattenValue(row[c]));
    const rowStr = vals.join(' ').toLowerCase();
    if (searchTerm && !rowStr.includes(searchTerm)) return;
    html += '<tr>';
    vals.forEach(v => {
      let display = escHtml(v);
      if (searchTerm && display.toLowerCase().includes(searchTerm)) {
        const re = new RegExp('(' + searchTerm.replace(/[.*+?^${}()|[\]\\]/g,'\\$&') + ')', 'gi');
        display = display.replace(re, '<span class="da-highlight">$1</span>');
      }
      html += `<td>${display}</td>`;
    });
    html += '</tr>';
  });
  html += '</tbody></table>';
  return html;
}

function buildFlatObjectTable(obj, searchTerm) {
  if (!obj) return '<div class="da-raw dim">No data</div>';
  let html = '<table class="dt"><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody>';
  Object.entries(obj).forEach(([k, v]) => {
    const valStr = flattenValue(v);
    const rowStr = (k + ' ' + valStr).toLowerCase();
    if (searchTerm && !rowStr.includes(searchTerm)) return;
    let dispK = escHtml(k), dispV = escHtml(valStr);
    if (searchTerm) {
      const re = new RegExp('(' + searchTerm.replace(/[.*+?^${}()|[\]\\]/g,'\\$&') + ')', 'gi');
      dispK = dispK.replace(re, '<span class="da-highlight">$1</span>');
      dispV = dispV.replace(re, '<span class="da-highlight">$1</span>');
    }
    html += `<tr><td class="gpu-name">${dispK}</td><td>${dispV}</td></tr>`;
  });
  html += '</tbody></table>';
  return html;
}

function buildDictOfObjectsTable(obj, searchTerm) {
  if (!obj) return '<div class="da-raw dim">No data</div>';
  const keys = Object.keys(obj);
  if (!keys.length) return '<div class="da-raw dim">No data</div>';
  const first = obj[keys[0]];

  // If values are simple objects, show as a combined table
  if (first && typeof first === 'object' && !Array.isArray(first)) {
    const subKeys = Object.keys(first);
    const isSimple = subKeys.every(sk => typeof first[sk] !== 'object' || first[sk] === null);
    if (isSimple) {
      let html = '<table class="dt"><thead><tr><th>ID</th>';
      subKeys.forEach(sk => html += `<th>${escHtml(sk)}</th>`);
      html += '</tr></thead><tbody>';
      keys.forEach(id => {
        const row = obj[id];
        const vals = subKeys.map(sk => flattenValue(row[sk]));
        const rowStr = (id + ' ' + vals.join(' ')).toLowerCase();
        if (searchTerm && !rowStr.includes(searchTerm)) return;
        const re = searchTerm ? new RegExp('(' + searchTerm.replace(/[.*+?^${}()|[\]\\]/g,'\\$&') + ')', 'gi') : null;
        let dispId = escHtml(id);
        if (re) dispId = dispId.replace(re, '<span class="da-highlight">$1</span>');
        html += `<tr><td class="gpu-name">${dispId}</td>`;
        vals.forEach(v => {
          let d = escHtml(v);
          if (re) d = d.replace(re, '<span class="da-highlight">$1</span>');
          html += `<td>${d}</td>`;
        });
        html += '</tr>';
      });
      html += '</tbody></table>';
      return html;
    }
  }

  // Complex nested: show JSON per key
  let html = '';
  keys.forEach(id => {
    const jsonStr = JSON.stringify(obj[id], null, 2);
    const rowStr = (id + ' ' + jsonStr).toLowerCase();
    if (searchTerm && !rowStr.includes(searchTerm)) return;
    let dispJson = escHtml(jsonStr);
    if (searchTerm) {
      const re = new RegExp('(' + searchTerm.replace(/[.*+?^${}()|[\]\\]/g,'\\$&') + ')', 'gi');
      dispJson = dispJson.replace(re, '<span class="da-highlight">$1</span>');
    }
    html += `<div style="border-bottom:1px solid var(--border-0);padding:8px 16px;">
      <span class="gpu-name" style="display:block;margin-bottom:4px;color:var(--cyan);">${escHtml(id)}</span>
      <pre class="da-raw" style="padding:4px 0;margin:0;">${dispJson}</pre>
    </div>`;
  });
  return html || '<div class="da-raw dim">No matching entries</div>';
}

function renderDataAudit(searchTerm) {
  const container = document.getElementById('dataAuditContainer');
  if (!container) return;
  const st = (searchTerm || '').toLowerCase().trim();
  let totalEntries = 0;
  let html = '';

  DATA_SECTIONS.forEach((sec, idx) => {
    const val = DATA[sec.key];
    const count = countEntries(val, sec.type);
    totalEntries += count;

    // Build body content
    let bodyContent;
    if (sec.type === 'array') bodyContent = buildArrayTable(val, st);
    else if (sec.type === 'flat-object') bodyContent = buildFlatObjectTable(val, st);
    else bodyContent = buildDictOfObjectsTable(val, st);

    const isOpen = st ? true : false;
    const typeLabel = sec.type === 'array' ? 'ARRAY' : sec.type === 'flat-object' ? 'OBJECT' : 'COLLECTION';

    html += `<div class="da-section" data-da-idx="${idx}">
      <div class="da-header${isOpen ? ' open' : ''}" onclick="toggleDataSection(this)">
        <div class="da-header-left">
          <span class="da-chevron">&#9654;</span>
          <span class="da-title">${escHtml(sec.label)}</span>
          <span class="da-badge" style="background:var(--${sec.color}-dim);color:var(--${sec.color});">${typeLabel}</span>
        </div>
        <div class="da-meta">
          <span class="da-badge" style="background:var(--bg-2);color:var(--text-2);">${count} entries</span>
          <span class="da-badge" style="background:var(--bg-2);color:var(--text-3);">DATA.${sec.key}</span>
        </div>
      </div>
      <div class="da-body${isOpen ? ' open' : ''}">${bodyContent}</div>
    </div>`;
  });

  container.innerHTML = html;
  document.getElementById('dataAuditCount').textContent = totalEntries + ' entries / ' + DATA_SECTIONS.length + ' datasets';
}

function toggleDataSection(headerEl) {
  headerEl.classList.toggle('open');
  headerEl.nextElementSibling.classList.toggle('open');
}

function expandAllDataSections(open) {
  document.querySelectorAll('.da-header').forEach(h => {
    h.classList.toggle('open', open);
    h.nextElementSibling.classList.toggle('open', open);
  });
}

function exportAllDataJSON() {
  const blob = new Blob([JSON.stringify(DATA, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'gpu-intel-pro-data-export.json';
  a.click();
  URL.revokeObjectURL(a.href);
}

// Wire up search
document.getElementById('dataAuditSearch').addEventListener('input', function() {
  renderDataAudit(this.value);
});

// ════════════════════════════════════════════════════════════════
// INIT
// ════════════════════════════════════════════════════════════════
loadAllData();
</script>
</body>
</html>
